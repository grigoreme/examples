{"version":3,"sources":["webpack://dojo2_todo_mvc_tsx/./src/main.ts","webpack://dojo2_todo_mvc_tsx/WidgetBase.ts","webpack://dojo2_todo_mvc_tsx/d.ts","webpack://dojo2_todo_mvc_tsx/Map.ts","webpack://dojo2_todo_mvc_tsx/Themed.ts","webpack://dojo2_todo_mvc_tsx/tsx.ts","webpack://dojo2_todo_mvc_tsx/Registry.ts","webpack://dojo2_todo_mvc_tsx/Evented.ts","webpack://dojo2_todo_mvc_tsx/handleDecorator.ts","webpack://dojo2_todo_mvc_tsx/WeakMap.ts","webpack://dojo2_todo_mvc_tsx/diff.ts","webpack://dojo2_todo_mvc_tsx/iterator.ts","webpack://dojo2_todo_mvc_tsx/Promise.ts","webpack://dojo2_todo_mvc_tsx/inject.ts","webpack://dojo2_todo_mvc_tsx/beforeProperties.ts","webpack://dojo2_todo_mvc_tsx/alwaysRender.ts","webpack://dojo2_todo_mvc_tsx/diffProperty.ts","webpack://dojo2_todo_mvc_tsx/vdom.ts","webpack://dojo2_todo_mvc_tsx/string.ts","webpack://dojo2_todo_mvc_tsx/cssTransitions.ts","webpack://dojo2_todo_mvc_tsx/object.ts","webpack://dojo2_todo_mvc_tsx/Destroyable.ts","webpack://dojo2_todo_mvc_tsx/RegistryHandler.ts","webpack://dojo2_todo_mvc_tsx/NodeHandler.ts","webpack://dojo2_todo_mvc_tsx/RouterInjector.ts","webpack://dojo2_todo_mvc_tsx/Router.ts","webpack://dojo2_todo_mvc_tsx/QueuingEvented.ts","webpack://dojo2_todo_mvc_tsx/HashHistory.ts","webpack://dojo2_todo_mvc_tsx/ReduxInjector.ts","webpack://dojo2_todo_mvc_tsx/./src/containers/TodoAppContainer.ts","webpack://dojo2_todo_mvc_tsx/Container.ts","webpack://dojo2_todo_mvc_tsx/./src/widgets/TodoApp.tsx","webpack://dojo2_todo_mvc_tsx/Injector.ts","webpack://dojo2_todo_mvc_tsx/./src/widgets/TodoHeader.tsx","webpack://dojo2_todo_mvc_tsx/./src/widgets/styles/todoHeader.m.css","webpack://dojo2_todo_mvc_tsx/./src/widgets/TodoFooter.tsx","webpack://dojo2_todo_mvc_tsx/./src/widgets/TodoFilter.tsx","webpack://dojo2_todo_mvc_tsx/Link.ts","webpack://dojo2_todo_mvc_tsx/./src/widgets/styles/todoFilter.m.css","webpack://dojo2_todo_mvc_tsx/./src/widgets/styles/todoFooter.m.css","webpack://dojo2_todo_mvc_tsx/./src/widgets/TodoList.tsx","webpack://dojo2_todo_mvc_tsx/./src/widgets/TodoItem.tsx","webpack://dojo2_todo_mvc_tsx/./src/widgets/styles/todoItem.m.css","webpack://dojo2_todo_mvc_tsx/./src/widgets/styles/todoList.m.css","webpack://dojo2_todo_mvc_tsx/Outlet.ts","webpack://dojo2_todo_mvc_tsx/./src/widgets/styles/todoApp.m.css","webpack://dojo2_todo_mvc_tsx/./src/actions/todoActions.ts","webpack://dojo2_todo_mvc_tsx/util.ts","webpack://dojo2_todo_mvc_tsx/./node_modules/symbol-observable/es/index.js","webpack://dojo2_todo_mvc_tsx/(webpack)/buildin/harmony-module.js","webpack://dojo2_todo_mvc_tsx/./node_modules/symbol-observable/es/ponyfill.js","webpack://dojo2_todo_mvc_tsx/./node_modules/lodash-es/_freeGlobal.js","webpack://dojo2_todo_mvc_tsx/./src/reducers/index.ts","webpack://dojo2_todo_mvc_tsx/./node_modules/lodash-es/_root.js","webpack://dojo2_todo_mvc_tsx/./node_modules/lodash-es/_Symbol.js","webpack://dojo2_todo_mvc_tsx/./node_modules/lodash-es/_getRawTag.js","webpack://dojo2_todo_mvc_tsx/./node_modules/lodash-es/_objectToString.js","webpack://dojo2_todo_mvc_tsx/./node_modules/lodash-es/_baseGetTag.js","webpack://dojo2_todo_mvc_tsx/./node_modules/lodash-es/_overArg.js","webpack://dojo2_todo_mvc_tsx/./node_modules/lodash-es/_getPrototype.js","webpack://dojo2_todo_mvc_tsx/./node_modules/lodash-es/isObjectLike.js","webpack://dojo2_todo_mvc_tsx/./node_modules/lodash-es/isPlainObject.js","webpack://dojo2_todo_mvc_tsx/./node_modules/redux/es/createStore.js","webpack://dojo2_todo_mvc_tsx/./node_modules/redux/es/combineReducers.js","webpack://dojo2_todo_mvc_tsx/./node_modules/redux/es/bindActionCreators.js","webpack://dojo2_todo_mvc_tsx/./node_modules/redux/es/compose.js","webpack://dojo2_todo_mvc_tsx/./node_modules/redux/es/applyMiddleware.js","webpack://dojo2_todo_mvc_tsx/./node_modules/redux/es/index.js"],"names":["global_1","__webpack_require__","vdom_1","d_1","RouterInjector_1","ReduxInjector_1","Registry_1","TodoAppContainer_1","redux_1","reducers_1","registry","Registry","store","createStore","todoReducer","todos","currentTodo","activeCount","completedCount","default","__REDUX_DEVTOOLS_EXTENSION__","defineInjector","reduxInjectorFactory","registerRouterInjector","path","outlet","defaultParams","filter","defaultRoute","w","TodoAppContainer","mount","Map_1","WeakMap_1","diff_1","RegistryHandler_1","NodeHandler_1","lazyWidgetId","lazyWidgetIdMap","decoratorMap","builtDecoratorMap","exports","widgetInstanceMap","boundAuto","auto","bind","noBind","WidgetBase","_this","this","_initialProperties","_changedPropertyKeys","_nodeHandler","_handles","_children","_decoratorCache","_properties","_boundRenderFunc","render","_boundInvalidate","invalidate","set","dirty","onAttach","onDetach","destroy","nodeHandler","rendering","inputProperties","own","delete","clear","_runAfterConstructors","prototype","meta","MetaType","undefined","_metaMap","cached","get","Object","defineProperty","tslib_1","__spread","__setProperties__","originalProperties","instanceData","properties","_runBeforeProperties","registeredDiffPropertyNames","getDecorator","changedPropertyKeys","propertyNames","keys","length","allProperties","checkedProperties","diffPropertyResults_1","runReactions","i","propertyName","indexOf","push","previousProperty","newProperty","_bindFunctionProperty","diffFunctions","i_1","result","changed","value","reactionFunctions","executedReactions_1","forEach","_a","reaction","propertyChanged","reactionRun","call","__assign","__setChildren__","children","_filterAndConvert","nodes","item","isArray","Array","filteredNodes","convertedNodes","node","isVNode","deferredPropertiesCallback","isWNode","isWidgetBaseConstructor","widgetConstructor","id","define","Boolean","label","registryItem","has","tag","text","type","VNODE","__render__","_runBeforeRenders","dNode","_runAfterRenders","v","addDecorator","decoratorKey","hasOwnProperty","decoratorList","constructor","specificDecoratorList","apply","decorators","_buildDecoratorList","allDecorators","instanceMap","unshift","getPrototypeOf","buildDecorators","decoratorCache","property","_bindFunctionPropertyMap","bindInfo","boundFunc","scope","_registry","on","beforeProperties","reduce","beforePropertiesFunction","beforeRenders","beforeRenderFunction","updatedRender","console","warn","afterRenders","afterRenderFunction","afterRender","isDomMeta","afterConstructors","afterConstructor","handle","pop","_type","WIDGET_BASE_TYPE","child","WNODE","DOMVNODE","isElementNode","tagName","isDomVNode","decorate","dNodes","optionsOrModifier","predicate","modifier","shallow","breaker","shift","widgetConstructorOrNode","propertiesOrChildren","classes","_b","styles","newProperties","__rest","_c","_d","nodeClasses","_e","nodeStyles","nodeProperties","dom","attrs","props","diffType","toLowerCase","attributes","events","domNode","data","iterator_1","object_1","has_1","Map","iterable","_keys","_values","Symbol","toStringTag","isArrayLike","iterable_1","__values","iterable_1_1","next","done","_indexOfKey","key","length_1","is","index","splice","entries","values","map","ShimIterator","callback","context","length_2","iterator","species","Injector_1","inject_1","handleDecorator_1","diffProperty_1","THEME_KEY","ThemedMixin","Base","_super","Themed","arguments","_registeredBaseThemeKeys","_recalculateClasses","_theme","__extends","theme","_recalculateThemeClasses","className","_getThemeClass","onPropertiesChanged","extraClasses","themeClassName","_baseThemeClassesReverseLookup","resultClassNames","_classes","classNames","extraClass","_registeredBaseTheme","join","baseThemes","finalBaseTheme","baseTheme","currentClassNames","baseClass","createThemeClassesLookup","themeKey","computed","__decorate","diffProperty","inject","name","INJECTED_THEME_KEY","getProperties","handleDecorator","target","registerThemeInjector","themeRegistry","themeInjector","Injector","invalidator","setInvalidator","REGISTRY_ITEM","FromRegistry","spreadChildren","fromRegistry","class_1","tsx","_i","__autoRegistryItem","name_1","Promise_1","Evented_1","isWidgetConstructorDefaultExport","emitLoadedEvent","widgetLabel","emit","action","_widgetRegistry","Error","toString","then","widgetCtor","error","injectorFactory","_injectorRegistry","Evented","injectorItem","injector","promise","getInjector","hasInjector","Destroyable_1","regexMap","isGlobMatch","globString","targetString","regex","RegExp","replace","test","listenersMap","event","methods","method","listener","handles_1","_addListener","listeners","Destroyable","handler","propertyKey","descriptor","startId","WeakMap","DELETED_1","generateName_1","Math","floor","Date","now","random","_name","_frozenEntries","__read","_getFrozenEntryIndex","entry","frozenIndex","TypeError","create","isFrozen","isObjectOrArray","ignore","reference","validOldProperty","validNewProperty","previousKeys","newKeys","some","always","string_1","staticDone","list","_nextIndex","isIterable","_nativeIterator","_list","forOf","thisArg","broken","doBreak","l","char","code","charCodeAt","HIGH_SURROGATE_MIN","HIGH_SURROGATE_MAX","queue_1","ShimPromise","Promise","isThenable","executor","state","isChained","callbacks","whenFinished","settle","newState","resolvedValue","queueMicroTask","count","resolve","onFulfilled","onRejected","reject","all","complete","total","populating","fulfill","finish","race","iterable_2","iterable_2_1","reason","catch","finally","onFinally","beforeProperties_1","registeredInjectorsMap","registeredInjectors","alwaysRender","diffFunction","reactionFunction","cssTransitions_1","WidgetBase_1","EMPTY_ARRAY","nodeOperations","NAMESPACE_SVG","NAMESPACE_W3","NAMESPACE_XLINK","isWNodeWrapper","isVNodeWrapper","buildPreviousProperties","current","propName","attrName","getAttribute","same","dnode1","dnode2","instance","findIndexOfChild","sameAs","start","createClassPropValue","trim","updateAttribute","attrValue","namespace","setAttributeNS","removeAttribute","setAttribute","runEnterAnimation","transitions","enterAnimation","enter","runExitAnimation","exitAnimation","removeDomNode","parentNode","removeChild","exit","arrayFrom","arr","slice","renderer","_renderScheduled","parentInvalidate","_mountOptions","sync","merge","transition","document","body","_invalidationQueue","_processQueue","_applicationQueue","_eventMap","_instanceToWrapperMap","_parentWrapperMap","_wrapperSiblingMap","_insertBeforeMap","_afterRenderCallbacks","_deferredRenderCallbacks","_allMergedNodes","nodeOperation","propValue","previousValue","updateEvent","eventName","currentValue","previousEvent","removeEventListener","evt","addEventListener","removeOrphanedEvents","previousProperties","onlyEvents","isEvent","substr","eventCallback","renderedToWrapper","rendered","parent","currentParent","previousItem","requiresInsertBefore","hasPreviousSiblings","depth","wrappedRendered","hasParentWNode","hasCurrentParentChildren","childrenWrappers","insertBefore","renderedItem","wrapper","order","hasAnimations","nextParent","findParentWNodeWrapper","currentNode","parentWNodeWrapper","parentWrapper","findParentDomNode","parentDomNode","runDeferredProperties","properties_1","processProperties","findInsertBefore","searchNode","nextSibling","setValue","domValue","onInputValue","onSelectValue","setProperties","currentProperties","nextWrapper","includesEventsAndAttributes","propNames","propCount","previousClassString","currentClassString","merged","domClasses","split","styleNames","styleCount","j","styleName","newStyleValue","style","lastIndexOf","previousAttributes","attrNames","attrCount","updateAttributes","events_1","_runInvalidationQueue","invalidationQueue","previouslyRendered","sort","a","b","parent_1","sibling","item_1","_updateWidget","_runProcessQueue","_runDomInstructionQueue","_runCallbacks","_process","reverse","parentElement","add","inserted","parent_2","instanceData_1","addRoot","attached","run","requestIdleCallback","setTimeout","runAfterRenderCallbacks","requestAnimationFrame","runDeferredRenderCallbacks","mergeNodes","oldIndex","newIndex","currentLength","nextLength","instructions","currentWrapper","domElement","toUpperCase","mergeNodeIndex","_processMergeNodes","_processOne","widget","childNodes","createElementNS","createElement","createTextNode","_createDom","base","_createWidget","updatedTextNode","ownerDocument","replaceChild","_updateDom","wrappers","_removeDom","_removeWidget","mountOptions","mergedNode","wrapNodes","util_1","LOW_SURROGATE_MIN","LOW_SURROGATE_MAX","fromCodePoint","String","raw","codePointAt","wrapNative","endsWith","includes","normalize","repeat","startsWith","normalizeSubstringArgs_1","search","position","isEnd","min","max","codePoints","fromCharCode","codeUnits","codePoint","Number","isFinite","RangeError","highSurrogate","lowSurrogate","callSite","substitutions","rawStrings","numSubstitutions","first","second","endPosition","isNaN","Infinity","end","padEnd","padStart","maxLength","fillString","strText","padding","browserSpecificTransitionEndEventName","browserSpecificAnimationEndEventName","initialize","element","determineBrowserStyleNames","runAndCleanUp","startAnimation","finishAnimation","finished","transitionEnd","activeClass","enterAnimationActive","classList","remove","removeNode","exitAnimationActive","Symbol_1","globalObject","assign","getOwnPropertyDescriptor","getOwnPropertyNames","getOwnPropertySymbols","o","match","sources","to","nextSource","nextKey","prop","isSymbol","for","substring","value1","value2","getOwnPropertyDescriptors","previous","noop","destroyed","handles","RegistryHandler","_registryWidgetLabelMap","_registryInjectorLabelMap","baseRegistry","globalPrecedence","_get","getFunctionName","labelMap","registries","registeredLabels","NodeEventType","NodeHandler","_nodeMap","Widget","addProjector","Projector","Router_1","config","options","routerOptions","router","Router","QueuingEvented_1","HashHistory_1","PARAM","paramRegExp","matchingParams","previousParams","params","every","_routes","_outletMap","_matchedOutlets","_currentParams","_currentQueryParams","_onChange","requestedPath","_stripLeadingSlash","previousMatchedOutlets","queryParamString","_getQueryParams","routeConfig","segments","routeConfigs","route","matchedRoutes","segments_1","segmentIndex","paramIndex","routeMatch","segment","childRoute","matchedOutletName","matchedRoute","score","matchedOutlet","queryParams","isError","isExact","previousMatchedOutlet","errorOutlet","previousMatchedOutletKeys","HistoryManager","HashHistory","window","_register","_history","onChange","_defaultOutlet","link","setPath","linkPath","fullPath","fullQueryParams","param","fullParams","prefix","getOutlet","outletIdentifier","routes","parentRoute","parsedPath","queryParam","queryParameters","QueuingEvented","_queue","maxEvents","hasMatch","queue","listenerType","queuedType","normalizePath","_window","location","hash","_current","_onChangeFunction","extraOptions","subscribe","Container_1","TodoApp_1","todoActions_1","Container","TodoApp","getState","addTodo","dispatch","todoInput","todo","removeTodo","toggleTodo","toggleTodos","clearCompleted","editTodo","saveTodo","alwaysRender_1","component","WidgetContainer","Themed_1","tsx_1","TodoHeader_1","TodoFooter_1","TodoList_1","Outlet_1","css","TodoAppBase","todoCount","todoapp","allCompleted","details","payload","_payload","_invalidator","TodoHeaderBase","TodoHeader","_toggleAllTodos","_addTodo","which","_todoInput","title","focus","newTodo","onkeyup","oninput","placeholder","onchange","checked","toggleAll","module"," _key","TodoFilter_1","TodoFooter","completedItems","countLabel","footer","TodoFilter","onclick","Link_1","TodoFilterBase","links","_createLink","filters","currentFilter","selected","Link","_getProperties","routerKey","isOutlet","onClick","href","router_1","defaultPrevented","button","metaKey","ctrlKey","preventDefault","TodoItem_1","TodoListBase","TodoList","items","completed","filterTodos","todoList","TodoItemBase","TodoItem","_toggleTodo","_editTodo","_removeTodo","_updateTodo","editing","onElementCreated","todoItemClasses","todoItem","view","toggle","todoLabel","innerHTML","ondblclick","edit","onblur","Outlet","onRouterKeyChange","_handle","outletContext","main","uuid","shouldDeepCopyObject","copyArray","array","inherited","_mixin","deep","kwArgs","copied","copiedClone","source","targetValue","guaranteeMinimumTimeout","delay","timerId","startTime","timeoutHandler","delta","clearTimeout","deepAssign","deepMixin","mixin","partial","targetFunction","suppliedArgs","args","concat","debounce","timer","throttle","ran","c","r","global","root","_ponyfill_js__WEBPACK_IMPORTED_MODULE_0__","self","__webpack_exports__","originalModule","webpackPolyfill","enumerable","symbolObservablePonyfill","observable","d","freeGlobal","todosCompleted_1","freeSelf","_Symbol","_freeGlobal","Function","objectProto","_getRawTag_hasOwnProperty","nativeObjectToString","symToStringTag","_getRawTag","isOwn","unmasked","e","_objectToString_nativeObjectToString","_objectToString","nullTag","undefinedTag","_baseGetTag_symToStringTag","_baseGetTag","_getPrototype","func","transform","arg","_overArg","lodash_es_isObjectLike","objectTag","funcProto","isPlainObject_objectProto","funcToString","isPlainObject_hasOwnProperty","objectCtorString","lodash_es_isPlainObject","proto","Ctor","ActionTypes","INIT","createStore_createStore","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","isSubscribed","replaceReducer","nextReducer","es","_ref","outerSubscribe","observer","observeState","unsubscribe","getUndefinedStateErrorMessage","actionType","combineReducers","reducers","reducerKeys","finalReducers","finalReducerKeys","shapeAssertionError","assertReducerShape","hasChanged","nextState","_key","previousStateForKey","nextStateForKey","errorMessage","bindActionCreator","actionCreator","bindActionCreators","actionCreators","boundActionCreators","compose","_len","funcs","_extends","applyMiddleware","middlewares","chain","_dispatch","middlewareAPI","middleware"],"mappings":"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","file":"main.acdf27df63324d0d65ff.bundle.js","sourcesContent":["import global from '@dojo/framework/shim/global';\nimport renderer from '@dojo/framework/widget-core/vdom';\nimport { w } from '@dojo/framework/widget-core/d';\nimport { registerRouterInjector } from '@dojo/framework/routing/RouterInjector';\nimport { reduxInjectorFactory } from '@dojo/interop/redux/ReduxInjector';\nimport { Registry } from '@dojo/framework/widget-core/Registry';\n\nimport { TodoAppContainer } from './containers/TodoAppContainer';\nimport { createStore } from 'redux';\nimport { todoReducer } from './reducers';\n\nconst defaultState = {\n\ttodos: [],\n\tcurrentTodo: '',\n\tactiveCount: 0,\n\tcompletedCount: 0\n};\n\nconst registry = new Registry();\nconst store = createStore(todoReducer, defaultState, global.__REDUX_DEVTOOLS_EXTENSION__ && global.__REDUX_DEVTOOLS_EXTENSION__());\nregistry.defineInjector('application-state', reduxInjectorFactory(store));\n\nconst config = [\n\t{\n\t\tpath: 'filter/{filter}',\n\t\toutlet: 'filter',\n\t\tdefaultParams: {\n\t\t\tfilter: 'all'\n\t\t},\n\t\tdefaultRoute: true\n\t}\n];\n\nconst router = registerRouterInjector(config, registry);\nconst r = renderer(() => w(TodoAppContainer, {}));\nr.mount({ registry });\n","import Map from '../shim/Map';\nimport WeakMap from '../shim/WeakMap';\nimport { v, VNODE, isVNode, isWNode } from './d';\nimport { auto } from './diff';\nimport {\n\tAfterRender,\n\tBeforeProperties,\n\tBeforeRender,\n\tDiffPropertyReaction,\n\tDNode,\n\tDefaultWidgetBaseInterface,\n\tLazyWidget,\n\tRender,\n\tWidgetMetaConstructor,\n\tWidgetBaseInterface,\n\tWidgetProperties,\n\tWNode,\n\tVNode,\n\tLazyDefine,\n\tMetaBase\n} from './interfaces';\nimport RegistryHandler from './RegistryHandler';\nimport NodeHandler from './NodeHandler';\nimport { isWidgetBaseConstructor, WIDGET_BASE_TYPE } from './Registry';\nimport { Handle } from '../core/Destroyable';\nimport { Base } from './meta/Base';\n\ninterface ReactionFunctionConfig {\n\tpropertyName: string;\n\treaction: DiffPropertyReaction;\n}\n\nexport interface WidgetData {\n\tonDetach: () => void;\n\tonAttach: () => void;\n\tdirty: boolean;\n\tnodeHandler: NodeHandler;\n\tinvalidate?: Function;\n\trendering: boolean;\n\tinputProperties: any;\n}\n\nexport type BoundFunctionData = { boundFunc: (...args: any[]) => any; scope: any };\n\nlet lazyWidgetId = 0;\nconst lazyWidgetIdMap = new WeakMap<LazyWidget, string>();\nconst decoratorMap = new WeakMap<Function, Map<string, any[]>>();\nconst builtDecoratorMap = new WeakMap<Function, Map<string, any[]>>();\nexport const widgetInstanceMap = new WeakMap<\n\tWidgetBase<WidgetProperties, DNode<DefaultWidgetBaseInterface>>,\n\tWidgetData\n>();\nconst boundAuto = auto.bind(null);\n\nexport const noBind = '__dojo_no_bind';\n\nfunction toTextVNode(data: any): VNode {\n\treturn {\n\t\ttag: '',\n\t\tproperties: {},\n\t\tchildren: undefined,\n\t\ttext: `${data}`,\n\t\ttype: VNODE\n\t};\n}\n\nfunction isLazyDefine(item: any): item is LazyDefine {\n\treturn Boolean(item && item.label);\n}\n\nfunction isDomMeta(meta: any): meta is Base {\n\treturn Boolean(meta.afterRender);\n}\n\n/**\n * Main widget base for all widgets to extend\n */\nexport class WidgetBase<P = WidgetProperties, C extends DNode = DNode> implements WidgetBaseInterface<P, C> {\n\t/**\n\t * static identifier\n\t */\n\tstatic _type = WIDGET_BASE_TYPE;\n\n\t/**\n\t * children array\n\t */\n\tprivate _children: (C | null)[];\n\n\t/**\n\t * Indicates if it is the initial set properties cycle\n\t */\n\tprivate _initialProperties = true;\n\n\t/**\n\t * internal widget properties\n\t */\n\tprivate _properties: P & WidgetProperties & { [index: string]: any };\n\n\t/**\n\t * Array of property keys considered changed from the previous set properties\n\t */\n\tprivate _changedPropertyKeys: string[] = [];\n\n\t/**\n\t * map of decorators that are applied to this widget\n\t */\n\tprivate _decoratorCache: Map<string, any[]>;\n\n\tprivate _registry: RegistryHandler | undefined;\n\n\t/**\n\t * Map of functions properties for the bound function\n\t */\n\tprivate _bindFunctionPropertyMap: WeakMap<(...args: any[]) => any, BoundFunctionData> | undefined;\n\n\tprivate _metaMap: Map<WidgetMetaConstructor<any>, MetaBase> | undefined;\n\n\tprivate _boundRenderFunc: Render;\n\n\tprivate _boundInvalidate: () => void;\n\n\tprivate _nodeHandler: NodeHandler = new NodeHandler();\n\n\tprivate _handles: Handle[] = [];\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor() {\n\t\tthis._children = [];\n\t\tthis._decoratorCache = new Map<string, any[]>();\n\t\tthis._properties = {} as P;\n\t\tthis._boundRenderFunc = this.render.bind(this);\n\t\tthis._boundInvalidate = this.invalidate.bind(this);\n\n\t\twidgetInstanceMap.set(this, {\n\t\t\tdirty: true,\n\t\t\tonAttach: (): void => {\n\t\t\t\tthis.onAttach();\n\t\t\t},\n\t\t\tonDetach: (): void => {\n\t\t\t\tthis.onDetach();\n\t\t\t\tthis.destroy();\n\t\t\t},\n\t\t\tnodeHandler: this._nodeHandler,\n\t\t\trendering: false,\n\t\t\tinputProperties: {}\n\t\t});\n\n\t\tthis.own({\n\t\t\tdestroy: () => {\n\t\t\t\twidgetInstanceMap.delete(this);\n\t\t\t\tthis._nodeHandler.clear();\n\t\t\t\tthis._nodeHandler.destroy();\n\t\t\t}\n\t\t});\n\n\t\tthis._runAfterConstructors();\n\t}\n\n\tprotected meta<T extends MetaBase>(MetaType: WidgetMetaConstructor<T>): T {\n\t\tif (this._metaMap === undefined) {\n\t\t\tthis._metaMap = new Map<WidgetMetaConstructor<any>, MetaBase>();\n\t\t}\n\t\tlet cached = this._metaMap.get(MetaType);\n\t\tif (!cached) {\n\t\t\tcached = new MetaType({\n\t\t\t\tinvalidate: this._boundInvalidate,\n\t\t\t\tnodeHandler: this._nodeHandler,\n\t\t\t\tbind: this\n\t\t\t});\n\t\t\tthis.own(cached);\n\t\t\tthis._metaMap.set(MetaType, cached);\n\t\t}\n\n\t\treturn cached as T;\n\t}\n\n\tprotected onAttach(): void {\n\t\t// Do nothing by default.\n\t}\n\n\tprotected onDetach(): void {\n\t\t// Do nothing by default.\n\t}\n\n\tpublic get properties(): Readonly<P> & Readonly<WidgetProperties> {\n\t\treturn this._properties;\n\t}\n\n\tpublic get changedPropertyKeys(): string[] {\n\t\treturn [...this._changedPropertyKeys];\n\t}\n\n\tpublic __setProperties__(originalProperties: this['properties'], bind?: WidgetBaseInterface): void {\n\t\tconst instanceData = widgetInstanceMap.get(this);\n\t\tif (instanceData) {\n\t\t\tinstanceData.inputProperties = originalProperties;\n\t\t}\n\t\tconst properties = this._runBeforeProperties(originalProperties);\n\t\tconst registeredDiffPropertyNames = this.getDecorator('registeredDiffProperty');\n\t\tconst changedPropertyKeys: string[] = [];\n\t\tconst propertyNames = Object.keys(properties);\n\n\t\tif (this._initialProperties === false || registeredDiffPropertyNames.length !== 0) {\n\t\t\tconst allProperties = [...propertyNames, ...Object.keys(this._properties)];\n\t\t\tconst checkedProperties: (string | number)[] = [];\n\t\t\tconst diffPropertyResults: any = {};\n\t\t\tlet runReactions = false;\n\n\t\t\tfor (let i = 0; i < allProperties.length; i++) {\n\t\t\t\tconst propertyName = allProperties[i];\n\t\t\t\tif (checkedProperties.indexOf(propertyName) !== -1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcheckedProperties.push(propertyName);\n\t\t\t\tconst previousProperty = this._properties[propertyName];\n\t\t\t\tconst newProperty = this._bindFunctionProperty(properties[propertyName], bind);\n\t\t\t\tif (registeredDiffPropertyNames.indexOf(propertyName) !== -1) {\n\t\t\t\t\trunReactions = true;\n\t\t\t\t\tconst diffFunctions = this.getDecorator(`diffProperty:${propertyName}`);\n\t\t\t\t\tfor (let i = 0; i < diffFunctions.length; i++) {\n\t\t\t\t\t\tconst result = diffFunctions[i](previousProperty, newProperty);\n\t\t\t\t\t\tif (result.changed && changedPropertyKeys.indexOf(propertyName) === -1) {\n\t\t\t\t\t\t\tchangedPropertyKeys.push(propertyName);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (propertyName in properties) {\n\t\t\t\t\t\t\tdiffPropertyResults[propertyName] = result.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst result = boundAuto(previousProperty, newProperty);\n\t\t\t\t\tif (result.changed && changedPropertyKeys.indexOf(propertyName) === -1) {\n\t\t\t\t\t\tchangedPropertyKeys.push(propertyName);\n\t\t\t\t\t}\n\t\t\t\t\tif (propertyName in properties) {\n\t\t\t\t\t\tdiffPropertyResults[propertyName] = result.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (runReactions) {\n\t\t\t\tconst reactionFunctions: ReactionFunctionConfig[] = this.getDecorator('diffReaction');\n\t\t\t\tconst executedReactions: Function[] = [];\n\t\t\t\treactionFunctions.forEach(({ reaction, propertyName }) => {\n\t\t\t\t\tconst propertyChanged = changedPropertyKeys.indexOf(propertyName) !== -1;\n\t\t\t\t\tconst reactionRun = executedReactions.indexOf(reaction) !== -1;\n\t\t\t\t\tif (propertyChanged && !reactionRun) {\n\t\t\t\t\t\treaction.call(this, this._properties, diffPropertyResults);\n\t\t\t\t\t\texecutedReactions.push(reaction);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis._properties = diffPropertyResults;\n\t\t\tthis._changedPropertyKeys = changedPropertyKeys;\n\t\t} else {\n\t\t\tthis._initialProperties = false;\n\t\t\tfor (let i = 0; i < propertyNames.length; i++) {\n\t\t\t\tconst propertyName = propertyNames[i];\n\t\t\t\tif (typeof properties[propertyName] === 'function') {\n\t\t\t\t\tproperties[propertyName] = this._bindFunctionProperty(properties[propertyName], bind);\n\t\t\t\t} else {\n\t\t\t\t\tchangedPropertyKeys.push(propertyName);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._changedPropertyKeys = changedPropertyKeys;\n\t\t\tthis._properties = { ...properties };\n\t\t}\n\n\t\tif (this._changedPropertyKeys.length > 0) {\n\t\t\tthis.invalidate();\n\t\t}\n\t}\n\n\tpublic get children(): (C | null)[] {\n\t\treturn this._children;\n\t}\n\n\tpublic __setChildren__(children: (C | null)[]): void {\n\t\tif (this._children.length > 0 || children.length > 0) {\n\t\t\tthis._children = children;\n\t\t\tthis.invalidate();\n\t\t}\n\t}\n\n\tprivate _filterAndConvert(nodes: DNode[]): (WNode | VNode)[];\n\tprivate _filterAndConvert(nodes: DNode): WNode | VNode;\n\tprivate _filterAndConvert(nodes: DNode | DNode[]): (WNode | VNode) | (WNode | VNode)[];\n\tprivate _filterAndConvert(nodes: DNode | DNode[]): (WNode | VNode) | (WNode | VNode)[] {\n\t\tconst isArray = Array.isArray(nodes);\n\t\tconst filteredNodes = Array.isArray(nodes) ? nodes : [nodes];\n\t\tconst convertedNodes: (WNode | VNode)[] = [];\n\t\tfor (let i = 0; i < filteredNodes.length; i++) {\n\t\t\tconst node = filteredNodes[i];\n\t\t\tif (!node || node === true) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (typeof node === 'string') {\n\t\t\t\tconvertedNodes.push(toTextVNode(node));\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (isVNode(node) && node.deferredPropertiesCallback) {\n\t\t\t\tconst properties = node.deferredPropertiesCallback(false);\n\t\t\t\tnode.originalProperties = node.properties;\n\t\t\t\tnode.properties = { ...properties, ...node.properties };\n\t\t\t}\n\t\t\tif (isWNode(node) && !isWidgetBaseConstructor(node.widgetConstructor)) {\n\t\t\t\tif (typeof node.widgetConstructor === 'function') {\n\t\t\t\t\tlet id = lazyWidgetIdMap.get(node.widgetConstructor);\n\t\t\t\t\tif (!id) {\n\t\t\t\t\t\tid = `__lazy_widget_${lazyWidgetId++}`;\n\t\t\t\t\t\tlazyWidgetIdMap.set(node.widgetConstructor, id);\n\t\t\t\t\t\tthis.registry.define(id, node.widgetConstructor);\n\t\t\t\t\t}\n\t\t\t\t\tnode.widgetConstructor = id;\n\t\t\t\t} else if (isLazyDefine(node.widgetConstructor)) {\n\t\t\t\t\tconst { label, registryItem } = node.widgetConstructor;\n\t\t\t\t\tif (!this.registry.has(label)) {\n\t\t\t\t\t\tthis.registry.define(label, registryItem);\n\t\t\t\t\t}\n\t\t\t\t\tnode.widgetConstructor = label;\n\t\t\t\t}\n\n\t\t\t\tnode.widgetConstructor =\n\t\t\t\t\tthis.registry.get<WidgetBase>(node.widgetConstructor) || node.widgetConstructor;\n\t\t\t}\n\t\t\tif (!node.bind) {\n\t\t\t\tnode.bind = this;\n\t\t\t}\n\t\t\tconvertedNodes.push(node);\n\t\t\tif (node.children && node.children.length) {\n\t\t\t\tnode.children = this._filterAndConvert(node.children);\n\t\t\t}\n\t\t}\n\t\treturn isArray ? convertedNodes : convertedNodes[0];\n\t}\n\n\tpublic __render__(): (WNode | VNode) | (WNode | VNode)[] {\n\t\tconst instanceData = widgetInstanceMap.get(this);\n\t\tif (instanceData) {\n\t\t\tinstanceData.dirty = false;\n\t\t}\n\t\tconst render = this._runBeforeRenders();\n\t\tconst dNode = this._filterAndConvert(this._runAfterRenders(render()));\n\t\tthis._nodeHandler.clear();\n\t\treturn dNode;\n\t}\n\n\tpublic invalidate(): void {\n\t\tconst instanceData = widgetInstanceMap.get(this);\n\t\tif (instanceData && instanceData.invalidate) {\n\t\t\tinstanceData.invalidate();\n\t\t}\n\t}\n\n\tprotected render(): DNode | DNode[] {\n\t\treturn v('div', {}, this.children);\n\t}\n\n\t/**\n\t * Function to add decorators to WidgetBase\n\t *\n\t * @param decoratorKey The key of the decorator\n\t * @param value The value of the decorator\n\t */\n\tprotected addDecorator(decoratorKey: string, value: any): void {\n\t\tvalue = Array.isArray(value) ? value : [value];\n\t\tif (this.hasOwnProperty('constructor')) {\n\t\t\tlet decoratorList = decoratorMap.get(this.constructor);\n\t\t\tif (!decoratorList) {\n\t\t\t\tdecoratorList = new Map<string, any[]>();\n\t\t\t\tdecoratorMap.set(this.constructor, decoratorList);\n\t\t\t}\n\n\t\t\tlet specificDecoratorList = decoratorList.get(decoratorKey);\n\t\t\tif (!specificDecoratorList) {\n\t\t\t\tspecificDecoratorList = [];\n\t\t\t\tdecoratorList.set(decoratorKey, specificDecoratorList);\n\t\t\t}\n\t\t\tspecificDecoratorList.push(...value);\n\t\t} else {\n\t\t\tconst decorators = this.getDecorator(decoratorKey);\n\t\t\tthis._decoratorCache.set(decoratorKey, [...decorators, ...value]);\n\t\t}\n\t}\n\n\t/**\n\t * Function to build the list of decorators from the global decorator map.\n\t *\n\t * @param decoratorKey  The key of the decorator\n\t * @return An array of decorator values\n\t * @private\n\t */\n\tprivate _buildDecoratorList(decoratorKey: string): any[] {\n\t\tconst allDecorators = [];\n\n\t\tlet constructor = this.constructor;\n\n\t\twhile (constructor) {\n\t\t\tconst instanceMap = decoratorMap.get(constructor);\n\t\t\tif (instanceMap) {\n\t\t\t\tconst decorators = instanceMap.get(decoratorKey);\n\n\t\t\t\tif (decorators) {\n\t\t\t\t\tallDecorators.unshift(...decorators);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconstructor = Object.getPrototypeOf(constructor);\n\t\t}\n\n\t\tconst buildDecorators = builtDecoratorMap.get(this.constructor) || new Map();\n\t\tbuildDecorators.set(decoratorKey, allDecorators);\n\t\tbuiltDecoratorMap.set(this.constructor, buildDecorators);\n\t\treturn allDecorators;\n\t}\n\n\t/**\n\t * Function to retrieve decorator values\n\t *\n\t * @param decoratorKey The key of the decorator\n\t * @returns An array of decorator values\n\t */\n\tprotected getDecorator(decoratorKey: string): any[] {\n\t\tlet decoratorCache = builtDecoratorMap.get(this.constructor);\n\t\tlet allDecorators =\n\t\t\tthis._decoratorCache.get(decoratorKey) || (decoratorCache && decoratorCache.get(decoratorKey));\n\n\t\tif (allDecorators !== undefined) {\n\t\t\treturn allDecorators;\n\t\t}\n\n\t\tallDecorators = this._buildDecoratorList(decoratorKey);\n\n\t\tallDecorators = [...allDecorators];\n\t\tthis._decoratorCache.set(decoratorKey, allDecorators);\n\t\treturn allDecorators;\n\t}\n\n\t/**\n\t * Binds unbound property functions to the specified `bind` property\n\t *\n\t * @param properties properties to check for functions\n\t */\n\tprivate _bindFunctionProperty(property: any, bind: any): any {\n\t\tif (typeof property === 'function' && !property[noBind] && isWidgetBaseConstructor(property) === false) {\n\t\t\tif (this._bindFunctionPropertyMap === undefined) {\n\t\t\t\tthis._bindFunctionPropertyMap = new WeakMap<\n\t\t\t\t\t(...args: any[]) => any,\n\t\t\t\t\t{ boundFunc: (...args: any[]) => any; scope: any }\n\t\t\t\t>();\n\t\t\t}\n\t\t\tconst bindInfo: Partial<BoundFunctionData> = this._bindFunctionPropertyMap.get(property) || {};\n\t\t\tlet { boundFunc, scope } = bindInfo;\n\n\t\t\tif (boundFunc === undefined || scope !== bind) {\n\t\t\t\tboundFunc = property.bind(bind) as (...args: any[]) => any;\n\t\t\t\tthis._bindFunctionPropertyMap.set(property, { boundFunc, scope: bind });\n\t\t\t}\n\t\t\treturn boundFunc;\n\t\t}\n\t\treturn property;\n\t}\n\n\tpublic get registry(): RegistryHandler {\n\t\tif (this._registry === undefined) {\n\t\t\tthis._registry = new RegistryHandler();\n\t\t\tthis.own(this._registry);\n\t\t\tthis.own(this._registry.on('invalidate', this._boundInvalidate));\n\t\t}\n\t\treturn this._registry;\n\t}\n\n\tprivate _runBeforeProperties(properties: any) {\n\t\tconst beforeProperties: BeforeProperties[] = this.getDecorator('beforeProperties');\n\t\tif (beforeProperties.length > 0) {\n\t\t\treturn beforeProperties.reduce(\n\t\t\t\t(properties, beforePropertiesFunction) => {\n\t\t\t\t\treturn { ...properties, ...beforePropertiesFunction.call(this, properties) };\n\t\t\t\t},\n\t\t\t\t{ ...properties }\n\t\t\t);\n\t\t}\n\t\treturn properties;\n\t}\n\n\t/**\n\t * Run all registered before renders and return the updated render method\n\t */\n\tprivate _runBeforeRenders(): Render {\n\t\tconst beforeRenders = this.getDecorator('beforeRender');\n\n\t\tif (beforeRenders.length > 0) {\n\t\t\treturn beforeRenders.reduce((render: Render, beforeRenderFunction: BeforeRender) => {\n\t\t\t\tconst updatedRender = beforeRenderFunction.call(this, render, this._properties, this._children);\n\t\t\t\tif (!updatedRender) {\n\t\t\t\t\tconsole.warn('Render function not returned from beforeRender, using previous render');\n\t\t\t\t\treturn render;\n\t\t\t\t}\n\t\t\t\treturn updatedRender;\n\t\t\t}, this._boundRenderFunc);\n\t\t}\n\t\treturn this._boundRenderFunc;\n\t}\n\n\t/**\n\t * Run all registered after renders and return the decorated DNodes\n\t *\n\t * @param dNode The DNodes to run through the after renders\n\t */\n\tprivate _runAfterRenders(dNode: DNode | DNode[]): DNode | DNode[] {\n\t\tconst afterRenders = this.getDecorator('afterRender');\n\n\t\tif (afterRenders.length > 0) {\n\t\t\tdNode = afterRenders.reduce((dNode: DNode | DNode[], afterRenderFunction: AfterRender) => {\n\t\t\t\treturn afterRenderFunction.call(this, dNode);\n\t\t\t}, dNode);\n\t\t}\n\n\t\tif (this._metaMap !== undefined) {\n\t\t\tthis._metaMap.forEach((meta) => {\n\t\t\t\tisDomMeta(meta) && meta.afterRender();\n\t\t\t});\n\t\t}\n\n\t\treturn dNode;\n\t}\n\n\tprivate _runAfterConstructors(): void {\n\t\tconst afterConstructors = this.getDecorator('afterConstructor');\n\n\t\tif (afterConstructors.length > 0) {\n\t\t\tafterConstructors.forEach((afterConstructor) => afterConstructor.call(this));\n\t\t}\n\t}\n\n\tprotected own(handle: Handle): void {\n\t\tthis._handles.push(handle);\n\t}\n\n\tprotected destroy() {\n\t\twhile (this._handles.length > 0) {\n\t\t\tconst handle = this._handles.pop();\n\t\t\tif (handle) {\n\t\t\t\thandle.destroy();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default WidgetBase;\n","import {\n\tConstructor,\n\tDefaultWidgetBaseInterface,\n\tDeferredVirtualProperties,\n\tDNode,\n\tVNode,\n\tRegistryLabel,\n\tVNodeProperties,\n\tWidgetBaseInterface,\n\tWNode,\n\tDomOptions,\n\tRenderResult,\n\tDomVNode,\n\tLazyWidget,\n\tLazyDefine\n} from './interfaces';\n\n/**\n * The identifier for a WNode type\n */\nexport const WNODE = '__WNODE_TYPE';\n\n/**\n * The identifier for a VNode type\n */\nexport const VNODE = '__VNODE_TYPE';\n\n/**\n * The identifier for a VNode type created using dom()\n */\nexport const DOMVNODE = '__DOMVNODE_TYPE';\n\n/**\n * Helper function that returns true if the `DNode` is a `WNode` using the `type` property\n */\nexport function isWNode<W extends WidgetBaseInterface = DefaultWidgetBaseInterface>(\n\tchild: DNode<W> | any\n): child is WNode<W> {\n\treturn Boolean(child && child !== true && typeof child !== 'string' && child.type === WNODE);\n}\n\n/**\n * Helper function that returns true if the `DNode` is a `VNode` using the `type` property\n */\nexport function isVNode(child: DNode): child is VNode {\n\treturn Boolean(\n\t\tchild && child !== true && typeof child !== 'string' && (child.type === VNODE || child.type === DOMVNODE)\n\t);\n}\n\n/**\n * Helper function that returns true if the `DNode` is a `VNode` created with `dom()` using the `type` property\n */\nexport function isDomVNode(child: DNode): child is DomVNode {\n\treturn Boolean(child && child !== true && typeof child !== 'string' && child.type === DOMVNODE);\n}\n\nexport function isElementNode(value: any): value is Element {\n\treturn !!value.tagName;\n}\n\n/**\n * Interface for the decorate modifier\n */\nexport interface Modifier<T extends DNode> {\n\t(dNode: T, breaker: () => void): void;\n}\n\n/**\n * The predicate function for decorate\n */\nexport interface Predicate<T extends DNode> {\n\t(dNode: DNode): dNode is T;\n}\n\n/**\n * Decorator options\n */\nexport interface DecorateOptions<T extends DNode> {\n\tmodifier: Modifier<T>;\n\tpredicate?: Predicate<T>;\n\tshallow?: boolean;\n}\n\n/**\n * Generic decorate function for DNodes. The nodes are modified in place based on the provided predicate\n * and modifier functions.\n *\n * The children of each node are flattened and added to the array for decoration.\n *\n * If no predicate is supplied then the modifier will be executed on all nodes. A `breaker` function is passed to the\n * modifier which will drain the nodes array and exit the decoration.\n *\n * When the `shallow` options is set to `true` the only the top node or nodes will be decorated (only supported using\n * `DecorateOptions`).\n */\nexport function decorate<T extends DNode>(dNodes: DNode, options: DecorateOptions<T>): DNode;\nexport function decorate<T extends DNode>(dNodes: DNode[], options: DecorateOptions<T>): DNode[];\nexport function decorate<T extends DNode>(dNodes: DNode | DNode[], options: DecorateOptions<T>): DNode | DNode[];\nexport function decorate<T extends DNode>(dNodes: DNode, modifier: Modifier<T>, predicate: Predicate<T>): DNode;\nexport function decorate<T extends DNode>(dNodes: DNode[], modifier: Modifier<T>, predicate: Predicate<T>): DNode[];\nexport function decorate<T extends DNode>(\n\tdNodes: RenderResult,\n\tmodifier: Modifier<T>,\n\tpredicate: Predicate<T>\n): RenderResult;\nexport function decorate(dNodes: DNode, modifier: Modifier<DNode>): DNode;\nexport function decorate(dNodes: DNode[], modifier: Modifier<DNode>): DNode[];\nexport function decorate(dNodes: RenderResult, modifier: Modifier<DNode>): RenderResult;\nexport function decorate(\n\tdNodes: DNode | DNode[],\n\toptionsOrModifier: Modifier<DNode> | DecorateOptions<DNode>,\n\tpredicate?: Predicate<DNode>\n): DNode | DNode[] {\n\tlet shallow = false;\n\tlet modifier;\n\tif (typeof optionsOrModifier === 'function') {\n\t\tmodifier = optionsOrModifier;\n\t} else {\n\t\tmodifier = optionsOrModifier.modifier;\n\t\tpredicate = optionsOrModifier.predicate;\n\t\tshallow = optionsOrModifier.shallow || false;\n\t}\n\n\tlet nodes = Array.isArray(dNodes) ? [...dNodes] : [dNodes];\n\tfunction breaker() {\n\t\tnodes = [];\n\t}\n\twhile (nodes.length) {\n\t\tconst node = nodes.shift();\n\t\tif (node && node !== true) {\n\t\t\tif (!shallow && (isWNode(node) || isVNode(node)) && node.children) {\n\t\t\t\tnodes = [...nodes, ...node.children];\n\t\t\t}\n\t\t\tif (!predicate || predicate(node)) {\n\t\t\t\tmodifier(node, breaker);\n\t\t\t}\n\t\t}\n\t}\n\treturn dNodes;\n}\n\n/**\n * Wrapper function for calls to create a widget.\n */\nexport function w<W extends WidgetBaseInterface>(\n\tnode: WNode<W>,\n\tproperties: Partial<W['properties']>,\n\tchildren?: W['children']\n): WNode<W>;\nexport function w<W extends WidgetBaseInterface>(\n\twidgetConstructor: Constructor<W> | RegistryLabel | LazyWidget<W> | LazyDefine<W>,\n\tproperties: W['properties'],\n\tchildren?: W['children']\n): WNode<W>;\nexport function w<W extends WidgetBaseInterface>(\n\twidgetConstructorOrNode: Constructor<W> | RegistryLabel | WNode<W> | LazyWidget<W> | LazyDefine<W>,\n\tproperties: W['properties'],\n\tchildren?: W['children']\n): WNode<W> {\n\tif (isWNode(widgetConstructorOrNode)) {\n\t\tproperties = { ...(widgetConstructorOrNode.properties as any), ...(properties as any) };\n\t\tchildren = children ? children : widgetConstructorOrNode.children;\n\t\twidgetConstructorOrNode = widgetConstructorOrNode.widgetConstructor;\n\t}\n\n\treturn {\n\t\tchildren: children || [],\n\t\twidgetConstructor: widgetConstructorOrNode,\n\t\tproperties,\n\t\ttype: WNODE\n\t};\n}\n\n/**\n * Wrapper function for calls to create VNodes.\n */\nexport function v(node: VNode, properties: VNodeProperties, children: undefined | DNode[]): VNode;\nexport function v(node: VNode, properties: VNodeProperties): VNode;\nexport function v(tag: string, children: undefined | DNode[]): VNode;\nexport function v(tag: string, properties: DeferredVirtualProperties | VNodeProperties, children?: DNode[]): VNode;\nexport function v(tag: string): VNode;\nexport function v(\n\ttag: string | VNode,\n\tpropertiesOrChildren: VNodeProperties | DeferredVirtualProperties | DNode[] = {},\n\tchildren: undefined | DNode[] = undefined\n): VNode {\n\tlet properties: VNodeProperties | DeferredVirtualProperties = propertiesOrChildren;\n\tlet deferredPropertiesCallback;\n\n\tif (Array.isArray(propertiesOrChildren)) {\n\t\tchildren = propertiesOrChildren;\n\t\tproperties = {};\n\t}\n\n\tif (typeof properties === 'function') {\n\t\tdeferredPropertiesCallback = properties;\n\t\tproperties = {};\n\t}\n\n\tif (isVNode(tag)) {\n\t\tlet { classes = [], styles = {}, ...newProperties } = properties;\n\t\tlet { classes: nodeClasses = [], styles: nodeStyles = {}, ...nodeProperties } = tag.properties;\n\t\tnodeClasses = Array.isArray(nodeClasses) ? nodeClasses : [nodeClasses];\n\t\tclasses = Array.isArray(classes) ? classes : [classes];\n\t\tstyles = { ...nodeStyles, ...styles };\n\t\tproperties = { ...nodeProperties, ...newProperties, classes: [...nodeClasses, ...classes], styles };\n\t\tchildren = children ? children : tag.children;\n\t\ttag = tag.tag;\n\t}\n\n\treturn {\n\t\ttag,\n\t\tdeferredPropertiesCallback,\n\t\toriginalProperties: {},\n\t\tchildren,\n\t\tproperties,\n\t\ttype: VNODE\n\t};\n}\n\n/**\n * Create a VNode for an existing DOM Node.\n */\nexport function dom(\n\t{ node, attrs = {}, props = {}, on = {}, diffType = 'none', onAttach }: DomOptions,\n\tchildren?: DNode[]\n): DomVNode {\n\treturn {\n\t\ttag: isElementNode(node) ? node.tagName.toLowerCase() : '',\n\t\tproperties: props,\n\t\tattributes: attrs,\n\t\tevents: on,\n\t\tchildren,\n\t\ttype: DOMVNODE,\n\t\tdomNode: node,\n\t\ttext: isElementNode(node) ? undefined : node.data,\n\t\tdiffType,\n\t\tonAttach\n\t};\n}\n","import { isArrayLike, Iterable, IterableIterator, ShimIterator } from './iterator';\nimport global from './global';\nimport { is as objectIs } from './object';\nimport has from '../has/has';\nimport './Symbol';\n\nexport interface Map<K, V> {\n\t/**\n\t * Deletes all keys and their associated values.\n\t */\n\tclear(): void;\n\n\t/**\n\t * Deletes a given key and its associated value.\n\t *\n\t * @param key The key to delete\n\t * @return true if the key exists, false if it does not\n\t */\n\tdelete(key: K): boolean;\n\n\t/**\n\t * Returns an iterator that yields each key/value pair as an array.\n\t *\n\t * @return An iterator for each key/value pair in the instance.\n\t */\n\tentries(): IterableIterator<[K, V]>;\n\n\t/**\n\t * Executes a given function for each map entry. The function\n\t * is invoked with three arguments: the element value, the\n\t * element key, and the associated Map instance.\n\t *\n\t * @param callbackfn The function to execute for each map entry,\n\t * @param thisArg The value to use for `this` for each execution of the calback\n\t */\n\tforEach(callbackfn: (value: V, key: K, map: Map<K, V>) => void, thisArg?: any): void;\n\n\t/**\n\t * Returns the value associated with a given key.\n\t *\n\t * @param key The key to look up\n\t * @return The value if one exists or undefined\n\t */\n\tget(key: K): V | undefined;\n\n\t/**\n\t * Returns an iterator that yields each key in the map.\n\t *\n\t * @return An iterator containing the instance's keys.\n\t */\n\tkeys(): IterableIterator<K>;\n\n\t/**\n\t * Checks for the presence of a given key.\n\t *\n\t * @param key The key to check for\n\t * @return true if the key exists, false if it does not\n\t */\n\thas(key: K): boolean;\n\n\t/**\n\t * Sets the value associated with a given key.\n\t *\n\t * @param key The key to define a value to\n\t * @param value The value to assign\n\t * @return The Map instance\n\t */\n\tset(key: K, value: V): this;\n\n\t/**\n\t * Returns the number of key / value pairs in the Map.\n\t */\n\treadonly size: number;\n\n\t/**\n\t * Returns an iterator that yields each value in the map.\n\t *\n\t * @return An iterator containing the instance's values.\n\t */\n\tvalues(): IterableIterator<V>;\n\n\t/** Returns an iterable of entries in the map. */\n\t[Symbol.iterator](): IterableIterator<[K, V]>;\n\n\treadonly [Symbol.toStringTag]: string;\n}\n\nexport interface MapConstructor {\n\t/**\n\t * Creates a new Map\n\t *\n\t * @constructor\n\t */\n\tnew (): Map<any, any>;\n\n\t/**\n\t * Creates a new Map\n\t *\n\t * @constructor\n\t *\n\t * @param iterator\n\t * Array or iterator containing two-item tuples used to initially populate the map.\n\t * The first item in each tuple corresponds to the key of the map entry.\n\t * The second item corresponds to the value of the map entry.\n\t */\n\tnew <K, V>(iterator?: [K, V][]): Map<K, V>;\n\n\t/**\n\t * Creates a new Map\n\t *\n\t * @constructor\n\t *\n\t * @param iterator\n\t * Array or iterator containing two-item tuples used to initially populate the map.\n\t * The first item in each tuple corresponds to the key of the map entry.\n\t * The second item corresponds to the value of the map entry.\n\t */\n\tnew <K, V>(iterator: Iterable<[K, V]>): Map<K, V>;\n\n\treadonly prototype: Map<any, any>;\n\n\treadonly [Symbol.species]: MapConstructor;\n}\n\nexport let Map: MapConstructor = global.Map;\n\nif (!has('es6-map')) {\n\tMap = class Map<K, V> {\n\t\tprotected readonly _keys: K[] = [];\n\t\tprotected readonly _values: V[] = [];\n\n\t\t/**\n\t\t * An alternative to Array.prototype.indexOf using Object.is\n\t\t * to check for equality. See http://mzl.la/1zuKO2V\n\t\t */\n\t\tprotected _indexOfKey(keys: K[], key: K): number {\n\t\t\tfor (let i = 0, length = keys.length; i < length; i++) {\n\t\t\t\tif (objectIs(keys[i], key)) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t}\n\n\t\tstatic [Symbol.species] = Map;\n\n\t\tconstructor(iterable?: ArrayLike<[K, V]> | Iterable<[K, V]>) {\n\t\t\tif (iterable) {\n\t\t\t\tif (isArrayLike(iterable)) {\n\t\t\t\t\tfor (let i = 0; i < iterable.length; i++) {\n\t\t\t\t\t\tconst value = iterable[i];\n\t\t\t\t\t\tthis.set(value[0], value[1]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (const value of iterable) {\n\t\t\t\t\t\tthis.set(value[0], value[1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tget size(): number {\n\t\t\treturn this._keys.length;\n\t\t}\n\n\t\tclear(): void {\n\t\t\tthis._keys.length = this._values.length = 0;\n\t\t}\n\n\t\tdelete(key: K): boolean {\n\t\t\tconst index = this._indexOfKey(this._keys, key);\n\t\t\tif (index < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._keys.splice(index, 1);\n\t\t\tthis._values.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\n\t\tentries(): IterableIterator<[K, V]> {\n\t\t\tconst values = this._keys.map(\n\t\t\t\t(key: K, i: number): [K, V] => {\n\t\t\t\t\treturn [key, this._values[i]];\n\t\t\t\t}\n\t\t\t);\n\n\t\t\treturn new ShimIterator(values);\n\t\t}\n\n\t\tforEach(callback: (value: V, key: K, mapInstance: Map<K, V>) => any, context?: {}) {\n\t\t\tconst keys = this._keys;\n\t\t\tconst values = this._values;\n\t\t\tfor (let i = 0, length = keys.length; i < length; i++) {\n\t\t\t\tcallback.call(context, values[i], keys[i], this);\n\t\t\t}\n\t\t}\n\n\t\tget(key: K): V | undefined {\n\t\t\tconst index = this._indexOfKey(this._keys, key);\n\t\t\treturn index < 0 ? undefined : this._values[index];\n\t\t}\n\n\t\thas(key: K): boolean {\n\t\t\treturn this._indexOfKey(this._keys, key) > -1;\n\t\t}\n\n\t\tkeys(): IterableIterator<K> {\n\t\t\treturn new ShimIterator(this._keys);\n\t\t}\n\n\t\tset(key: K, value: V): Map<K, V> {\n\t\t\tlet index = this._indexOfKey(this._keys, key);\n\t\t\tindex = index < 0 ? this._keys.length : index;\n\t\t\tthis._keys[index] = key;\n\t\t\tthis._values[index] = value;\n\t\t\treturn this;\n\t\t}\n\n\t\tvalues(): IterableIterator<V> {\n\t\t\treturn new ShimIterator(this._values);\n\t\t}\n\n\t\t[Symbol.iterator](): IterableIterator<[K, V]> {\n\t\t\treturn this.entries();\n\t\t}\n\n\t\t[Symbol.toStringTag]: 'Map' = 'Map';\n\t};\n}\n\nexport default Map;\n","import { Constructor, WidgetProperties, SupportedClassName } from './../interfaces';\nimport { Registry } from './../Registry';\nimport { Injector } from './../Injector';\nimport { inject } from './../decorators/inject';\nimport { WidgetBase } from './../WidgetBase';\nimport { handleDecorator } from './../decorators/handleDecorator';\nimport { diffProperty } from './../decorators/diffProperty';\nimport { shallow } from './../diff';\n\n/**\n * A lookup object for available class names\n */\nexport type ClassNames = {\n\t[key: string]: string;\n};\n\n/**\n * A lookup object for available widget classes names\n */\nexport interface Theme {\n\t[key: string]: object;\n}\n\n/**\n * Classes property interface\n */\nexport interface Classes {\n\t[widgetKey: string]: {\n\t\t[classKey: string]: SupportedClassName[];\n\t};\n}\n\n/**\n * Properties required for the Themed mixin\n */\nexport interface ThemedProperties<T = ClassNames> extends WidgetProperties {\n\ttheme?: Theme;\n\tclasses?: Classes;\n\textraClasses?: { [P in keyof T]?: string };\n}\n\nconst THEME_KEY = ' _key';\n\nexport const INJECTED_THEME_KEY = '__theme_injector';\n\n/**\n * Interface for the ThemedMixin\n */\nexport interface ThemedMixin<T = ClassNames> {\n\ttheme(classes: SupportedClassName): SupportedClassName;\n\ttheme(classes: SupportedClassName[]): SupportedClassName[];\n\tproperties: ThemedProperties<T>;\n}\n\n/**\n * Decorator for base css classes\n */\nexport function theme(theme: {}) {\n\treturn handleDecorator((target) => {\n\t\ttarget.addDecorator('baseThemeClasses', theme);\n\t});\n}\n\n/**\n * Creates a reverse lookup for the classes passed in via the `theme` function.\n *\n * @param classes The baseClasses object\n * @requires\n */\nfunction createThemeClassesLookup(classes: ClassNames[]): ClassNames {\n\treturn classes.reduce(\n\t\t(currentClassNames, baseClass) => {\n\t\t\tObject.keys(baseClass).forEach((key: string) => {\n\t\t\t\tcurrentClassNames[baseClass[key]] = key;\n\t\t\t});\n\t\t\treturn currentClassNames;\n\t\t},\n\t\t<ClassNames>{}\n\t);\n}\n\n/**\n * Convenience function that is given a theme and an optional registry, the theme\n * injector is defined against the registry, returning the theme.\n *\n * @param theme the theme to set\n * @param themeRegistry registry to define the theme injector against. Defaults\n * to the global registry\n *\n * @returns the theme injector used to set the theme\n */\nexport function registerThemeInjector(theme: any, themeRegistry: Registry): Injector {\n\tconst themeInjector = new Injector(theme);\n\tthemeRegistry.defineInjector(INJECTED_THEME_KEY, (invalidator) => {\n\t\tthemeInjector.setInvalidator(invalidator);\n\t\treturn () => themeInjector.get();\n\t});\n\treturn themeInjector;\n}\n\n/**\n * Function that returns a class decorated with with Themed functionality\n */\n\nexport function ThemedMixin<E, T extends Constructor<WidgetBase<ThemedProperties<E>>>>(\n\tBase: T\n): Constructor<ThemedMixin<E>> & T {\n\t@inject({\n\t\tname: INJECTED_THEME_KEY,\n\t\tgetProperties: (theme: Theme, properties: ThemedProperties): ThemedProperties => {\n\t\t\tif (!properties.theme) {\n\t\t\t\treturn { theme };\n\t\t\t}\n\t\t\treturn {};\n\t\t}\n\t})\n\tabstract class Themed extends Base {\n\t\tpublic abstract properties: ThemedProperties<E>;\n\n\t\t/**\n\t\t * The Themed baseClasses\n\t\t */\n\t\tprivate _registeredBaseTheme: ClassNames | undefined;\n\n\t\t/**\n\t\t * Registered base theme keys\n\t\t */\n\t\tprivate _registeredBaseThemeKeys: string[] = [];\n\n\t\t/**\n\t\t * Reverse lookup of the theme classes\n\t\t */\n\t\tprivate _baseThemeClassesReverseLookup: ClassNames | undefined;\n\n\t\t/**\n\t\t * Indicates if classes meta data need to be calculated.\n\t\t */\n\t\tprivate _recalculateClasses = true;\n\n\t\t/**\n\t\t * Extra classes map\n\t\t */\n\t\tprivate _classes: Classes;\n\n\t\t/**\n\t\t * Loaded theme\n\t\t */\n\t\tprivate _theme: ClassNames = {};\n\n\t\tpublic theme(classes: SupportedClassName): SupportedClassName;\n\t\tpublic theme(classes: SupportedClassName[]): SupportedClassName[];\n\t\tpublic theme(classes: SupportedClassName | SupportedClassName[]): SupportedClassName | SupportedClassName[] {\n\t\t\tif (this._recalculateClasses) {\n\t\t\t\tthis._recalculateThemeClasses();\n\t\t\t}\n\t\t\tif (Array.isArray(classes)) {\n\t\t\t\treturn classes.map((className) => this._getThemeClass(className));\n\t\t\t}\n\t\t\treturn this._getThemeClass(classes);\n\t\t}\n\n\t\t/**\n\t\t * Function fired when `theme` or `extraClasses` are changed.\n\t\t */\n\t\t@diffProperty('theme', shallow)\n\t\t@diffProperty('extraClasses', shallow)\n\t\t@diffProperty('classes', shallow)\n\t\tprotected onPropertiesChanged() {\n\t\t\tthis._recalculateClasses = true;\n\t\t}\n\n\t\tprivate _getThemeClass(className: SupportedClassName): SupportedClassName {\n\t\t\tif (className === undefined || className === null || className === false || className === true) {\n\t\t\t\treturn className;\n\t\t\t}\n\n\t\t\tconst extraClasses = this.properties.extraClasses || ({} as any);\n\t\t\tconst themeClassName = this._baseThemeClassesReverseLookup![className];\n\t\t\tlet resultClassNames: string[] = [];\n\t\t\tif (!themeClassName) {\n\t\t\t\tconsole.warn(`Class name: '${className}' not found in theme`);\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (this._classes) {\n\t\t\t\tconst classes = Object.keys(this._classes).reduce(\n\t\t\t\t\t(classes, key) => {\n\t\t\t\t\t\tconst classNames = Object.keys(this._classes[key]);\n\t\t\t\t\t\tfor (let i = 0; i < classNames.length; i++) {\n\t\t\t\t\t\t\tconst extraClass = this._classes[key][classNames[i]];\n\t\t\t\t\t\t\tif (classNames[i] === themeClassName && extraClass) {\n\t\t\t\t\t\t\t\textraClass.forEach((className) => {\n\t\t\t\t\t\t\t\t\tif (className && className !== true) {\n\t\t\t\t\t\t\t\t\t\tclasses.push(className);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn classes;\n\t\t\t\t\t},\n\t\t\t\t\t[] as string[]\n\t\t\t\t);\n\n\t\t\t\tresultClassNames.push(...classes);\n\t\t\t}\n\n\t\t\tif (extraClasses[themeClassName]) {\n\t\t\t\tresultClassNames.push(extraClasses[themeClassName]);\n\t\t\t}\n\n\t\t\tif (this._theme[themeClassName]) {\n\t\t\t\tresultClassNames.push(this._theme[themeClassName]);\n\t\t\t} else {\n\t\t\t\tresultClassNames.push(this._registeredBaseTheme![themeClassName]);\n\t\t\t}\n\t\t\treturn resultClassNames.join(' ');\n\t\t}\n\n\t\tprivate _recalculateThemeClasses() {\n\t\t\tconst { theme = {}, classes = {} } = this.properties;\n\t\t\tif (!this._registeredBaseTheme) {\n\t\t\t\tconst baseThemes = this.getDecorator('baseThemeClasses');\n\t\t\t\tif (baseThemes.length === 0) {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t'A base theme has not been provided to this widget. Please use the @theme decorator to add a theme.'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis._registeredBaseTheme = baseThemes.reduce((finalBaseTheme, baseTheme) => {\n\t\t\t\t\tconst { [THEME_KEY]: key, ...classes } = baseTheme;\n\t\t\t\t\tthis._registeredBaseThemeKeys.push(key);\n\t\t\t\t\treturn { ...finalBaseTheme, ...classes };\n\t\t\t\t}, {});\n\t\t\t\tthis._baseThemeClassesReverseLookup = createThemeClassesLookup(baseThemes);\n\t\t\t}\n\n\t\t\tthis._theme = this._registeredBaseThemeKeys.reduce((baseTheme, themeKey) => {\n\t\t\t\treturn { ...baseTheme, ...theme[themeKey] };\n\t\t\t}, {});\n\n\t\t\tthis._classes = Object.keys(classes).reduce((computed, key) => {\n\t\t\t\tif (this._registeredBaseThemeKeys.indexOf(key) > -1) {\n\t\t\t\t\tcomputed = { ...computed, [key]: classes[key] };\n\t\t\t\t}\n\t\t\t\treturn computed;\n\t\t\t}, {});\n\n\t\t\tthis._recalculateClasses = false;\n\t\t}\n\t}\n\n\treturn Themed;\n}\n\nexport default ThemedMixin;\n","import { v, w } from './d';\nimport { Constructor, DNode } from './interfaces';\nimport { WNode, VNodeProperties } from './interfaces';\n\ndeclare global {\n\tnamespace JSX {\n\t\ttype Element = WNode;\n\t\tinterface ElementAttributesProperty {\n\t\t\tproperties: {};\n\t\t}\n\t\tinterface IntrinsicElements {\n\t\t\t[key: string]: VNodeProperties;\n\t\t}\n\t}\n}\n\nexport const REGISTRY_ITEM = '__registry_item';\n\nexport class FromRegistry<P> {\n\tstatic type = REGISTRY_ITEM;\n\tproperties: P = {} as P;\n\tname: string | undefined;\n}\n\nexport function fromRegistry<P>(tag: string): Constructor<FromRegistry<P>> {\n\treturn class extends FromRegistry<P> {\n\t\tproperties: P = {} as P;\n\t\tstatic type = REGISTRY_ITEM;\n\t\tname = tag;\n\t};\n}\n\nfunction spreadChildren(children: any[], child: any): any[] {\n\tif (Array.isArray(child)) {\n\t\treturn child.reduce(spreadChildren, children);\n\t} else {\n\t\treturn [...children, child];\n\t}\n}\n\nexport function tsx(tag: any, properties = {}, ...children: any[]): DNode {\n\tchildren = children.reduce(spreadChildren, []);\n\tproperties = properties === null ? {} : properties;\n\tif (typeof tag === 'string') {\n\t\treturn v(tag, properties, children);\n\t} else if (tag.type === 'registry' && (properties as any).__autoRegistryItem) {\n\t\tconst name = (properties as any).__autoRegistryItem;\n\t\tdelete (properties as any).__autoRegistryItem;\n\t\treturn w(name, properties, children);\n\t} else if (tag.type === REGISTRY_ITEM) {\n\t\tconst registryItem = new tag();\n\t\treturn w(registryItem.name, properties, children);\n\t} else {\n\t\treturn w(tag, properties, children);\n\t}\n}\n","import Promise from '../shim/Promise';\nimport Map from '../shim/Map';\nimport { Evented, EventObject } from '../core/Evented';\nimport {\n\tConstructor,\n\tInjectorFactory,\n\tInjectorItem,\n\tRegistryLabel,\n\tWidgetBaseConstructor,\n\tWidgetBaseInterface,\n\tESMDefaultWidgetBase,\n\tWidgetBaseConstructorFunction,\n\tESMDefaultWidgetBaseFunction\n} from './interfaces';\n\nexport type RegistryItem =\n\t| WidgetBaseConstructor\n\t| Promise<WidgetBaseConstructor>\n\t| WidgetBaseConstructorFunction\n\t| ESMDefaultWidgetBaseFunction;\n\n/**\n * Widget base type\n */\nexport const WIDGET_BASE_TYPE = '__widget_base_type';\n\nexport interface RegistryEventObject extends EventObject<RegistryLabel> {\n\taction: string;\n\titem: WidgetBaseConstructor | InjectorItem;\n}\n/**\n * Widget Registry Interface\n */\nexport interface RegistryInterface {\n\t/**\n\t * Define a WidgetRegistryItem against a label\n\t *\n\t * @param label The label of the widget to register\n\t * @param registryItem The registry item to define\n\t */\n\tdefine(label: RegistryLabel, registryItem: RegistryItem): void;\n\n\t/**\n\t * Return a RegistryItem for the given label, null if an entry doesn't exist\n\t *\n\t * @param widgetLabel The label of the widget to return\n\t * @returns The RegistryItem for the widgetLabel, `null` if no entry exists\n\t */\n\tget<T extends WidgetBaseInterface = WidgetBaseInterface>(label: RegistryLabel): Constructor<T> | null;\n\n\t/**\n\t * Returns a boolean if an entry for the label exists\n\t *\n\t * @param widgetLabel The label to search for\n\t * @returns boolean indicating if a widget registry item exists\n\t */\n\thas(label: RegistryLabel): boolean;\n\n\t/**\n\t * Define an Injector against a label\n\t *\n\t * @param label The label of the injector to register\n\t * @param registryItem The injector factory\n\t */\n\tdefineInjector(label: RegistryLabel, injectorFactory: InjectorFactory): void;\n\n\t/**\n\t * Return an Injector registry item for the given label, null if an entry doesn't exist\n\t *\n\t * @param label The label of the injector to return\n\t * @returns The RegistryItem for the widgetLabel, `null` if no entry exists\n\t */\n\tgetInjector<T>(label: RegistryLabel): InjectorItem<T> | null;\n\n\t/**\n\t * Returns a boolean if an injector for the label exists\n\t *\n\t * @param widgetLabel The label to search for\n\t * @returns boolean indicating if a injector registry item exists\n\t */\n\thasInjector(label: RegistryLabel): boolean;\n}\n\n/**\n * Checks is the item is a subclass of WidgetBase (or a WidgetBase)\n *\n * @param item the item to check\n * @returns true/false indicating if the item is a WidgetBaseConstructor\n */\nexport function isWidgetBaseConstructor<T extends WidgetBaseInterface>(item: any): item is Constructor<T> {\n\treturn Boolean(item && item._type === WIDGET_BASE_TYPE);\n}\n\nexport function isWidgetConstructorDefaultExport<T>(item: any): item is ESMDefaultWidgetBase<T> {\n\treturn Boolean(\n\t\titem &&\n\t\t\titem.hasOwnProperty('__esModule') &&\n\t\t\titem.hasOwnProperty('default') &&\n\t\t\tisWidgetBaseConstructor(item.default)\n\t);\n}\n\n/**\n * The Registry implementation\n */\nexport class Registry extends Evented<{}, RegistryLabel, RegistryEventObject> implements RegistryInterface {\n\t/**\n\t * internal map of labels and RegistryItem\n\t */\n\tprivate _widgetRegistry: Map<RegistryLabel, RegistryItem> | undefined;\n\n\tprivate _injectorRegistry: Map<RegistryLabel, InjectorItem> | undefined;\n\n\t/**\n\t * Emit loaded event for registry label\n\t */\n\tprivate emitLoadedEvent(widgetLabel: RegistryLabel, item: WidgetBaseConstructor | InjectorItem): void {\n\t\tthis.emit({\n\t\t\ttype: widgetLabel,\n\t\t\taction: 'loaded',\n\t\t\titem\n\t\t});\n\t}\n\n\tpublic define(label: RegistryLabel, item: RegistryItem): void {\n\t\tif (this._widgetRegistry === undefined) {\n\t\t\tthis._widgetRegistry = new Map();\n\t\t}\n\n\t\tif (this._widgetRegistry.has(label)) {\n\t\t\tthrow new Error(`widget has already been registered for '${label.toString()}'`);\n\t\t}\n\n\t\tthis._widgetRegistry.set(label, item);\n\n\t\tif (item instanceof Promise) {\n\t\t\titem.then(\n\t\t\t\t(widgetCtor) => {\n\t\t\t\t\tthis._widgetRegistry!.set(label, widgetCtor);\n\t\t\t\t\tthis.emitLoadedEvent(label, widgetCtor);\n\t\t\t\t\treturn widgetCtor;\n\t\t\t\t},\n\t\t\t\t(error) => {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t);\n\t\t} else if (isWidgetBaseConstructor(item)) {\n\t\t\tthis.emitLoadedEvent(label, item);\n\t\t}\n\t}\n\n\tpublic defineInjector(label: RegistryLabel, injectorFactory: InjectorFactory): void {\n\t\tif (this._injectorRegistry === undefined) {\n\t\t\tthis._injectorRegistry = new Map();\n\t\t}\n\n\t\tif (this._injectorRegistry.has(label)) {\n\t\t\tthrow new Error(`injector has already been registered for '${label.toString()}'`);\n\t\t}\n\n\t\tconst invalidator = new Evented();\n\n\t\tconst injectorItem: InjectorItem = {\n\t\t\tinjector: injectorFactory(() => invalidator.emit({ type: 'invalidate' })),\n\t\t\tinvalidator\n\t\t};\n\n\t\tthis._injectorRegistry.set(label, injectorItem);\n\t\tthis.emitLoadedEvent(label, injectorItem);\n\t}\n\n\tpublic get<T extends WidgetBaseInterface = WidgetBaseInterface>(label: RegistryLabel): Constructor<T> | null {\n\t\tif (!this._widgetRegistry || !this.has(label)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst item = this._widgetRegistry.get(label);\n\n\t\tif (isWidgetBaseConstructor<T>(item)) {\n\t\t\treturn item;\n\t\t}\n\n\t\tif (item instanceof Promise) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst promise = (<WidgetBaseConstructorFunction>item)();\n\t\tthis._widgetRegistry.set(label, promise);\n\n\t\tpromise.then(\n\t\t\t(widgetCtor) => {\n\t\t\t\tif (isWidgetConstructorDefaultExport<T>(widgetCtor)) {\n\t\t\t\t\twidgetCtor = widgetCtor.default;\n\t\t\t\t}\n\n\t\t\t\tthis._widgetRegistry!.set(label, widgetCtor);\n\t\t\t\tthis.emitLoadedEvent(label, widgetCtor);\n\t\t\t\treturn widgetCtor;\n\t\t\t},\n\t\t\t(error) => {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t);\n\n\t\treturn null;\n\t}\n\n\tpublic getInjector<T>(label: RegistryLabel): InjectorItem<T> | null {\n\t\tif (!this._injectorRegistry || !this.hasInjector(label)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this._injectorRegistry.get(label)!;\n\t}\n\n\tpublic has(label: RegistryLabel): boolean {\n\t\treturn Boolean(this._widgetRegistry && this._widgetRegistry.has(label));\n\t}\n\n\tpublic hasInjector(label: RegistryLabel): boolean {\n\t\treturn Boolean(this._injectorRegistry && this._injectorRegistry.has(label));\n\t}\n}\n\nexport default Registry;\n","import Map from '../shim/Map';\nimport { Destroyable, Handle } from './Destroyable';\n\n/**\n * Map of computed regular expressions, keyed by string\n */\nconst regexMap = new Map<string, RegExp>();\n\nexport type EventType = string | symbol;\n\n/**\n * The base event object, which provides a `type` property\n */\nexport interface EventObject<T = EventType> {\n\t/**\n\t * The type of the event\n\t */\n\treadonly type: T;\n}\n\n/**\n * Determines if the event type glob has been matched\n *\n * @returns boolean that indicates if the glob is matched\n */\nexport function isGlobMatch(globString: string | symbol, targetString: string | symbol): boolean {\n\tif (typeof targetString === 'string' && typeof globString === 'string' && globString.indexOf('*') !== -1) {\n\t\tlet regex: RegExp;\n\t\tif (regexMap.has(globString)) {\n\t\t\tregex = regexMap.get(globString)!;\n\t\t} else {\n\t\t\tregex = new RegExp(`^${globString.replace(/\\*/g, '.*')}$`);\n\t\t\tregexMap.set(globString, regex);\n\t\t}\n\t\treturn regex.test(targetString);\n\t} else {\n\t\treturn globString === targetString;\n\t}\n}\n\nexport type EventedCallback<T = EventType, E extends EventObject<T> = EventObject<T>> = {\n\t/**\n\t * A callback that takes an `event` argument\n\t *\n\t * @param event The event object\n\t */\n\n\t(event: E): boolean | void;\n};\n\nexport interface CustomEventTypes<T extends EventObject<any> = EventObject<any>> {\n\t[index: string]: T;\n}\n\n/**\n * A type which is either a targeted event listener or an array of listeners\n * @template T The type of target for the events\n * @template E The event type for the events\n */\nexport type EventedCallbackOrArray<T = EventType, E extends EventObject<T> = EventObject<T>> =\n\t| EventedCallback<T, E>\n\t| EventedCallback<T, E>[];\n\n/**\n * Event Class\n */\nexport class Evented<\n\tM extends CustomEventTypes = {},\n\tT = EventType,\n\tO extends EventObject<T> = EventObject<T>\n> extends Destroyable {\n\t// The following member is purely so TypeScript remembers the type of `M` when extending so\n\t// that the utilities in `on.ts` will work https://github.com/Microsoft/TypeScript/issues/20348\n\t// tslint:disable-next-line\n\tprotected __typeMap__?: M;\n\t/**\n\t * map of listeners keyed by event type\n\t */\n\tprotected listenersMap: Map<T | keyof M, EventedCallback<T, O>[]> = new Map();\n\n\t/**\n\t * Emits the event object for the specified type\n\t *\n\t * @param event the event to emit\n\t */\n\temit<K extends keyof M>(event: M[K]): void;\n\temit(event: O): void;\n\temit(event: any): void {\n\t\tthis.listenersMap.forEach((methods, type) => {\n\t\t\tif (isGlobMatch(type as any, event.type)) {\n\t\t\t\t[...methods].forEach((method) => {\n\t\t\t\t\tmethod.call(this, event);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Catch all handler for various call signatures. The signatures are defined in\n\t * `BaseEventedEvents`.  You can add your own event type -> handler types by extending\n\t * `BaseEventedEvents`.  See example for details.\n\t *\n\t * @param args\n\t *\n\t * @example\n\t *\n\t * interface WidgetBaseEvents extends BaseEventedEvents {\n\t *     (type: 'properties:changed', handler: PropertiesChangedHandler): Handle;\n\t * }\n\t * class WidgetBase extends Evented {\n\t *    on: WidgetBaseEvents;\n\t * }\n\t *\n\t * @return {any}\n\t */\n\ton<K extends keyof M>(type: K, listener: EventedCallbackOrArray<K, M[K]>): Handle;\n\ton(type: T, listener: EventedCallbackOrArray<T, O>): Handle;\n\ton(type: any, listener: EventedCallbackOrArray<any, any>): Handle {\n\t\tif (Array.isArray(listener)) {\n\t\t\tconst handles = listener.map((listener) => this._addListener(type, listener));\n\t\t\treturn {\n\t\t\t\tdestroy() {\n\t\t\t\t\thandles.forEach((handle) => handle.destroy());\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn this._addListener(type, listener);\n\t}\n\n\tprivate _addListener(type: T | keyof M, listener: EventedCallback<T, O>) {\n\t\tconst listeners = this.listenersMap.get(type) || [];\n\t\tlisteners.push(listener);\n\t\tthis.listenersMap.set(type, listeners);\n\t\treturn {\n\t\t\tdestroy: () => {\n\t\t\t\tconst listeners = this.listenersMap.get(type) || [];\n\t\t\t\tlisteners.splice(listeners.indexOf(listener), 1);\n\t\t\t}\n\t\t};\n\t}\n}\n\nexport default Evented;\n","export type DecoratorHandler = (target: any, propertyKey?: string) => void;\n\n/**\n * Generic decorator handler to take care of whether or not the decorator was called at the class level\n * or the method level.\n *\n * @param handler\n */\nexport function handleDecorator(handler: DecoratorHandler) {\n\treturn function(target: any, propertyKey?: string, descriptor?: PropertyDescriptor) {\n\t\tif (typeof target === 'function') {\n\t\t\thandler(target.prototype, undefined);\n\t\t} else {\n\t\t\thandler(target, propertyKey);\n\t\t}\n\t};\n}\n\nexport default handleDecorator;\n","import global from './global';\nimport { isArrayLike, Iterable } from './iterator';\nimport has from '../has/has';\nimport './Symbol';\n\nexport interface WeakMap<K extends object, V> {\n\t/**\n\t * Remove a `key` from the map\n\t *\n\t * @param key The key to remove\n\t * @return `true` if the value was removed, otherwise `false`\n\t */\n\tdelete(key: K): boolean;\n\n\t/**\n\t * Retrieve the value, based on the supplied `key`\n\t *\n\t * @param key The key to retrieve the `value` for\n\t * @return the `value` based on the `key` if found, otherwise `false`\n\t */\n\tget(key: K): V | undefined;\n\n\t/**\n\t * Determines if a `key` is present in the map\n\t *\n\t * @param key The `key` to check\n\t * @return `true` if the key is part of the map, otherwise `false`.\n\t */\n\thas(key: K): boolean;\n\n\t/**\n\t * Set a `value` for a particular `key`.\n\t *\n\t * @param key The `key` to set the `value` for\n\t * @param value The `value` to set\n\t * @return the instances\n\t */\n\tset(key: K, value: V): this;\n\n\treadonly [Symbol.toStringTag]: 'WeakMap';\n}\n\nexport interface WeakMapConstructor {\n\t/**\n\t * Create a new instance of a `WeakMap`\n\t *\n\t * @constructor\n\t */\n\tnew (): WeakMap<object, any>;\n\n\t/**\n\t * Create a new instance of a `WeakMap`\n\t *\n\t * @constructor\n\t *\n\t * @param iterable An iterable that contains yields up key/value pair entries\n\t */\n\tnew <K extends object, V>(iterable?: [K, V][]): WeakMap<K, V>;\n\n\t/**\n\t * Create a new instance of a `WeakMap`\n\t *\n\t * @constructor\n\t *\n\t * @param iterable An iterable that contains yields up key/value pair entries\n\t */\n\tnew <K extends object, V>(iterable: Iterable<[K, V]>): WeakMap<K, V>;\n\n\treadonly prototype: WeakMap<object, any>;\n}\n\nexport let WeakMap: WeakMapConstructor = global.WeakMap;\n\ninterface Entry<K, V> {\n\tkey: K;\n\tvalue: V;\n}\n\nif (!has('es6-weakmap')) {\n\tconst DELETED: any = {};\n\n\tconst getUID = function getUID(): number {\n\t\treturn Math.floor(Math.random() * 100000000);\n\t};\n\n\tconst generateName = (function() {\n\t\tlet startId = Math.floor(Date.now() % 100000000);\n\n\t\treturn function generateName(): string {\n\t\t\treturn '__wm' + getUID() + (startId++ + '__');\n\t\t};\n\t})();\n\n\tWeakMap = class WeakMap<K, V> {\n\t\tprivate readonly _name: string;\n\t\tprivate readonly _frozenEntries: Entry<K, V>[];\n\n\t\tconstructor(iterable?: ArrayLike<[K, V]> | Iterable<[K, V]>) {\n\t\t\tthis._name = generateName();\n\n\t\t\tthis._frozenEntries = [];\n\n\t\t\tif (iterable) {\n\t\t\t\tif (isArrayLike(iterable)) {\n\t\t\t\t\tfor (let i = 0; i < iterable.length; i++) {\n\t\t\t\t\t\tconst item = iterable[i];\n\t\t\t\t\t\tthis.set(item[0], item[1]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (const [key, value] of iterable) {\n\t\t\t\t\t\tthis.set(key, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprivate _getFrozenEntryIndex(key: any): number {\n\t\t\tfor (let i = 0; i < this._frozenEntries.length; i++) {\n\t\t\t\tif (this._frozenEntries[i].key === key) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn -1;\n\t\t}\n\n\t\tdelete(key: any): boolean {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (entry && entry.key === key && entry.value !== DELETED) {\n\t\t\t\tentry.value = DELETED;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\tthis._frozenEntries.splice(frozenIndex, 1);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tget(key: any): V | undefined {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (entry && entry.key === key && entry.value !== DELETED) {\n\t\t\t\treturn entry.value;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\treturn this._frozenEntries[frozenIndex].value;\n\t\t\t}\n\t\t}\n\n\t\thas(key: any): boolean {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (Boolean(entry && entry.key === key && entry.value !== DELETED)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tset(key: any, value?: any): this {\n\t\t\tif (!key || (typeof key !== 'object' && typeof key !== 'function')) {\n\t\t\t\tthrow new TypeError('Invalid value used as weak map key');\n\t\t\t}\n\t\t\tlet entry: Entry<K, V> = key[this._name];\n\t\t\tif (!entry || entry.key !== key) {\n\t\t\t\tentry = Object.create(null, {\n\t\t\t\t\tkey: { value: key }\n\t\t\t\t});\n\n\t\t\t\tif (Object.isFrozen(key)) {\n\t\t\t\t\tthis._frozenEntries.push(entry);\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty(key, this._name, {\n\t\t\t\t\t\tvalue: entry\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tentry.value = value;\n\t\t\treturn this;\n\t\t}\n\n\t\t[Symbol.toStringTag]: 'WeakMap' = 'WeakMap';\n\t};\n}\n\nexport default WeakMap;\n","import { PropertyChangeRecord } from './interfaces';\nimport { WIDGET_BASE_TYPE } from './Registry';\n\nfunction isObjectOrArray(value: any): boolean {\n\treturn Object.prototype.toString.call(value) === '[object Object]' || Array.isArray(value);\n}\n\nexport function always(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: true,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function ignore(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: false,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function reference(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: previousProperty !== newProperty,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function shallow(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\tlet changed = false;\n\n\tconst validOldProperty = previousProperty && isObjectOrArray(previousProperty);\n\tconst validNewProperty = newProperty && isObjectOrArray(newProperty);\n\n\tif (!validOldProperty || !validNewProperty) {\n\t\treturn {\n\t\t\tchanged: true,\n\t\t\tvalue: newProperty\n\t\t};\n\t}\n\n\tconst previousKeys = Object.keys(previousProperty);\n\tconst newKeys = Object.keys(newProperty);\n\n\tif (previousKeys.length !== newKeys.length) {\n\t\tchanged = true;\n\t} else {\n\t\tchanged = newKeys.some((key) => {\n\t\t\treturn newProperty[key] !== previousProperty[key];\n\t\t});\n\t}\n\treturn {\n\t\tchanged,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function auto(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\tlet result;\n\tif (typeof newProperty === 'function') {\n\t\tif (newProperty._type === WIDGET_BASE_TYPE) {\n\t\t\tresult = reference(previousProperty, newProperty);\n\t\t} else {\n\t\t\tresult = ignore(previousProperty, newProperty);\n\t\t}\n\t} else if (isObjectOrArray(newProperty)) {\n\t\tresult = shallow(previousProperty, newProperty);\n\t} else {\n\t\tresult = reference(previousProperty, newProperty);\n\t}\n\treturn result;\n}\n","import './Symbol';\nimport { HIGH_SURROGATE_MAX, HIGH_SURROGATE_MIN } from './string';\n\nexport interface IteratorResult<T> {\n\treadonly done: boolean;\n\treadonly value: T;\n}\n\nexport interface Iterator<T> {\n\tnext(value?: any): IteratorResult<T>;\n\n\treturn?(value?: any): IteratorResult<T>;\n\n\tthrow?(e?: any): IteratorResult<T>;\n}\n\nexport interface Iterable<T> {\n\t[Symbol.iterator](): Iterator<T>;\n}\n\nexport interface IterableIterator<T> extends Iterator<T> {\n\t[Symbol.iterator](): IterableIterator<T>;\n}\n\nconst staticDone: IteratorResult<any> = { done: true, value: undefined };\n\n/**\n * A class that _shims_ an iterator interface on array like objects.\n */\nexport class ShimIterator<T> {\n\tprivate _list: ArrayLike<T> | undefined;\n\tprivate _nextIndex = -1;\n\tprivate _nativeIterator: Iterator<T> | undefined;\n\n\tconstructor(list: ArrayLike<T> | Iterable<T>) {\n\t\tif (isIterable(list)) {\n\t\t\tthis._nativeIterator = list[Symbol.iterator]();\n\t\t} else {\n\t\t\tthis._list = list;\n\t\t}\n\t}\n\n\t/**\n\t * Return the next iteration result for the Iterator\n\t */\n\tnext(): IteratorResult<T> {\n\t\tif (this._nativeIterator) {\n\t\t\treturn this._nativeIterator.next();\n\t\t}\n\t\tif (!this._list) {\n\t\t\treturn staticDone;\n\t\t}\n\t\tif (++this._nextIndex < this._list.length) {\n\t\t\treturn {\n\t\t\t\tdone: false,\n\t\t\t\tvalue: this._list[this._nextIndex]\n\t\t\t};\n\t\t}\n\t\treturn staticDone;\n\t}\n\n\t[Symbol.iterator](): IterableIterator<T> {\n\t\treturn this;\n\t}\n}\n\n/**\n * A type guard for checking if something has an Iterable interface\n *\n * @param value The value to type guard against\n */\nexport function isIterable(value: any): value is Iterable<any> {\n\treturn value && typeof value[Symbol.iterator] === 'function';\n}\n\n/**\n * A type guard for checking if something is ArrayLike\n *\n * @param value The value to type guard against\n */\nexport function isArrayLike(value: any): value is ArrayLike<any> {\n\treturn value && typeof value.length === 'number';\n}\n\n/**\n * Returns the iterator for an object\n *\n * @param iterable The iterable object to return the iterator for\n */\nexport function get<T>(iterable: Iterable<T> | ArrayLike<T>): Iterator<T> | undefined {\n\tif (isIterable(iterable)) {\n\t\treturn iterable[Symbol.iterator]();\n\t} else if (isArrayLike(iterable)) {\n\t\treturn new ShimIterator(iterable);\n\t}\n}\n\nexport interface ForOfCallback<T> {\n\t/**\n\t * A callback function for a forOf() iteration\n\t *\n\t * @param value The current value\n\t * @param object The object being iterated over\n\t * @param doBreak A function, if called, will stop the iteration\n\t */\n\t(value: T, object: Iterable<T> | ArrayLike<T> | string, doBreak: () => void): void;\n}\n\n/**\n * Shims the functionality of `for ... of` blocks\n *\n * @param iterable The object the provides an interator interface\n * @param callback The callback which will be called for each item of the iterable\n * @param thisArg Optional scope to pass the callback\n */\nexport function forOf<T>(\n\titerable: Iterable<T> | ArrayLike<T> | string,\n\tcallback: ForOfCallback<T>,\n\tthisArg?: any\n): void {\n\tlet broken = false;\n\n\tfunction doBreak() {\n\t\tbroken = true;\n\t}\n\n\t/* We need to handle iteration of double byte strings properly */\n\tif (isArrayLike(iterable) && typeof iterable === 'string') {\n\t\tconst l = iterable.length;\n\t\tfor (let i = 0; i < l; ++i) {\n\t\t\tlet char = iterable[i];\n\t\t\tif (i + 1 < l) {\n\t\t\t\tconst code = char.charCodeAt(0);\n\t\t\t\tif (code >= HIGH_SURROGATE_MIN && code <= HIGH_SURROGATE_MAX) {\n\t\t\t\t\tchar += iterable[++i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcallback.call(thisArg, char, iterable, doBreak);\n\t\t\tif (broken) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconst iterator = get(iterable);\n\t\tif (iterator) {\n\t\t\tlet result = iterator.next();\n\n\t\t\twhile (!result.done) {\n\t\t\t\tcallback.call(thisArg, result.value, iterable, doBreak);\n\t\t\t\tif (broken) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tresult = iterator.next();\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Thenable } from './interfaces';\nimport global from './global';\nimport { queueMicroTask } from './support/queue';\nimport { Iterable } from './iterator';\nimport './Symbol';\nimport has from '../has/has';\n\n/**\n * Executor is the interface for functions used to initialize a Promise.\n */\nexport interface Executor<T> {\n\t/**\n\t * The executor for the promise\n\t *\n\t * @param resolve The resolver callback of the promise\n\t * @param reject The rejector callback of the promise\n\t */\n\t(resolve: (value?: T | PromiseLike<T>) => void, reject: (reason?: any) => void): void;\n}\n\ndeclare global {\n\tinterface Promise<T> {\n\t\tfinally(onfinally?: (() => void) | undefined | null): Promise<T>;\n\t}\n}\n\nexport let ShimPromise: typeof Promise = global.Promise;\n\nexport const isThenable = function isThenable<T>(value: any): value is PromiseLike<T> {\n\treturn value && typeof value.then === 'function';\n};\n\nif (!has('es6-promise')) {\n\tconst enum State {\n\t\tFulfilled,\n\t\tPending,\n\t\tRejected\n\t}\n\n\tglobal.Promise = ShimPromise = class Promise<T> implements Thenable<T> {\n\t\tstatic all(iterable: Iterable<any | PromiseLike<any>> | (any | PromiseLike<any>)[]): Promise<any> {\n\t\t\treturn new this(function(resolve, reject) {\n\t\t\t\tconst values: any[] = [];\n\t\t\t\tlet complete = 0;\n\t\t\t\tlet total = 0;\n\t\t\t\tlet populating = true;\n\n\t\t\t\tfunction fulfill(index: number, value: any): void {\n\t\t\t\t\tvalues[index] = value;\n\t\t\t\t\t++complete;\n\t\t\t\t\tfinish();\n\t\t\t\t}\n\n\t\t\t\tfunction finish(): void {\n\t\t\t\t\tif (populating || complete < total) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(values);\n\t\t\t\t}\n\n\t\t\t\tfunction processItem(index: number, item: any): void {\n\t\t\t\t\t++total;\n\t\t\t\t\tif (isThenable(item)) {\n\t\t\t\t\t\t// If an item Promise rejects, this Promise is immediately rejected with the item\n\t\t\t\t\t\t// Promise's rejection error.\n\t\t\t\t\t\titem.then(fulfill.bind(null, index), reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tPromise.resolve(item).then(fulfill.bind(null, index));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet i = 0;\n\t\t\t\tfor (const value of iterable) {\n\t\t\t\t\tprocessItem(i, value);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t\tpopulating = false;\n\n\t\t\t\tfinish();\n\t\t\t});\n\t\t}\n\n\t\tstatic race<T>(iterable: Iterable<T | PromiseLike<T>> | (T | PromiseLike<T>)[]): Promise<T[]> {\n\t\t\treturn new this(function(resolve: (value?: any) => void, reject) {\n\t\t\t\tfor (const item of iterable) {\n\t\t\t\t\tif (item instanceof Promise) {\n\t\t\t\t\t\t// If a Promise item rejects, this Promise is immediately rejected with the item\n\t\t\t\t\t\t// Promise's rejection error.\n\t\t\t\t\t\titem.then(resolve, reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tPromise.resolve(item).then(resolve);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tstatic reject(reason?: any): Promise<never> {\n\t\t\treturn new this(function(resolve, reject) {\n\t\t\t\treject(reason);\n\t\t\t});\n\t\t}\n\n\t\tstatic resolve(): Promise<void>;\n\t\tstatic resolve<T>(value: T | PromiseLike<T>): Promise<T>;\n\t\tstatic resolve<T>(value?: any): Promise<T> {\n\t\t\treturn new this(function(resolve) {\n\t\t\t\tresolve(<T>value);\n\t\t\t});\n\t\t}\n\n\t\tstatic [Symbol.species]: PromiseConstructor = ShimPromise as PromiseConstructor;\n\n\t\t/**\n\t\t * Creates a new Promise.\n\t\t *\n\t\t * @constructor\n\t\t *\n\t\t * @param executor\n\t\t * The executor function is called immediately when the Promise is instantiated. It is responsible for\n\t\t * starting the asynchronous operation when it is invoked.\n\t\t *\n\t\t * The executor must call either the passed `resolve` function when the asynchronous operation has completed\n\t\t * successfully, or the `reject` function when the operation fails.\n\t\t */\n\t\tconstructor(executor: Executor<T>) {\n\t\t\t/**\n\t\t\t * If true, the resolution of this promise is chained (\"locked in\") to another promise.\n\t\t\t */\n\t\t\tlet isChained = false;\n\n\t\t\t/**\n\t\t\t * Whether or not this promise is in a resolved state.\n\t\t\t */\n\t\t\tconst isResolved = (): boolean => {\n\t\t\t\treturn this.state !== State.Pending || isChained;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Callbacks that should be invoked once the asynchronous operation has completed.\n\t\t\t */\n\t\t\tlet callbacks: null | (Array<() => void>) = [];\n\n\t\t\t/**\n\t\t\t * Initially pushes callbacks onto a queue for execution once this promise settles. After the promise settles,\n\t\t\t * enqueues callbacks for execution on the next event loop turn.\n\t\t\t */\n\t\t\tlet whenFinished = function(callback: () => void): void {\n\t\t\t\tif (callbacks) {\n\t\t\t\t\tcallbacks.push(callback);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Settles this promise.\n\t\t\t *\n\t\t\t * @param newState The resolved state for this promise.\n\t\t\t * @param {T|any} value The resolved value for this promise.\n\t\t\t */\n\t\t\tconst settle = (newState: State, value: any): void => {\n\t\t\t\t// A promise can only be settled once.\n\t\t\t\tif (this.state !== State.Pending) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.state = newState;\n\t\t\t\tthis.resolvedValue = value;\n\t\t\t\twhenFinished = queueMicroTask;\n\n\t\t\t\t// Only enqueue a callback runner if there are callbacks so that initially fulfilled Promises don't have to\n\t\t\t\t// wait an extra turn.\n\t\t\t\tif (callbacks && callbacks.length > 0) {\n\t\t\t\t\tqueueMicroTask(function(): void {\n\t\t\t\t\t\tif (callbacks) {\n\t\t\t\t\t\t\tlet count = callbacks.length;\n\t\t\t\t\t\t\tfor (let i = 0; i < count; ++i) {\n\t\t\t\t\t\t\t\tcallbacks[i].call(null);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcallbacks = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Resolves this promise.\n\t\t\t *\n\t\t\t * @param newState The resolved state for this promise.\n\t\t\t * @param {T|any} value The resolved value for this promise.\n\t\t\t */\n\t\t\tconst resolve = (newState: State, value: any): void => {\n\t\t\t\tif (isResolved()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (isThenable(value)) {\n\t\t\t\t\tvalue.then(settle.bind(null, State.Fulfilled), settle.bind(null, State.Rejected));\n\t\t\t\t\tisChained = true;\n\t\t\t\t} else {\n\t\t\t\t\tsettle(newState, value);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.then = <TResult1 = T, TResult2 = never>(\n\t\t\t\tonFulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n\t\t\t\tonRejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null\n\t\t\t): Promise<TResult1 | TResult2> => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t// whenFinished initially queues up callbacks for execution after the promise has settled. Once the\n\t\t\t\t\t// promise has settled, whenFinished will schedule callbacks for execution on the next turn through the\n\t\t\t\t\t// event loop.\n\t\t\t\t\twhenFinished(() => {\n\t\t\t\t\t\tconst callback: ((value?: any) => any) | undefined | null =\n\t\t\t\t\t\t\tthis.state === State.Rejected ? onRejected : onFulfilled;\n\n\t\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tresolve(callback(this.resolvedValue));\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (this.state === State.Rejected) {\n\t\t\t\t\t\t\treject(this.resolvedValue);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(this.resolvedValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\texecutor(resolve.bind(null, State.Fulfilled), resolve.bind(null, State.Rejected));\n\t\t\t} catch (error) {\n\t\t\t\tsettle(State.Rejected, error);\n\t\t\t}\n\t\t}\n\n\t\tcatch<TResult = never>(\n\t\t\tonRejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined | null\n\t\t): Promise<T | TResult> {\n\t\t\treturn this.then(undefined, onRejected);\n\t\t}\n\n\t\t/**\n\t\t * The current state of this promise.\n\t\t */\n\t\tprivate state = State.Pending;\n\n\t\t/**\n\t\t * The resolved value for this promise.\n\t\t *\n\t\t * @type {T|any}\n\t\t */\n\t\tprivate resolvedValue: any;\n\n\t\tthen: <TResult1 = T, TResult2 = never>(\n\t\t\tonfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n\t\t\tonrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null\n\t\t) => Promise<TResult1 | TResult2>;\n\n\t\t[Symbol.toStringTag]: 'Promise' = 'Promise';\n\t} as any;\n\t// this cast is needed in order to omit finally in the class declaration; this was done so the finally code\n\t// is not duplicated and always added in the conditional below\n}\n\nif (!has('es2018-promise-finally')) {\n\tglobal.Promise.prototype.finally = function<T>(\n\t\tthis: Promise<T>,\n\t\tonFinally: (() => any) | undefined | null\n\t): Promise<any> {\n\t\treturn this.then(\n\t\t\tonFinally && ((value: T) => Promise.resolve(onFinally()).then(() => value)),\n\t\t\tonFinally &&\n\t\t\t\t((reason: any) =>\n\t\t\t\t\tPromise.resolve(onFinally()).then(() => {\n\t\t\t\t\t\tthrow reason;\n\t\t\t\t\t}))\n\t\t);\n\t};\n}\n\nexport default ShimPromise;\n","import WeakMap from '../../shim/WeakMap';\nimport { WidgetBase } from './../WidgetBase';\nimport { handleDecorator } from './handleDecorator';\nimport { beforeProperties } from './beforeProperties';\nimport { InjectorItem, RegistryLabel } from './../interfaces';\n\n/**\n * Map of instances against registered injectors.\n */\nconst registeredInjectorsMap: WeakMap<WidgetBase, InjectorItem[]> = new WeakMap();\n\n/**\n * Defines the contract requires for the get properties function\n * used to map the injected properties.\n */\nexport interface GetProperties<T = any> {\n\t(payload: any, properties: T): T;\n}\n\n/**\n * Defines the inject configuration required for use of the `inject` decorator\n */\nexport interface InjectConfig {\n\t/**\n\t * The label of the registry injector\n\t */\n\tname: RegistryLabel;\n\n\t/**\n\t * Function that returns propertues to inject using the passed properties\n\t * and the injected payload.\n\t */\n\tgetProperties: GetProperties;\n}\n\n/**\n * Decorator retrieves an injector from an available registry using the name and\n * calls the `getProperties` function with the payload from the injector\n * and current properties with the the injected properties returned.\n *\n * @param InjectConfig the inject configuration\n */\nexport function inject({ name, getProperties }: InjectConfig) {\n\treturn handleDecorator((target, propertyKey) => {\n\t\tbeforeProperties(function(this: WidgetBase & { own: Function }, properties: any) {\n\t\t\tconst injectorItem = this.registry.getInjector(name);\n\t\t\tif (injectorItem) {\n\t\t\t\tconst { injector, invalidator } = injectorItem;\n\t\t\t\tconst registeredInjectors = registeredInjectorsMap.get(this) || [];\n\t\t\t\tif (registeredInjectors.length === 0) {\n\t\t\t\t\tregisteredInjectorsMap.set(this, registeredInjectors);\n\t\t\t\t}\n\t\t\t\tif (registeredInjectors.indexOf(injectorItem) === -1) {\n\t\t\t\t\tthis.own(\n\t\t\t\t\t\tinvalidator.on('invalidate', () => {\n\t\t\t\t\t\t\tthis.invalidate();\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tregisteredInjectors.push(injectorItem);\n\t\t\t\t}\n\t\t\t\treturn getProperties(injector(), properties);\n\t\t\t}\n\t\t})(target);\n\t});\n}\n\nexport default inject;\n","import { handleDecorator } from './handleDecorator';\nimport { BeforeProperties } from './../interfaces';\n\n/**\n * Decorator that adds the function passed of target method to be run\n * in the `beforeProperties` lifecycle.\n */\nexport function beforeProperties(method: BeforeProperties): (target: any) => void;\nexport function beforeProperties(): (target: any, propertyKey: string) => void;\nexport function beforeProperties(method?: BeforeProperties) {\n\treturn handleDecorator((target, propertyKey) => {\n\t\ttarget.addDecorator('beforeProperties', propertyKey ? target[propertyKey] : method);\n\t});\n}\n\nexport default beforeProperties;\n","import { WidgetBase } from './../WidgetBase';\nimport { handleDecorator } from './handleDecorator';\nimport { beforeProperties } from './beforeProperties';\n\nexport function alwaysRender() {\n\treturn handleDecorator((target, propertyKey) => {\n\t\tbeforeProperties(function(this: WidgetBase) {\n\t\t\tthis.invalidate();\n\t\t})(target);\n\t});\n}\n\nexport default alwaysRender;\n","import { handleDecorator } from './handleDecorator';\nimport { DiffPropertyFunction } from './../interfaces';\nimport { auto } from './../diff';\n\n/**\n * Decorator that can be used to register a function as a specific property diff\n *\n * @param propertyName  The name of the property of which the diff function is applied\n * @param diffType      The diff type, default is DiffType.AUTO.\n * @param diffFunction  A diff function to run if diffType if DiffType.CUSTOM\n */\nexport function diffProperty(\n\tpropertyName: string,\n\tdiffFunction: DiffPropertyFunction = auto,\n\treactionFunction?: Function\n) {\n\treturn handleDecorator((target, propertyKey) => {\n\t\ttarget.addDecorator(`diffProperty:${propertyName}`, diffFunction.bind(null));\n\t\ttarget.addDecorator('registeredDiffProperty', propertyName);\n\t\tif (reactionFunction || propertyKey) {\n\t\t\ttarget.addDecorator('diffReaction', {\n\t\t\t\tpropertyName,\n\t\t\t\treaction: propertyKey ? target[propertyKey] : reactionFunction\n\t\t\t});\n\t\t}\n\t});\n}\n\nexport default diffProperty;\n","import global from '../shim/global';\nimport has from '../has/has';\nimport { WeakMap } from '../shim/WeakMap';\nimport {\n\tWNode,\n\tVNode,\n\tDNode,\n\tVNodeProperties,\n\tWidgetBaseConstructor,\n\tTransitionStrategy,\n\tSupportedClassName,\n\tDomVNode\n} from './interfaces';\nimport transitionStrategy from './animations/cssTransitions';\nimport { isVNode, isWNode, WNODE, v, isDomVNode, w } from './d';\nimport { Registry, isWidgetBaseConstructor } from './Registry';\nimport { WidgetBase, widgetInstanceMap } from './WidgetBase';\n\nexport interface BaseNodeWrapper {\n\tnode: WNode | VNode;\n\tdomNode?: Node;\n\tchildrenWrappers?: DNodeWrapper[];\n\tdepth: number;\n\torder: number;\n\trequiresInsertBefore?: boolean;\n\thasPreviousSiblings?: boolean;\n\thasParentWNode?: boolean;\n\tnamespace?: string;\n\thasAnimations?: boolean;\n}\n\nexport interface WNodeWrapper extends BaseNodeWrapper {\n\tnode: WNode;\n\tinstance?: WidgetBase;\n\tmergeNodes?: Node[];\n\tnodeHandlerCalled?: boolean;\n}\n\nexport interface VNodeWrapper extends BaseNodeWrapper {\n\tnode: VNode | DomVNode;\n\tmerged?: boolean;\n\tdecoratedDeferredProperties?: VNodeProperties;\n\tinserted?: boolean;\n}\n\nexport type DNodeWrapper = VNodeWrapper | WNodeWrapper;\n\nexport interface MountOptions {\n\tsync: boolean;\n\tmerge: boolean;\n\ttransition: TransitionStrategy;\n\tdomNode: HTMLElement;\n\tregistry: Registry | null;\n}\n\nexport interface Renderer {\n\tinvalidate(): void;\n\tmount(mountOptions?: Partial<MountOptions>): void;\n}\n\ninterface ProcessItem {\n\tcurrent?: (WNodeWrapper | VNodeWrapper)[];\n\tnext?: (WNodeWrapper | VNodeWrapper)[];\n\tmeta: ProcessMeta;\n}\n\ninterface ProcessResult {\n\titem?: ProcessItem;\n\twidget?: AttachApplication | DetachApplication;\n\tdom?: ApplicationInstruction;\n}\n\ninterface ProcessMeta {\n\tmergeNodes?: Node[];\n\toldIndex?: number;\n\tnewIndex?: number;\n}\n\ninterface InvalidationQueueItem {\n\tinstance: WidgetBase;\n\tdepth: number;\n\torder: number;\n}\n\ninterface Instruction {\n\tcurrent: undefined | DNodeWrapper;\n\tnext: undefined | DNodeWrapper;\n}\n\ninterface CreateWidgetInstruction {\n\tnext: WNodeWrapper;\n}\n\ninterface UpdateWidgetInstruction {\n\tcurrent: WNodeWrapper;\n\tnext: WNodeWrapper;\n}\n\ninterface RemoveWidgetInstruction {\n\tcurrent: WNodeWrapper;\n}\n\ninterface CreateDomInstruction {\n\tnext: VNodeWrapper;\n}\n\ninterface UpdateDomInstruction {\n\tcurrent: VNodeWrapper;\n\tnext: VNodeWrapper;\n}\n\ninterface RemoveDomInstruction {\n\tcurrent: VNodeWrapper;\n}\n\ninterface AttachApplication {\n\ttype: 'attach';\n\tinstance: WidgetBase;\n\tattached: boolean;\n}\n\ninterface DetachApplication {\n\ttype: 'detach';\n\tcurrent: WNodeWrapper;\n}\n\ninterface CreateDomApplication {\n\ttype: 'create';\n\tcurrent?: VNodeWrapper;\n\tnext: VNodeWrapper;\n\tparentDomNode: Node;\n}\n\ninterface DeleteDomApplication {\n\ttype: 'delete';\n\tcurrent: VNodeWrapper;\n}\n\ninterface UpdateDomApplication {\n\ttype: 'update';\n\tcurrent: VNodeWrapper;\n\tnext: VNodeWrapper;\n}\n\ninterface PreviousProperties {\n\tproperties: any;\n\tattributes?: any;\n\tevents?: any;\n}\n\ntype ApplicationInstruction =\n\t| CreateDomApplication\n\t| UpdateDomApplication\n\t| DeleteDomApplication\n\t| AttachApplication\n\t| DetachApplication;\n\nconst EMPTY_ARRAY: DNodeWrapper[] = [];\nconst nodeOperations = ['focus', 'blur', 'scrollIntoView', 'click'];\nconst NAMESPACE_W3 = 'http://www.w3.org/';\nconst NAMESPACE_SVG = NAMESPACE_W3 + '2000/svg';\nconst NAMESPACE_XLINK = NAMESPACE_W3 + '1999/xlink';\n\nfunction isWNodeWrapper(child: DNodeWrapper): child is WNodeWrapper {\n\treturn child && isWNode(child.node);\n}\n\nfunction isVNodeWrapper(child?: DNodeWrapper | null): child is VNodeWrapper {\n\treturn !!child && isVNode(child.node);\n}\n\nfunction isAttachApplication(value: any): value is AttachApplication | DetachApplication {\n\treturn !!value.type;\n}\n\nfunction updateAttributes(\n\tdomNode: Element,\n\tpreviousAttributes: { [index: string]: string | undefined },\n\tattributes: { [index: string]: string | undefined },\n\tnamespace?: string\n) {\n\tconst attrNames = Object.keys(attributes);\n\tconst attrCount = attrNames.length;\n\tfor (let i = 0; i < attrCount; i++) {\n\t\tconst attrName = attrNames[i];\n\t\tconst attrValue = attributes[attrName];\n\t\tconst previousAttrValue = previousAttributes[attrName];\n\t\tif (attrValue !== previousAttrValue) {\n\t\t\tupdateAttribute(domNode, attrName, attrValue, namespace);\n\t\t}\n\t}\n}\n\nfunction buildPreviousProperties(domNode: any, current: VNodeWrapper, next: VNodeWrapper) {\n\tconst {\n\t\tnode: { diffType, properties, attributes }\n\t} = current;\n\tif (!diffType || diffType === 'vdom') {\n\t\treturn {\n\t\t\tproperties: current.node.properties,\n\t\t\tattributes: current.node.attributes,\n\t\t\tevents: current.node.events\n\t\t};\n\t} else if (diffType === 'none') {\n\t\treturn { properties: {}, attributes: current.node.attributes ? {} : undefined, events: current.node.events };\n\t}\n\tlet newProperties: any = {\n\t\tproperties: {}\n\t};\n\tif (attributes) {\n\t\tnewProperties.attributes = {};\n\t\tnewProperties.events = current.node.events;\n\t\tObject.keys(properties).forEach((propName) => {\n\t\t\tnewProperties.properties[propName] = domNode[propName];\n\t\t});\n\t\tObject.keys(attributes).forEach((attrName) => {\n\t\t\tnewProperties.attributes[attrName] = domNode.getAttribute(attrName);\n\t\t});\n\t\treturn newProperties;\n\t}\n\tnewProperties.properties = Object.keys(properties).reduce(\n\t\t(props, property) => {\n\t\t\tprops[property] = domNode.getAttribute(property) || domNode[property];\n\t\t\treturn props;\n\t\t},\n\t\t{} as any\n\t);\n\treturn newProperties;\n}\n\nfunction checkDistinguishable(wrappers: DNodeWrapper[], index: number, parentWNodeWrapper?: WNodeWrapper) {\n\tconst wrapperToCheck = wrappers[index];\n\tif (isVNodeWrapper(wrapperToCheck) && !wrapperToCheck.node.tag) {\n\t\treturn;\n\t}\n\tconst { key } = wrapperToCheck.node.properties;\n\tlet parentName = 'unknown';\n\tif (parentWNodeWrapper) {\n\t\tconst {\n\t\t\tnode: { widgetConstructor }\n\t\t} = parentWNodeWrapper;\n\t\tparentName = (widgetConstructor as any).name || 'unknown';\n\t}\n\n\tif (key === undefined || key === null) {\n\t\tfor (let i = 0; i < wrappers.length; i++) {\n\t\t\tif (i !== index) {\n\t\t\t\tconst wrapper = wrappers[i];\n\t\t\t\tif (same(wrapper, wrapperToCheck)) {\n\t\t\t\t\tlet nodeIdentifier: string;\n\t\t\t\t\tif (isWNodeWrapper(wrapper)) {\n\t\t\t\t\t\tnodeIdentifier = (wrapper.node.widgetConstructor as any).name || 'unknown';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnodeIdentifier = wrapper.node.tag;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`A widget (${parentName}) has had a child added or removed, but they were not able to uniquely identified. It is recommended to provide a unique 'key' property when using the same widget or element (${nodeIdentifier}) multiple times as siblings`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction same(dnode1: DNodeWrapper, dnode2: DNodeWrapper): boolean {\n\tif (isVNodeWrapper(dnode1) && isVNodeWrapper(dnode2)) {\n\t\tif (isDomVNode(dnode1.node) && isDomVNode(dnode2.node)) {\n\t\t\tif (dnode1.node.domNode !== dnode2.node.domNode) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif (dnode1.node.tag !== dnode2.node.tag) {\n\t\t\treturn false;\n\t\t}\n\t\tif (dnode1.node.properties.key !== dnode2.node.properties.key) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t} else if (isWNodeWrapper(dnode1) && isWNodeWrapper(dnode2)) {\n\t\tif (dnode1.instance === undefined && typeof dnode2.node.widgetConstructor === 'string') {\n\t\t\treturn false;\n\t\t}\n\t\tif (dnode1.node.widgetConstructor !== dnode2.node.widgetConstructor) {\n\t\t\treturn false;\n\t\t}\n\t\tif (dnode1.node.properties.key !== dnode2.node.properties.key) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction findIndexOfChild(children: DNodeWrapper[], sameAs: DNodeWrapper, start: number) {\n\tfor (let i = start; i < children.length; i++) {\n\t\tif (same(children[i], sameAs)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction createClassPropValue(classes: SupportedClassName | SupportedClassName[] = []) {\n\tclasses = Array.isArray(classes) ? classes : [classes];\n\treturn classes\n\t\t.filter((className) => className && className !== true)\n\t\t.join(' ')\n\t\t.trim();\n}\n\nfunction updateAttribute(domNode: Element, attrName: string, attrValue: string | undefined, namespace?: string) {\n\tif (namespace === NAMESPACE_SVG && attrName === 'href' && attrValue) {\n\t\tdomNode.setAttributeNS(NAMESPACE_XLINK, attrName, attrValue);\n\t} else if ((attrName === 'role' && attrValue === '') || attrValue === undefined) {\n\t\tdomNode.removeAttribute(attrName);\n\t} else {\n\t\tdomNode.setAttribute(attrName, attrValue);\n\t}\n}\n\nfunction runEnterAnimation(next: VNodeWrapper, transitions: TransitionStrategy) {\n\tconst {\n\t\tdomNode,\n\t\tnode: { properties },\n\t\tnode: {\n\t\t\tproperties: { enterAnimation }\n\t\t}\n\t} = next;\n\tif (enterAnimation && enterAnimation !== true) {\n\t\tif (typeof enterAnimation === 'function') {\n\t\t\treturn enterAnimation(domNode as Element, properties);\n\t\t}\n\t\ttransitions.enter(domNode as Element, properties, enterAnimation);\n\t}\n}\n\nfunction runExitAnimation(current: VNodeWrapper, transitions: TransitionStrategy, exitAnimation: string | Function) {\n\tconst {\n\t\tdomNode,\n\t\tnode: { properties }\n\t} = current;\n\tconst removeDomNode = () => {\n\t\tdomNode && domNode.parentNode && domNode.parentNode.removeChild(domNode);\n\t\tcurrent.domNode = undefined;\n\t};\n\tif (typeof exitAnimation === 'function') {\n\t\treturn exitAnimation(domNode as Element, removeDomNode, properties);\n\t}\n\ttransitions.exit(domNode as Element, properties, exitAnimation, removeDomNode);\n}\n\nfunction arrayFrom(arr: any) {\n\treturn Array.prototype.slice.call(arr);\n}\n\nfunction wrapNodes(renderer: () => DNode) {\n\treturn class extends WidgetBase {\n\t\tpublic isWNodeWrapper = true;\n\n\t\tprotected render() {\n\t\t\tconst result = renderer();\n\t\t\tthis.isWNodeWrapper = isWNode(result);\n\t\t\treturn result;\n\t\t}\n\t};\n}\n\nexport function renderer(renderer: () => WNode | VNode): Renderer {\n\tlet _mountOptions: MountOptions = {\n\t\tsync: false,\n\t\tmerge: true,\n\t\ttransition: transitionStrategy,\n\t\tdomNode: global.document.body,\n\t\tregistry: null\n\t};\n\tlet _invalidationQueue: InvalidationQueueItem[] = [];\n\tlet _processQueue: (ProcessItem | DetachApplication | AttachApplication)[] = [];\n\tlet _applicationQueue: ApplicationInstruction[] = [];\n\tlet _eventMap = new WeakMap<Function, EventListener>();\n\tlet _instanceToWrapperMap = new WeakMap<WidgetBase, WNodeWrapper>();\n\tlet _parentWrapperMap = new WeakMap<DNodeWrapper, DNodeWrapper>();\n\tlet _wrapperSiblingMap = new WeakMap<DNodeWrapper, DNodeWrapper>();\n\tlet _insertBeforeMap: undefined | WeakMap<DNodeWrapper, Node> = new WeakMap<DNodeWrapper, Node>();\n\tlet _renderScheduled: number | undefined;\n\tlet _afterRenderCallbacks: Function[] = [];\n\tlet _deferredRenderCallbacks: Function[] = [];\n\tlet parentInvalidate: () => void;\n\tlet _allMergedNodes: Node[] = [];\n\n\tfunction nodeOperation(\n\t\tpropName: string,\n\t\tpropValue: (() => boolean) | boolean,\n\t\tpreviousValue: boolean,\n\t\tdomNode: HTMLElement & { [index: string]: any }\n\t): void {\n\t\tlet result = propValue && !previousValue;\n\t\tif (typeof propValue === 'function') {\n\t\t\tresult = propValue();\n\t\t}\n\t\tif (result === true) {\n\t\t\t_afterRenderCallbacks.push(() => {\n\t\t\t\tdomNode[propName]();\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction updateEvent(\n\t\tdomNode: Node,\n\t\teventName: string,\n\t\tcurrentValue: Function,\n\t\tbind: any,\n\t\tpreviousValue?: Function\n\t) {\n\t\tif (previousValue) {\n\t\t\tconst previousEvent = _eventMap.get(previousValue);\n\t\t\tdomNode.removeEventListener(eventName, previousEvent);\n\t\t}\n\n\t\tlet callback = currentValue.bind(bind);\n\n\t\tif (eventName === 'input') {\n\t\t\tcallback = function(this: any, evt: Event) {\n\t\t\t\tcurrentValue.call(this, evt);\n\t\t\t\t(evt.target as any)['oninput-value'] = (evt.target as HTMLInputElement).value;\n\t\t\t}.bind(bind);\n\t\t}\n\n\t\tdomNode.addEventListener(eventName, callback);\n\t\t_eventMap.set(currentValue, callback);\n\t}\n\n\tfunction removeOrphanedEvents(\n\t\tdomNode: Element,\n\t\tpreviousProperties: VNodeProperties,\n\t\tproperties: VNodeProperties,\n\t\tonlyEvents: boolean = false\n\t) {\n\t\tObject.keys(previousProperties).forEach((propName) => {\n\t\t\tconst isEvent = propName.substr(0, 2) === 'on' || onlyEvents;\n\t\t\tconst eventName = onlyEvents ? propName : propName.substr(2);\n\t\t\tif (isEvent && !properties[propName]) {\n\t\t\t\tconst eventCallback = _eventMap.get(previousProperties[propName]);\n\t\t\t\tif (eventCallback) {\n\t\t\t\t\tdomNode.removeEventListener(eventName, eventCallback);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction renderedToWrapper(\n\t\trendered: DNode[],\n\t\tparent: DNodeWrapper,\n\t\tcurrentParent: DNodeWrapper | null\n\t): DNodeWrapper[] {\n\t\tconst { requiresInsertBefore, hasPreviousSiblings, namespace, depth } = parent;\n\t\tconst wrappedRendered: DNodeWrapper[] = [];\n\t\tconst hasParentWNode = isWNodeWrapper(parent);\n\t\tconst currentParentChildren = (isVNodeWrapper(currentParent) && currentParent.childrenWrappers) || [];\n\t\tconst hasCurrentParentChildren = currentParentChildren.length > 0;\n\t\tconst insertBefore =\n\t\t\t((requiresInsertBefore || hasPreviousSiblings !== false) && hasParentWNode) ||\n\t\t\t(hasCurrentParentChildren && rendered.length > 1);\n\t\tlet previousItem: DNodeWrapper | undefined;\n\t\tfor (let i = 0; i < rendered.length; i++) {\n\t\t\tconst renderedItem = rendered[i];\n\t\t\tconst wrapper = {\n\t\t\t\tnode: renderedItem,\n\t\t\t\tdepth: depth + 1,\n\t\t\t\torder: i,\n\t\t\t\trequiresInsertBefore: insertBefore,\n\t\t\t\thasParentWNode,\n\t\t\t\tnamespace: namespace\n\t\t\t} as DNodeWrapper;\n\t\t\tif (isVNode(renderedItem) && renderedItem.properties.exitAnimation) {\n\t\t\t\tparent.hasAnimations = true;\n\t\t\t\tlet nextParent = _parentWrapperMap.get(parent);\n\t\t\t\twhile (nextParent) {\n\t\t\t\t\tif (nextParent.hasAnimations) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tnextParent.hasAnimations = true;\n\t\t\t\t\tnextParent = _parentWrapperMap.get(nextParent);\n\t\t\t\t}\n\t\t\t}\n\t\t\t_parentWrapperMap.set(wrapper, parent);\n\t\t\tif (previousItem) {\n\t\t\t\t_wrapperSiblingMap.set(previousItem, wrapper);\n\t\t\t}\n\t\t\twrappedRendered.push(wrapper);\n\t\t\tpreviousItem = wrapper;\n\t\t}\n\t\treturn wrappedRendered;\n\t}\n\n\tfunction findParentWNodeWrapper(currentNode: DNodeWrapper): WNodeWrapper | undefined {\n\t\tlet parentWNodeWrapper: WNodeWrapper | undefined;\n\t\tlet parentWrapper = _parentWrapperMap.get(currentNode);\n\n\t\twhile (!parentWNodeWrapper && parentWrapper) {\n\t\t\tif (!parentWNodeWrapper && isWNodeWrapper(parentWrapper)) {\n\t\t\t\tparentWNodeWrapper = parentWrapper;\n\t\t\t}\n\t\t\tparentWrapper = _parentWrapperMap.get(parentWrapper);\n\t\t}\n\t\treturn parentWNodeWrapper;\n\t}\n\n\tfunction findParentDomNode(currentNode: DNodeWrapper): Node | undefined {\n\t\tlet parentDomNode: Node | undefined;\n\t\tlet parentWrapper = _parentWrapperMap.get(currentNode);\n\n\t\twhile (!parentDomNode && parentWrapper) {\n\t\t\tif (!parentDomNode && isVNodeWrapper(parentWrapper) && parentWrapper.domNode) {\n\t\t\t\tparentDomNode = parentWrapper.domNode;\n\t\t\t}\n\t\t\tparentWrapper = _parentWrapperMap.get(parentWrapper);\n\t\t}\n\t\treturn parentDomNode;\n\t}\n\n\tfunction runDeferredProperties(next: VNodeWrapper) {\n\t\tif (next.node.deferredPropertiesCallback) {\n\t\t\tconst properties = next.node.properties;\n\t\t\tnext.node.properties = { ...next.node.deferredPropertiesCallback(true), ...next.node.originalProperties };\n\t\t\t_afterRenderCallbacks.push(() => {\n\t\t\t\tprocessProperties(next, { properties });\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction findInsertBefore(next: DNodeWrapper) {\n\t\tlet insertBefore: Node | null = null;\n\t\tlet searchNode: DNodeWrapper | undefined = next;\n\t\twhile (!insertBefore) {\n\t\t\tconst nextSibling = _wrapperSiblingMap.get(searchNode);\n\t\t\tif (nextSibling) {\n\t\t\t\tif (isVNodeWrapper(nextSibling)) {\n\t\t\t\t\tif (nextSibling.domNode && nextSibling.domNode.parentNode) {\n\t\t\t\t\t\tinsertBefore = nextSibling.domNode;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tsearchNode = nextSibling;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (nextSibling.domNode && nextSibling.domNode.parentNode) {\n\t\t\t\t\tinsertBefore = nextSibling.domNode;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tsearchNode = nextSibling;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tsearchNode = _parentWrapperMap.get(searchNode);\n\t\t\tif (!searchNode || isVNodeWrapper(searchNode)) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn insertBefore;\n\t}\n\n\tfunction setValue(domNode: any, propValue?: any, previousValue?: any) {\n\t\tconst domValue = domNode.value;\n\t\tconst onInputValue = domNode['oninput-value'];\n\t\tconst onSelectValue = domNode['select-value'];\n\n\t\tif (onSelectValue && domValue !== onSelectValue) {\n\t\t\tdomNode.value = onSelectValue;\n\t\t\tif (domNode.value === onSelectValue) {\n\t\t\t\tdomNode['select-value'] = undefined;\n\t\t\t}\n\t\t} else if ((onInputValue && domValue === onInputValue) || propValue !== previousValue) {\n\t\t\tdomNode.value = propValue;\n\t\t\tdomNode['oninput-value'] = undefined;\n\t\t}\n\t}\n\n\tfunction setProperties(\n\t\tdomNode: HTMLElement,\n\t\tcurrentProperties: VNodeProperties = {},\n\t\tnextWrapper: VNodeWrapper,\n\t\tincludesEventsAndAttributes = true\n\t): void {\n\t\tconst propNames = Object.keys(nextWrapper.node.properties);\n\t\tconst propCount = propNames.length;\n\t\tif (propNames.indexOf('classes') === -1 && currentProperties.classes) {\n\t\t\tdomNode.removeAttribute('class');\n\t\t}\n\n\t\tincludesEventsAndAttributes && removeOrphanedEvents(domNode, currentProperties, nextWrapper.node.properties);\n\n\t\tfor (let i = 0; i < propCount; i++) {\n\t\t\tconst propName = propNames[i];\n\t\t\tlet propValue = nextWrapper.node.properties[propName];\n\t\t\tconst previousValue = currentProperties[propName];\n\t\t\tif (propName === 'classes') {\n\t\t\t\tconst previousClassString = createClassPropValue(previousValue);\n\t\t\t\tlet currentClassString = createClassPropValue(propValue);\n\t\t\t\tif (previousClassString !== currentClassString) {\n\t\t\t\t\tif (currentClassString) {\n\t\t\t\t\t\tif (nextWrapper.merged) {\n\t\t\t\t\t\t\tconst domClasses = (domNode.getAttribute('class') || '').split(' ');\n\t\t\t\t\t\t\tfor (let i = 0; i < domClasses.length; i++) {\n\t\t\t\t\t\t\t\tif (currentClassString.indexOf(domClasses[i]) === -1) {\n\t\t\t\t\t\t\t\t\tcurrentClassString = `${domClasses[i]} ${currentClassString}`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdomNode.setAttribute('class', currentClassString);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdomNode.removeAttribute('class');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (nodeOperations.indexOf(propName) !== -1) {\n\t\t\t\tnodeOperation(propName, propValue, previousValue, domNode);\n\t\t\t} else if (propName === 'styles') {\n\t\t\t\tconst styleNames = Object.keys(propValue);\n\t\t\t\tconst styleCount = styleNames.length;\n\t\t\t\tfor (let j = 0; j < styleCount; j++) {\n\t\t\t\t\tconst styleName = styleNames[j];\n\t\t\t\t\tconst newStyleValue = propValue[styleName];\n\t\t\t\t\tconst oldStyleValue = previousValue && previousValue[styleName];\n\t\t\t\t\tif (newStyleValue === oldStyleValue) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t(domNode.style as any)[styleName] = newStyleValue || '';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!propValue && typeof previousValue === 'string') {\n\t\t\t\t\tpropValue = '';\n\t\t\t\t}\n\t\t\t\tif (propName === 'value') {\n\t\t\t\t\tif ((domNode as HTMLElement).tagName === 'SELECT') {\n\t\t\t\t\t\t(domNode as any)['select-value'] = propValue;\n\t\t\t\t\t}\n\t\t\t\t\tsetValue(domNode, propValue, previousValue);\n\t\t\t\t} else if (propName !== 'key' && propValue !== previousValue) {\n\t\t\t\t\tconst type = typeof propValue;\n\t\t\t\t\tif (type === 'function' && propName.lastIndexOf('on', 0) === 0 && includesEventsAndAttributes) {\n\t\t\t\t\t\tupdateEvent(domNode, propName.substr(2), propValue, nextWrapper.node.bind, previousValue);\n\t\t\t\t\t} else if (type === 'string' && propName !== 'innerHTML' && includesEventsAndAttributes) {\n\t\t\t\t\t\tupdateAttribute(domNode, propName, propValue, nextWrapper.namespace);\n\t\t\t\t\t} else if (propName === 'scrollLeft' || propName === 'scrollTop') {\n\t\t\t\t\t\tif ((domNode as any)[propName] !== propValue) {\n\t\t\t\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction runDeferredRenderCallbacks() {\n\t\tconst { sync } = _mountOptions;\n\t\tconst callbacks = _deferredRenderCallbacks;\n\t\t_deferredRenderCallbacks = [];\n\t\tif (callbacks.length) {\n\t\t\tconst run = () => {\n\t\t\t\tlet callback: Function | undefined;\n\t\t\t\twhile ((callback = callbacks.shift())) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (sync) {\n\t\t\t\trun();\n\t\t\t} else {\n\t\t\t\tglobal.requestAnimationFrame(run);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction runAfterRenderCallbacks() {\n\t\tconst { sync } = _mountOptions;\n\t\tconst callbacks = _afterRenderCallbacks;\n\t\t_afterRenderCallbacks = [];\n\t\tif (callbacks.length) {\n\t\t\tconst run = () => {\n\t\t\t\tlet callback: Function | undefined;\n\t\t\t\twhile ((callback = callbacks.shift())) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (sync) {\n\t\t\t\trun();\n\t\t\t} else {\n\t\t\t\tif (global.requestIdleCallback) {\n\t\t\t\t\tglobal.requestIdleCallback(run);\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(run);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction processProperties(next: VNodeWrapper, previousProperties: PreviousProperties) {\n\t\tif (next.node.attributes && next.node.events) {\n\t\t\tupdateAttributes(\n\t\t\t\tnext.domNode as HTMLElement,\n\t\t\t\tpreviousProperties.attributes || {},\n\t\t\t\tnext.node.attributes,\n\t\t\t\tnext.namespace\n\t\t\t);\n\t\t\tsetProperties(next.domNode as HTMLElement, previousProperties.properties, next, false);\n\t\t\tconst events = next.node.events || {};\n\t\t\tif (previousProperties.events) {\n\t\t\t\tremoveOrphanedEvents(\n\t\t\t\t\tnext.domNode as HTMLElement,\n\t\t\t\t\tpreviousProperties.events || {},\n\t\t\t\t\tnext.node.events,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t\tpreviousProperties.events = previousProperties.events || {};\n\t\t\tObject.keys(events).forEach((event) => {\n\t\t\t\tupdateEvent(\n\t\t\t\t\tnext.domNode as HTMLElement,\n\t\t\t\t\tevent,\n\t\t\t\t\tevents[event],\n\t\t\t\t\tnext.node.bind,\n\t\t\t\t\tpreviousProperties.events[event]\n\t\t\t\t);\n\t\t\t});\n\t\t} else {\n\t\t\tsetProperties(next.domNode as HTMLElement, previousProperties.properties, next);\n\t\t}\n\t}\n\n\tfunction mount(mountOptions: Partial<MountOptions> = {}) {\n\t\t_mountOptions = { ..._mountOptions, ...mountOptions };\n\t\tconst { domNode } = _mountOptions;\n\t\tconst renderResult = w(wrapNodes(renderer), {});\n\t\tconst nextWrapper = {\n\t\t\tnode: renderResult,\n\t\t\torder: 0,\n\t\t\tdepth: 1\n\t\t};\n\t\t_parentWrapperMap.set(nextWrapper, { depth: 0, order: 0, domNode, node: v('fake') });\n\t\t_processQueue.push({\n\t\t\tcurrent: [],\n\t\t\tnext: [nextWrapper],\n\t\t\tmeta: { mergeNodes: arrayFrom(domNode.childNodes) }\n\t\t});\n\t\t_runProcessQueue();\n\t\tlet mergedNode: Node | undefined;\n\t\twhile ((mergedNode = _allMergedNodes.pop())) {\n\t\t\tmergedNode.parentNode && mergedNode.parentNode.removeChild(mergedNode);\n\t\t}\n\t\t_runDomInstructionQueue();\n\t\t_mountOptions.merge = false;\n\t\t_insertBeforeMap = undefined;\n\t\t_runCallbacks();\n\t}\n\n\tfunction invalidate() {\n\t\tparentInvalidate && parentInvalidate();\n\t}\n\n\tfunction _schedule(): void {\n\t\tconst { sync } = _mountOptions;\n\t\tif (sync) {\n\t\t\t_runInvalidationQueue();\n\t\t} else if (!_renderScheduled) {\n\t\t\t_renderScheduled = global.requestAnimationFrame(() => {\n\t\t\t\t_runInvalidationQueue();\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction _runInvalidationQueue() {\n\t\t_renderScheduled = undefined;\n\t\tconst invalidationQueue = [..._invalidationQueue];\n\t\tconst previouslyRendered = [];\n\t\t_invalidationQueue = [];\n\t\tinvalidationQueue.sort((a, b) => {\n\t\t\tlet result = b.depth - a.depth;\n\t\t\tif (result === 0) {\n\t\t\t\tresult = b.order - a.order;\n\t\t\t}\n\t\t\treturn result;\n\t\t});\n\t\tlet item: InvalidationQueueItem | undefined;\n\t\twhile ((item = invalidationQueue.pop())) {\n\t\t\tlet { instance } = item;\n\t\t\tif (previouslyRendered.indexOf(instance) === -1 && _instanceToWrapperMap.has(instance!)) {\n\t\t\t\tpreviouslyRendered.push(instance);\n\t\t\t\tconst current = _instanceToWrapperMap.get(instance)!;\n\t\t\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\t\t\tconst parent = _parentWrapperMap.get(current);\n\t\t\t\tconst sibling = _wrapperSiblingMap.get(current);\n\t\t\t\tconst { constructor, children } = instance;\n\t\t\t\tconst next = {\n\t\t\t\t\tnode: {\n\t\t\t\t\t\ttype: WNODE,\n\t\t\t\t\t\twidgetConstructor: constructor as WidgetBaseConstructor,\n\t\t\t\t\t\tproperties: instanceData.inputProperties,\n\t\t\t\t\t\tchildren: children,\n\t\t\t\t\t\tbind: current.node.bind\n\t\t\t\t\t},\n\t\t\t\t\tinstance,\n\t\t\t\t\tdepth: current.depth,\n\t\t\t\t\torder: current.order\n\t\t\t\t};\n\n\t\t\t\tparent && _parentWrapperMap.set(next, parent);\n\t\t\t\tsibling && _wrapperSiblingMap.set(next, sibling);\n\t\t\t\tconst { item } = _updateWidget({ current, next });\n\t\t\t\tif (item) {\n\t\t\t\t\t_processQueue.push(item);\n\t\t\t\t\tinstance && _instanceToWrapperMap.set(instance, next);\n\t\t\t\t\t_runProcessQueue();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_runDomInstructionQueue();\n\t\t_runCallbacks();\n\t}\n\n\tfunction _runProcessQueue() {\n\t\tlet item: DetachApplication | AttachApplication | ProcessItem | undefined;\n\t\twhile ((item = _processQueue.pop())) {\n\t\t\tif (isAttachApplication(item)) {\n\t\t\t\t_applicationQueue.push(item);\n\t\t\t} else {\n\t\t\t\tconst { current, next, meta } = item;\n\t\t\t\t_process(current || EMPTY_ARRAY, next || EMPTY_ARRAY, meta);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _runDomInstructionQueue(): void {\n\t\t_applicationQueue.reverse();\n\t\tlet item: ApplicationInstruction | undefined;\n\t\twhile ((item = _applicationQueue.pop())) {\n\t\t\tif (item.type === 'create') {\n\t\t\t\tconst {\n\t\t\t\t\tparentDomNode,\n\t\t\t\t\tnext,\n\t\t\t\t\tnext: {\n\t\t\t\t\t\tdomNode,\n\t\t\t\t\t\tmerged,\n\t\t\t\t\t\trequiresInsertBefore,\n\t\t\t\t\t\tnode: { properties }\n\t\t\t\t\t}\n\t\t\t\t} = item;\n\n\t\t\t\tprocessProperties(next, { properties: {} });\n\t\t\t\trunDeferredProperties(next);\n\t\t\t\tif (!merged) {\n\t\t\t\t\tlet insertBefore: any;\n\t\t\t\t\tif (requiresInsertBefore) {\n\t\t\t\t\t\tinsertBefore = findInsertBefore(next);\n\t\t\t\t\t} else if (_insertBeforeMap) {\n\t\t\t\t\t\tinsertBefore = _insertBeforeMap.get(next);\n\t\t\t\t\t}\n\t\t\t\t\tparentDomNode.insertBefore(domNode!, insertBefore);\n\t\t\t\t\tif (isDomVNode(next.node) && next.node.onAttach) {\n\t\t\t\t\t\tnext.node.onAttach();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ((domNode as HTMLElement).tagName === 'OPTION' && domNode!.parentElement) {\n\t\t\t\t\tsetValue(domNode!.parentElement);\n\t\t\t\t}\n\t\t\t\trunEnterAnimation(next, _mountOptions.transition);\n\t\t\t\tconst instanceData = widgetInstanceMap.get(next.node.bind as WidgetBase);\n\t\t\t\tif (properties.key != null && instanceData) {\n\t\t\t\t\tinstanceData.nodeHandler.add(domNode as HTMLElement, `${properties.key}`);\n\t\t\t\t}\n\t\t\t\titem.next.inserted = true;\n\t\t\t} else if (item.type === 'update') {\n\t\t\t\tconst {\n\t\t\t\t\tnext,\n\t\t\t\t\tnext: { domNode, node },\n\t\t\t\t\tcurrent\n\t\t\t\t} = item;\n\t\t\t\tconst parent = _parentWrapperMap.get(next);\n\t\t\t\tif (parent && isWNodeWrapper(parent) && parent.instance) {\n\t\t\t\t\tconst instanceData = widgetInstanceMap.get(parent.instance);\n\t\t\t\t\tinstanceData && instanceData.nodeHandler.addRoot();\n\t\t\t\t}\n\n\t\t\t\tconst previousProperties = buildPreviousProperties(domNode, current, next);\n\t\t\t\tconst instanceData = widgetInstanceMap.get(next.node.bind as WidgetBase);\n\n\t\t\t\tprocessProperties(next, previousProperties);\n\t\t\t\trunDeferredProperties(next);\n\n\t\t\t\tif (instanceData && node.properties.key != null) {\n\t\t\t\t\tinstanceData.nodeHandler.add(next.domNode as HTMLElement, `${node.properties.key}`);\n\t\t\t\t}\n\t\t\t} else if (item.type === 'delete') {\n\t\t\t\tconst { current } = item;\n\t\t\t\tconst { exitAnimation } = current.node.properties;\n\t\t\t\tif (exitAnimation && exitAnimation !== true) {\n\t\t\t\t\trunExitAnimation(current, _mountOptions.transition, exitAnimation);\n\t\t\t\t} else {\n\t\t\t\t\tcurrent.domNode!.parentNode!.removeChild(current.domNode!);\n\t\t\t\t\tcurrent.domNode = undefined;\n\t\t\t\t}\n\t\t\t} else if (item.type === 'attach') {\n\t\t\t\tconst { instance, attached } = item;\n\t\t\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\t\t\tinstanceData.nodeHandler.addRoot();\n\t\t\t\tattached && instanceData.onAttach();\n\t\t\t} else if (item.type === 'detach') {\n\t\t\t\tif (item.current.instance) {\n\t\t\t\t\tconst instanceData = widgetInstanceMap.get(item.current.instance);\n\t\t\t\t\tinstanceData && instanceData.onDetach();\n\t\t\t\t}\n\t\t\t\titem.current.domNode = undefined;\n\t\t\t\titem.current.node.bind = undefined;\n\t\t\t\titem.current.instance = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _runCallbacks() {\n\t\trunAfterRenderCallbacks();\n\t\trunDeferredRenderCallbacks();\n\t}\n\n\tfunction _processMergeNodes(next: DNodeWrapper, mergeNodes: Node[]) {\n\t\tconst { merge } = _mountOptions;\n\t\tif (merge && mergeNodes.length) {\n\t\t\tif (isVNodeWrapper(next)) {\n\t\t\t\tlet {\n\t\t\t\t\tnode: { tag }\n\t\t\t\t} = next;\n\t\t\t\tfor (let i = 0; i < mergeNodes.length; i++) {\n\t\t\t\t\tconst domElement = mergeNodes[i] as Element;\n\t\t\t\t\tif (tag.toUpperCase() === (domElement.tagName || '')) {\n\t\t\t\t\t\tconst mergeNodeIndex = _allMergedNodes.indexOf(domElement);\n\t\t\t\t\t\tif (mergeNodeIndex !== -1) {\n\t\t\t\t\t\t\t_allMergedNodes.splice(mergeNodeIndex, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmergeNodes.splice(i, 1);\n\t\t\t\t\t\tnext.domNode = domElement;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnext.mergeNodes = mergeNodes;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction registerDistinguishableCallback(childNodes: DNodeWrapper[], index: number) {\n\t\t_afterRenderCallbacks.push(() => {\n\t\t\tconst parentWNodeWrapper = findParentWNodeWrapper(childNodes[index]);\n\t\t\tcheckDistinguishable(childNodes, index, parentWNodeWrapper);\n\t\t});\n\t}\n\n\tfunction _process(current: DNodeWrapper[], next: DNodeWrapper[], meta: ProcessMeta = {}): void {\n\t\tlet { mergeNodes = [], oldIndex = 0, newIndex = 0 } = meta;\n\t\tconst currentLength = current.length;\n\t\tconst nextLength = next.length;\n\t\tconst hasPreviousSiblings = currentLength > 1 || (currentLength > 0 && currentLength < nextLength);\n\t\tconst instructions: Instruction[] = [];\n\t\tif (newIndex < nextLength) {\n\t\t\tlet currentWrapper = oldIndex < currentLength ? current[oldIndex] : undefined;\n\t\t\tconst nextWrapper = next[newIndex];\n\t\t\tnextWrapper.hasPreviousSiblings = hasPreviousSiblings;\n\n\t\t\t_processMergeNodes(nextWrapper, mergeNodes);\n\n\t\t\tif (currentWrapper && same(currentWrapper, nextWrapper)) {\n\t\t\t\toldIndex++;\n\t\t\t\tnewIndex++;\n\t\t\t\tif (isVNodeWrapper(currentWrapper) && isVNodeWrapper(nextWrapper)) {\n\t\t\t\t\tnextWrapper.inserted = currentWrapper.inserted;\n\t\t\t\t}\n\t\t\t\tinstructions.push({ current: currentWrapper, next: nextWrapper });\n\t\t\t} else if (!currentWrapper || findIndexOfChild(current, nextWrapper, oldIndex + 1) === -1) {\n\t\t\t\thas('dojo-debug') && current.length && registerDistinguishableCallback(next, newIndex);\n\t\t\t\tinstructions.push({ current: undefined, next: nextWrapper });\n\t\t\t\tnewIndex++;\n\t\t\t} else if (findIndexOfChild(next, currentWrapper, newIndex + 1) === -1) {\n\t\t\t\thas('dojo-debug') && registerDistinguishableCallback(current, oldIndex);\n\t\t\t\tinstructions.push({ current: currentWrapper, next: undefined });\n\t\t\t\toldIndex++;\n\t\t\t} else {\n\t\t\t\thas('dojo-debug') && registerDistinguishableCallback(next, newIndex);\n\t\t\t\thas('dojo-debug') && registerDistinguishableCallback(current, oldIndex);\n\t\t\t\tinstructions.push({ current: currentWrapper, next: undefined });\n\t\t\t\tinstructions.push({ current: undefined, next: nextWrapper });\n\t\t\t\toldIndex++;\n\t\t\t\tnewIndex++;\n\t\t\t}\n\t\t}\n\n\t\tif (newIndex < nextLength) {\n\t\t\t_processQueue.push({ current, next, meta: { mergeNodes, oldIndex, newIndex } });\n\t\t}\n\n\t\tif (currentLength > oldIndex && newIndex >= nextLength) {\n\t\t\tfor (let i = oldIndex; i < currentLength; i++) {\n\t\t\t\thas('dojo-debug') && registerDistinguishableCallback(current, i);\n\t\t\t\tinstructions.push({ current: current[i], next: undefined });\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < instructions.length; i++) {\n\t\t\tconst { item, dom, widget } = _processOne(instructions[i]);\n\t\t\twidget && _processQueue.push(widget);\n\t\t\titem && _processQueue.push(item);\n\t\t\tdom && _applicationQueue.push(dom);\n\t\t}\n\t}\n\n\tfunction _processOne({ current, next }: Instruction): ProcessResult {\n\t\tif (current !== next) {\n\t\t\tif (!current && next) {\n\t\t\t\tif (isVNodeWrapper(next)) {\n\t\t\t\t\treturn _createDom({ next });\n\t\t\t\t} else {\n\t\t\t\t\treturn _createWidget({ next });\n\t\t\t\t}\n\t\t\t} else if (current && next) {\n\t\t\t\tif (isVNodeWrapper(current) && isVNodeWrapper(next)) {\n\t\t\t\t\treturn _updateDom({ current, next });\n\t\t\t\t} else if (isWNodeWrapper(current) && isWNodeWrapper(next)) {\n\t\t\t\t\treturn _updateWidget({ current, next });\n\t\t\t\t}\n\t\t\t} else if (current && !next) {\n\t\t\t\tif (isVNodeWrapper(current)) {\n\t\t\t\t\treturn _removeDom({ current });\n\t\t\t\t} else if (isWNodeWrapper(current)) {\n\t\t\t\t\treturn _removeWidget({ current });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t}\n\n\tfunction _createWidget({ next }: CreateWidgetInstruction): ProcessResult {\n\t\tlet {\n\t\t\tnode: { widgetConstructor }\n\t\t} = next;\n\t\tlet { registry } = _mountOptions;\n\t\tif (!isWidgetBaseConstructor(widgetConstructor)) {\n\t\t\treturn {};\n\t\t}\n\t\tconst instance = new widgetConstructor() as WidgetBase;\n\t\tif (registry) {\n\t\t\tinstance.registry.base = registry;\n\t\t}\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.invalidate = () => {\n\t\t\tinstanceData.dirty = true;\n\t\t\tif (!instanceData.rendering && _instanceToWrapperMap.has(instance)) {\n\t\t\t\t_invalidationQueue.push({ instance, depth: next.depth, order: next.order });\n\t\t\t\t_schedule();\n\t\t\t}\n\t\t};\n\t\tinstanceData.rendering = true;\n\t\tinstance.__setProperties__(next.node.properties, next.node.bind);\n\t\tinstance.__setChildren__(next.node.children);\n\t\tnext.instance = instance;\n\t\tlet rendered = instance.__render__();\n\t\tinstanceData.rendering = false;\n\t\tif (rendered) {\n\t\t\trendered = Array.isArray(rendered) ? rendered : [rendered];\n\t\t\tnext.childrenWrappers = renderedToWrapper(rendered, next, null);\n\t\t}\n\t\tif (next.instance) {\n\t\t\t_instanceToWrapperMap.set(next.instance, next);\n\t\t\tif (!parentInvalidate && !(next.instance as any).isWNodeWrapper) {\n\t\t\t\tparentInvalidate = next.instance.invalidate.bind(next.instance);\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\titem: { next: next.childrenWrappers, meta: { mergeNodes: next.mergeNodes } },\n\t\t\twidget: { type: 'attach', instance, attached: true }\n\t\t};\n\t}\n\n\tfunction _updateWidget({ current, next }: UpdateWidgetInstruction): ProcessResult {\n\t\tcurrent = (current.instance && _instanceToWrapperMap.get(current.instance)) || current;\n\t\tconst { instance, domNode, hasAnimations } = current;\n\t\tif (!instance) {\n\t\t\treturn [] as ProcessResult;\n\t\t}\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tnext.instance = instance;\n\t\tnext.domNode = domNode;\n\t\tnext.hasAnimations = hasAnimations;\n\t\tinstanceData.rendering = true;\n\t\tinstance!.__setProperties__(next.node.properties, next.node.bind);\n\t\tinstance!.__setChildren__(next.node.children);\n\t\t_instanceToWrapperMap.set(next.instance!, next);\n\t\tif (instanceData.dirty) {\n\t\t\tlet rendered = instance!.__render__();\n\t\t\tinstanceData.rendering = false;\n\t\t\tif (rendered) {\n\t\t\t\trendered = Array.isArray(rendered) ? rendered : [rendered];\n\t\t\t\tnext.childrenWrappers = renderedToWrapper(rendered, next, current);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\titem: { current: current.childrenWrappers, next: next.childrenWrappers, meta: {} },\n\t\t\t\twidget: { type: 'attach', instance, attached: false }\n\t\t\t};\n\t\t}\n\t\tinstanceData.rendering = false;\n\t\tnext.childrenWrappers = current.childrenWrappers;\n\t\treturn {\n\t\t\twidget: { type: 'attach', instance, attached: false }\n\t\t};\n\t}\n\n\tfunction _removeWidget({ current }: RemoveWidgetInstruction): ProcessResult {\n\t\tcurrent = current.instance ? _instanceToWrapperMap.get(current.instance)! : current;\n\t\t_wrapperSiblingMap.delete(current);\n\t\t_parentWrapperMap.delete(current);\n\t\t_instanceToWrapperMap.delete(current.instance!);\n\n\t\treturn {\n\t\t\titem: { current: current.childrenWrappers, meta: {} },\n\t\t\twidget: { type: 'detach', current }\n\t\t};\n\t}\n\n\tfunction _createDom({ next }: CreateDomInstruction): ProcessResult {\n\t\tlet mergeNodes: Node[] = [];\n\t\tconst parentDomNode = findParentDomNode(next)!;\n\t\tif (!next.domNode) {\n\t\t\tif ((next.node as any).domNode) {\n\t\t\t\tnext.domNode = (next.node as any).domNode;\n\t\t\t} else {\n\t\t\t\tif (next.node.tag === 'svg') {\n\t\t\t\t\tnext.namespace = NAMESPACE_SVG;\n\t\t\t\t}\n\t\t\t\tif (next.node.tag) {\n\t\t\t\t\tif (next.namespace) {\n\t\t\t\t\t\tnext.domNode = global.document.createElementNS(next.namespace, next.node.tag);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext.domNode = global.document.createElement(next.node.tag);\n\t\t\t\t\t}\n\t\t\t\t} else if (next.node.text != null) {\n\t\t\t\t\tnext.domNode = global.document.createTextNode(next.node.text);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (_insertBeforeMap && _allMergedNodes.length) {\n\t\t\t\tif (parentDomNode === _allMergedNodes[0].parentNode) {\n\t\t\t\t\t_insertBeforeMap.set(next, _allMergedNodes[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (_mountOptions.merge) {\n\t\t\t\tmergeNodes = arrayFrom(next.domNode.childNodes);\n\t\t\t\t_allMergedNodes = [..._allMergedNodes, ...mergeNodes];\n\t\t\t}\n\t\t\tnext.merged = true;\n\t\t}\n\t\tif (next.domNode) {\n\t\t\tif (next.node.children) {\n\t\t\t\tnext.childrenWrappers = renderedToWrapper(next.node.children, next, null);\n\t\t\t}\n\t\t}\n\t\tconst parentWNodeWrapper = findParentWNodeWrapper(next);\n\t\tif (parentWNodeWrapper && !parentWNodeWrapper.domNode) {\n\t\t\tparentWNodeWrapper.domNode = next.domNode;\n\t\t}\n\t\tconst dom: ApplicationInstruction = {\n\t\t\tnext: next!,\n\t\t\tparentDomNode: parentDomNode,\n\t\t\ttype: 'create'\n\t\t};\n\t\tif (next.childrenWrappers) {\n\t\t\treturn {\n\t\t\t\titem: { current: [], next: next.childrenWrappers, meta: { mergeNodes } },\n\t\t\t\tdom\n\t\t\t};\n\t\t}\n\t\treturn { dom };\n\t}\n\n\tfunction _updateDom({ current, next }: UpdateDomInstruction): ProcessResult {\n\t\tconst parentDomNode = findParentDomNode(current);\n\t\tnext.domNode = current.domNode;\n\t\tnext.namespace = current.namespace;\n\t\tif (next.node.text && next.node.text !== current.node.text) {\n\t\t\tconst updatedTextNode = parentDomNode!.ownerDocument.createTextNode(next.node.text!);\n\t\t\tparentDomNode!.replaceChild(updatedTextNode, next.domNode!);\n\t\t\tnext.domNode = updatedTextNode;\n\t\t} else if (next.node.children) {\n\t\t\tconst children = renderedToWrapper(next.node.children, next, current);\n\t\t\tnext.childrenWrappers = children;\n\t\t}\n\t\treturn {\n\t\t\titem: { current: current.childrenWrappers, next: next.childrenWrappers, meta: {} },\n\t\t\tdom: { type: 'update', next, current }\n\t\t};\n\t}\n\n\tfunction _removeDom({ current }: RemoveDomInstruction): ProcessResult {\n\t\t_wrapperSiblingMap.delete(current);\n\t\t_parentWrapperMap.delete(current);\n\t\tcurrent.node.bind = undefined;\n\t\tif (current.hasAnimations) {\n\t\t\treturn {\n\t\t\t\titem: { current: current.childrenWrappers, meta: {} },\n\t\t\t\tdom: { type: 'delete', current }\n\t\t\t};\n\t\t}\n\n\t\tif (current.childrenWrappers) {\n\t\t\t_afterRenderCallbacks.push(() => {\n\t\t\t\tlet wrappers = current.childrenWrappers || [];\n\t\t\t\tlet wrapper: DNodeWrapper | undefined;\n\t\t\t\twhile ((wrapper = wrappers.pop())) {\n\t\t\t\t\tif (wrapper.childrenWrappers) {\n\t\t\t\t\t\twrappers.push(...wrapper.childrenWrappers);\n\t\t\t\t\t\twrapper.childrenWrappers = undefined;\n\t\t\t\t\t}\n\t\t\t\t\tif (isWNodeWrapper(wrapper)) {\n\t\t\t\t\t\tif (wrapper.instance) {\n\t\t\t\t\t\t\t_instanceToWrapperMap.delete(wrapper.instance);\n\t\t\t\t\t\t\tconst instanceData = widgetInstanceMap.get(wrapper.instance);\n\t\t\t\t\t\t\tinstanceData && instanceData.onDetach();\n\t\t\t\t\t\t}\n\t\t\t\t\t\twrapper.instance = undefined;\n\t\t\t\t\t}\n\t\t\t\t\t_wrapperSiblingMap.delete(wrapper);\n\t\t\t\t\t_parentWrapperMap.delete(wrapper);\n\t\t\t\t\twrapper.domNode = undefined;\n\t\t\t\t\twrapper.node.bind = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tdom: { type: 'delete', current }\n\t\t};\n\t}\n\n\treturn {\n\t\tmount,\n\t\tinvalidate\n\t};\n}\n\nexport default renderer;\n","import global from './global';\nimport has from '../has/has';\nimport { wrapNative } from './support/util';\n\nexport interface StringNormalize {\n\t/**\n\t * Returns the String value result of normalizing the string into the normalization form\n\t * named by form as specified in Unicode Standard Annex #15, Unicode Normalization Forms.\n\t * @param target The target string\n\t * @param form Applicable values: \"NFC\", \"NFD\", \"NFKC\", or \"NFKD\", If not specified default\n\t * is \"NFC\"\n\t */\n\t(target: string, form: 'NFC' | 'NFD' | 'NFKC' | 'NFKD'): string;\n\n\t/**\n\t * Returns the String value result of normalizing the string into the normalization form\n\t * named by form as specified in Unicode Standard Annex #15, Unicode Normalization Forms.\n\t * @param target The target string\n\t * @param form Applicable values: \"NFC\", \"NFD\", \"NFKC\", or \"NFKD\", If not specified default\n\t * is \"NFC\"\n\t */\n\t(target: string, form?: string): string;\n}\n\n/**\n * The minimum location of high surrogates\n */\nexport const HIGH_SURROGATE_MIN = 0xd800;\n\n/**\n * The maximum location of high surrogates\n */\nexport const HIGH_SURROGATE_MAX = 0xdbff;\n\n/**\n * The minimum location of low surrogates\n */\nexport const LOW_SURROGATE_MIN = 0xdc00;\n\n/**\n * The maximum location of low surrogates\n */\nexport const LOW_SURROGATE_MAX = 0xdfff;\n\n/* ES6 static methods */\n\n/**\n * Return the String value whose elements are, in order, the elements in the List elements.\n * If length is 0, the empty string is returned.\n * @param codePoints The code points to generate the string\n */\nexport let fromCodePoint: (...codePoints: number[]) => string;\n\n/**\n * `raw` is intended for use as a tag function of a Tagged Template String. When called\n * as such the first argument will be a well formed template call site object and the rest\n * parameter will contain the substitution values.\n * @param template A well-formed template string call site representation.\n * @param substitutions A set of substitution values.\n */\nexport let raw: (template: TemplateStringsArray, ...substitutions: any[]) => string;\n\n/* ES6 instance methods */\n\n/**\n * Returns a nonnegative integer Number less than 1114112 (0x110000) that is the code point\n * value of the UTF-16 encoded code point starting at the string element at position pos in\n * the String resulting from converting this object to a String.\n * If there is no element at that position, the result is undefined.\n * If a valid UTF-16 surrogate pair does not begin at pos, the result is the code unit at pos.\n */\nexport let codePointAt: (target: string, pos?: number) => number | undefined;\n\n/**\n * Returns true if the sequence of elements of searchString converted to a String is the\n * same as the corresponding elements of this object (converted to a String) starting at\n * endPosition – length(this). Otherwise returns false.\n */\nexport let endsWith: (target: string, searchString: string, endPosition?: number) => boolean;\n\n/**\n * Returns true if searchString appears as a substring of the result of converting this\n * object to a String, at one or more positions that are\n * greater than or equal to position; otherwise, returns false.\n * @param target The target string\n * @param searchString search string\n * @param position If position is undefined, 0 is assumed, so as to search all of the String.\n */\nexport let includes: (target: string, searchString: string, position?: number) => boolean;\n\n/**\n * Returns the String value result of normalizing the string into the normalization form\n * named by form as specified in Unicode Standard Annex #15, Unicode Normalization Forms.\n * @param target The target string\n * @param form Applicable values: \"NFC\", \"NFD\", \"NFKC\", or \"NFKD\", If not specified default\n * is \"NFC\"\n */\nexport let normalize: StringNormalize;\n\n/**\n * Returns a String value that is made from count copies appended together. If count is 0,\n * T is the empty String is returned.\n * @param count number of copies to append\n */\nexport let repeat: (target: string, count?: number) => string;\n\n/**\n * Returns true if the sequence of elements of searchString converted to a String is the\n * same as the corresponding elements of this object (converted to a String) starting at\n * position. Otherwise returns false.\n */\nexport let startsWith: (target: string, searchString: string, position?: number) => boolean;\n\n/* ES7 instance methods */\n\n/**\n * Pads the current string with a given string (possibly repeated) so that the resulting string reaches a given length.\n * The padding is applied from the end (right) of the current string.\n *\n * @param target The target string\n * @param maxLength The length of the resulting string once the current string has been padded.\n *        If this parameter is smaller than the current string's length, the current string will be returned as it is.\n *\n * @param fillString The string to pad the current string with.\n *        If this string is too long, it will be truncated and the left-most part will be applied.\n *        The default value for this parameter is \" \" (U+0020).\n */\nexport let padEnd: (target: string, maxLength: number, fillString?: string) => string;\n\n/**\n * Pads the current string with a given string (possibly repeated) so that the resulting string reaches a given length.\n * The padding is applied from the start (left) of the current string.\n *\n * @param target The target string\n * @param maxLength The length of the resulting string once the current string has been padded.\n *        If this parameter is smaller than the current string's length, the current string will be returned as it is.\n *\n * @param fillString The string to pad the current string with.\n *        If this string is too long, it will be truncated and the left-most part will be applied.\n *        The default value for this parameter is \" \" (U+0020).\n */\nexport let padStart: (target: string, maxLength: number, fillString?: string) => string;\n\nif (has('es6-string') && has('es6-string-raw')) {\n\tfromCodePoint = global.String.fromCodePoint;\n\traw = global.String.raw;\n\n\tcodePointAt = wrapNative(global.String.prototype.codePointAt);\n\tendsWith = wrapNative(global.String.prototype.endsWith);\n\tincludes = wrapNative(global.String.prototype.includes);\n\tnormalize = wrapNative(global.String.prototype.normalize);\n\trepeat = wrapNative(global.String.prototype.repeat);\n\tstartsWith = wrapNative(global.String.prototype.startsWith);\n} else {\n\t/**\n\t * Validates that text is defined, and normalizes position (based on the given default if the input is NaN).\n\t * Used by startsWith, includes, and endsWith.\n\t *\n\t * @return Normalized position.\n\t */\n\tconst normalizeSubstringArgs = function(\n\t\tname: string,\n\t\ttext: string,\n\t\tsearch: string,\n\t\tposition: number,\n\t\tisEnd: boolean = false\n\t): [string, string, number] {\n\t\tif (text == null) {\n\t\t\tthrow new TypeError('string.' + name + ' requires a valid string to search against.');\n\t\t}\n\n\t\tconst length = text.length;\n\t\tposition = position !== position ? (isEnd ? length : 0) : position;\n\t\treturn [text, String(search), Math.min(Math.max(position, 0), length)];\n\t};\n\n\tfromCodePoint = function fromCodePoint(...codePoints: number[]): string {\n\t\t// Adapted from https://github.com/mathiasbynens/String.fromCodePoint\n\t\tconst length = arguments.length;\n\t\tif (!length) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst fromCharCode = String.fromCharCode;\n\t\tconst MAX_SIZE = 0x4000;\n\t\tlet codeUnits: number[] = [];\n\t\tlet index = -1;\n\t\tlet result = '';\n\n\t\twhile (++index < length) {\n\t\t\tlet codePoint = Number(arguments[index]);\n\n\t\t\t// Code points must be finite integers within the valid range\n\t\t\tlet isValid =\n\t\t\t\tisFinite(codePoint) && Math.floor(codePoint) === codePoint && codePoint >= 0 && codePoint <= 0x10ffff;\n\t\t\tif (!isValid) {\n\t\t\t\tthrow RangeError('string.fromCodePoint: Invalid code point ' + codePoint);\n\t\t\t}\n\n\t\t\tif (codePoint <= 0xffff) {\n\t\t\t\t// BMP code point\n\t\t\t\tcodeUnits.push(codePoint);\n\t\t\t} else {\n\t\t\t\t// Astral code point; split in surrogate halves\n\t\t\t\t// https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n\t\t\t\tcodePoint -= 0x10000;\n\t\t\t\tlet highSurrogate = (codePoint >> 10) + HIGH_SURROGATE_MIN;\n\t\t\t\tlet lowSurrogate = (codePoint % 0x400) + LOW_SURROGATE_MIN;\n\t\t\t\tcodeUnits.push(highSurrogate, lowSurrogate);\n\t\t\t}\n\n\t\t\tif (index + 1 === length || codeUnits.length > MAX_SIZE) {\n\t\t\t\tresult += fromCharCode.apply(null, codeUnits);\n\t\t\t\tcodeUnits.length = 0;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n\n\traw = function raw(callSite: TemplateStringsArray, ...substitutions: any[]): string {\n\t\tlet rawStrings = callSite.raw;\n\t\tlet result = '';\n\t\tlet numSubstitutions = substitutions.length;\n\n\t\tif (callSite == null || callSite.raw == null) {\n\t\t\tthrow new TypeError('string.raw requires a valid callSite object with a raw value');\n\t\t}\n\n\t\tfor (let i = 0, length = rawStrings.length; i < length; i++) {\n\t\t\tresult += rawStrings[i] + (i < numSubstitutions && i < length - 1 ? substitutions[i] : '');\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tcodePointAt = function codePointAt(text: string, position: number = 0): number | undefined {\n\t\t// Adapted from https://github.com/mathiasbynens/String.prototype.codePointAt\n\t\tif (text == null) {\n\t\t\tthrow new TypeError('string.codePointAt requries a valid string.');\n\t\t}\n\t\tconst length = text.length;\n\n\t\tif (position !== position) {\n\t\t\tposition = 0;\n\t\t}\n\t\tif (position < 0 || position >= length) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Get the first code unit\n\t\tconst first = text.charCodeAt(position);\n\t\tif (first >= HIGH_SURROGATE_MIN && first <= HIGH_SURROGATE_MAX && length > position + 1) {\n\t\t\t// Start of a surrogate pair (high surrogate and there is a next code unit); check for low surrogate\n\t\t\t// https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n\t\t\tconst second = text.charCodeAt(position + 1);\n\t\t\tif (second >= LOW_SURROGATE_MIN && second <= LOW_SURROGATE_MAX) {\n\t\t\t\treturn (first - HIGH_SURROGATE_MIN) * 0x400 + second - LOW_SURROGATE_MIN + 0x10000;\n\t\t\t}\n\t\t}\n\t\treturn first;\n\t};\n\n\tendsWith = function endsWith(text: string, search: string, endPosition?: number): boolean {\n\t\tif (search === '') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (typeof endPosition === 'undefined') {\n\t\t\tendPosition = text.length;\n\t\t} else if (endPosition === null || isNaN(endPosition)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t[text, search, endPosition] = normalizeSubstringArgs('endsWith', text, search, endPosition, true);\n\n\t\tconst start = endPosition - search.length;\n\t\tif (start < 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn text.slice(start, endPosition) === search;\n\t};\n\n\tincludes = function includes(text: string, search: string, position: number = 0): boolean {\n\t\t[text, search, position] = normalizeSubstringArgs('includes', text, search, position);\n\t\treturn text.indexOf(search, position) !== -1;\n\t};\n\n\trepeat = function repeat(text: string, count: number = 0): string {\n\t\t// Adapted from https://github.com/mathiasbynens/String.prototype.repeat\n\t\tif (text == null) {\n\t\t\tthrow new TypeError('string.repeat requires a valid string.');\n\t\t}\n\t\tif (count !== count) {\n\t\t\tcount = 0;\n\t\t}\n\t\tif (count < 0 || count === Infinity) {\n\t\t\tthrow new RangeError('string.repeat requires a non-negative finite count.');\n\t\t}\n\n\t\tlet result = '';\n\t\twhile (count) {\n\t\t\tif (count % 2) {\n\t\t\t\tresult += text;\n\t\t\t}\n\t\t\tif (count > 1) {\n\t\t\t\ttext += text;\n\t\t\t}\n\t\t\tcount >>= 1;\n\t\t}\n\t\treturn result;\n\t};\n\n\tstartsWith = function startsWith(text: string, search: string, position: number = 0): boolean {\n\t\tsearch = String(search);\n\t\t[text, search, position] = normalizeSubstringArgs('startsWith', text, search, position);\n\n\t\tconst end = position + search.length;\n\t\tif (end > text.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn text.slice(position, end) === search;\n\t};\n}\n\nif (has('es2017-string')) {\n\tpadEnd = wrapNative(global.String.prototype.padEnd);\n\tpadStart = wrapNative(global.String.prototype.padStart);\n} else {\n\tpadEnd = function padEnd(text: string, maxLength: number, fillString: string = ' '): string {\n\t\tif (text === null || text === undefined) {\n\t\t\tthrow new TypeError('string.repeat requires a valid string.');\n\t\t}\n\n\t\tif (maxLength === Infinity) {\n\t\t\tthrow new RangeError('string.padEnd requires a non-negative finite count.');\n\t\t}\n\n\t\tif (maxLength === null || maxLength === undefined || maxLength < 0) {\n\t\t\tmaxLength = 0;\n\t\t}\n\n\t\tlet strText = String(text);\n\t\tconst padding = maxLength - strText.length;\n\n\t\tif (padding > 0) {\n\t\t\tstrText +=\n\t\t\t\trepeat(fillString, Math.floor(padding / fillString.length)) +\n\t\t\t\tfillString.slice(0, padding % fillString.length);\n\t\t}\n\n\t\treturn strText;\n\t};\n\n\tpadStart = function padStart(text: string, maxLength: number, fillString: string = ' '): string {\n\t\tif (text === null || text === undefined) {\n\t\t\tthrow new TypeError('string.repeat requires a valid string.');\n\t\t}\n\n\t\tif (maxLength === Infinity) {\n\t\t\tthrow new RangeError('string.padStart requires a non-negative finite count.');\n\t\t}\n\n\t\tif (maxLength === null || maxLength === undefined || maxLength < 0) {\n\t\t\tmaxLength = 0;\n\t\t}\n\n\t\tlet strText = String(text);\n\t\tconst padding = maxLength - strText.length;\n\n\t\tif (padding > 0) {\n\t\t\tstrText =\n\t\t\t\trepeat(fillString, Math.floor(padding / fillString.length)) +\n\t\t\t\tfillString.slice(0, padding % fillString.length) +\n\t\t\t\tstrText;\n\t\t}\n\n\t\treturn strText;\n\t};\n}\n","import { VNodeProperties } from './../interfaces';\n\nlet browserSpecificTransitionEndEventName = '';\nlet browserSpecificAnimationEndEventName = '';\n\nfunction determineBrowserStyleNames(element: HTMLElement) {\n\tif ('WebkitTransition' in element.style) {\n\t\tbrowserSpecificTransitionEndEventName = 'webkitTransitionEnd';\n\t\tbrowserSpecificAnimationEndEventName = 'webkitAnimationEnd';\n\t} else if ('transition' in element.style || 'MozTransition' in element.style) {\n\t\tbrowserSpecificTransitionEndEventName = 'transitionend';\n\t\tbrowserSpecificAnimationEndEventName = 'animationend';\n\t} else {\n\t\tthrow new Error('Your browser is not supported');\n\t}\n}\n\nfunction initialize(element: HTMLElement) {\n\tif (browserSpecificAnimationEndEventName === '') {\n\t\tdetermineBrowserStyleNames(element);\n\t}\n}\n\nfunction runAndCleanUp(element: HTMLElement, startAnimation: () => void, finishAnimation: () => void) {\n\tinitialize(element);\n\n\tlet finished = false;\n\n\tlet transitionEnd = function() {\n\t\tif (!finished) {\n\t\t\tfinished = true;\n\t\t\telement.removeEventListener(browserSpecificTransitionEndEventName, transitionEnd);\n\t\t\telement.removeEventListener(browserSpecificAnimationEndEventName, transitionEnd);\n\n\t\t\tfinishAnimation();\n\t\t}\n\t};\n\n\tstartAnimation();\n\n\telement.addEventListener(browserSpecificAnimationEndEventName, transitionEnd);\n\telement.addEventListener(browserSpecificTransitionEndEventName, transitionEnd);\n}\n\nfunction exit(node: HTMLElement, properties: VNodeProperties, exitAnimation: string, removeNode: () => void) {\n\tconst activeClass = properties.exitAnimationActive || `${exitAnimation}-active`;\n\n\trunAndCleanUp(\n\t\tnode,\n\t\t() => {\n\t\t\tnode.classList.add(exitAnimation);\n\n\t\t\trequestAnimationFrame(function() {\n\t\t\t\tnode.classList.add(activeClass);\n\t\t\t});\n\t\t},\n\t\t() => {\n\t\t\tremoveNode();\n\t\t}\n\t);\n}\n\nfunction enter(node: HTMLElement, properties: VNodeProperties, enterAnimation: string) {\n\tconst activeClass = properties.enterAnimationActive || `${enterAnimation}-active`;\n\n\trunAndCleanUp(\n\t\tnode,\n\t\t() => {\n\t\t\tnode.classList.add(enterAnimation);\n\n\t\t\trequestAnimationFrame(function() {\n\t\t\t\tnode.classList.add(activeClass);\n\t\t\t});\n\t\t},\n\t\t() => {\n\t\t\tnode.classList.remove(enterAnimation);\n\t\t\tnode.classList.remove(activeClass);\n\t\t}\n\t);\n}\n\nexport default {\n\tenter,\n\texit\n};\n","import global from './global';\nimport has from '../has/has';\nimport { isSymbol } from './Symbol';\n\nexport interface ObjectAssign {\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param source The source object from which to copy properties.\n\t */\n\t<T, U>(target: T, source: U): T & U;\n\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param source1 The first source object from which to copy properties.\n\t * @param source2 The second source object from which to copy properties.\n\t */\n\t<T, U, V>(target: T, source1: U, source2: V): T & U & V;\n\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param source1 The first source object from which to copy properties.\n\t * @param source2 The second source object from which to copy properties.\n\t * @param source3 The third source object from which to copy properties.\n\t */\n\t<T, U, V, W>(target: T, source1: U, source2: V, source3: W): T & U & V & W;\n\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param sources One or more source objects from which to copy properties\n\t */\n\t(target: object, ...sources: any[]): any;\n}\n\nexport interface ObjectEnteries {\n\t/**\n\t * Returns an array of key/values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t<T extends { [key: string]: any }, K extends keyof T>(o: T): [keyof T, T[K]][];\n\n\t/**\n\t * Returns an array of key/values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t(o: object): [string, any][];\n}\n\nexport interface ObjectGetOwnPropertyDescriptors {\n\t<T>(o: T): { [K in keyof T]: PropertyDescriptor };\n\t(o: any): { [key: string]: PropertyDescriptor };\n}\n\nexport interface ObjectValues {\n\t/**\n\t * Returns an array of values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t<T>(o: { [s: string]: T }): T[];\n\n\t/**\n\t * Returns an array of values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t(o: object): any[];\n}\n\nexport let assign: ObjectAssign;\n\n/**\n * Gets the own property descriptor of the specified object.\n * An own property descriptor is one that is defined directly on the object and is not\n * inherited from the object's prototype.\n * @param o Object that contains the property.\n * @param p Name of the property.\n */\nexport let getOwnPropertyDescriptor: <T, K extends keyof T>(o: T, propertyKey: K) => PropertyDescriptor | undefined;\n\n/**\n * Returns the names of the own properties of an object. The own properties of an object are those that are defined directly\n * on that object, and are not inherited from the object's prototype. The properties of an object include both fields (objects) and functions.\n * @param o Object that contains the own properties.\n */\nexport let getOwnPropertyNames: (o: any) => string[];\n\n/**\n * Returns an array of all symbol properties found directly on object o.\n * @param o Object to retrieve the symbols from.\n */\nexport let getOwnPropertySymbols: (o: any) => symbol[];\n\n/**\n * Returns true if the values are the same value, false otherwise.\n * @param value1 The first value.\n * @param value2 The second value.\n */\nexport let is: (value1: any, value2: any) => boolean;\n\n/**\n * Returns the names of the enumerable properties and methods of an object.\n * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n */\nexport let keys: (o: object) => string[];\n\n/* ES7 Object static methods */\n\nexport let getOwnPropertyDescriptors: ObjectGetOwnPropertyDescriptors;\n\nexport let entries: ObjectEnteries;\n\nexport let values: ObjectValues;\n\nif (has('es6-object')) {\n\tconst globalObject = global.Object;\n\tassign = globalObject.assign;\n\tgetOwnPropertyDescriptor = globalObject.getOwnPropertyDescriptor;\n\tgetOwnPropertyNames = globalObject.getOwnPropertyNames;\n\tgetOwnPropertySymbols = globalObject.getOwnPropertySymbols;\n\tis = globalObject.is;\n\tkeys = globalObject.keys;\n} else {\n\tkeys = function symbolAwareKeys(o: object): string[] {\n\t\treturn Object.keys(o).filter((key) => !Boolean(key.match(/^@@.+/)));\n\t};\n\n\tassign = function assign(target: any, ...sources: any[]) {\n\t\tif (target == null) {\n\t\t\t// TypeError if undefined or null\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\n\t\t}\n\n\t\tconst to = Object(target);\n\t\tsources.forEach((nextSource) => {\n\t\t\tif (nextSource) {\n\t\t\t\t// Skip over if undefined or null\n\t\t\t\tkeys(nextSource).forEach((nextKey) => {\n\t\t\t\t\tto[nextKey] = nextSource[nextKey];\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn to;\n\t};\n\n\tgetOwnPropertyDescriptor = function<T, K extends keyof T>(o: T, prop: K): PropertyDescriptor | undefined {\n\t\tif (isSymbol(prop)) {\n\t\t\treturn Object.getOwnPropertyDescriptor(o, prop);\n\t\t} else {\n\t\t\treturn Object.getOwnPropertyDescriptor(o, prop);\n\t\t}\n\t};\n\n\tgetOwnPropertyNames = function getOwnPropertyNames(o: any): string[] {\n\t\treturn Object.getOwnPropertyNames(o).filter((key) => !Boolean(key.match(/^@@.+/)));\n\t};\n\n\tgetOwnPropertySymbols = function getOwnPropertySymbols(o: any): symbol[] {\n\t\treturn Object.getOwnPropertyNames(o)\n\t\t\t.filter((key) => Boolean(key.match(/^@@.+/)))\n\t\t\t.map((key) => Symbol.for(key.substring(2)));\n\t};\n\n\tis = function is(value1: any, value2: any): boolean {\n\t\tif (value1 === value2) {\n\t\t\treturn value1 !== 0 || 1 / value1 === 1 / value2; // -0\n\t\t}\n\t\treturn value1 !== value1 && value2 !== value2; // NaN\n\t};\n}\n\nif (has('es2017-object')) {\n\tconst globalObject = global.Object;\n\tgetOwnPropertyDescriptors = globalObject.getOwnPropertyDescriptors;\n\tentries = globalObject.entries;\n\tvalues = globalObject.values;\n} else {\n\tgetOwnPropertyDescriptors = function getOwnPropertyDescriptors(o: any) {\n\t\treturn getOwnPropertyNames(o).reduce(\n\t\t\t(previous, key) => {\n\t\t\t\tprevious[key] = getOwnPropertyDescriptor(o, key)!;\n\t\t\t\treturn previous;\n\t\t\t},\n\t\t\t{} as { [key: string]: PropertyDescriptor }\n\t\t);\n\t};\n\n\tentries = function entries(o: any): [string, any][] {\n\t\treturn keys(o).map((key) => [key, o[key]] as [string, any]);\n\t};\n\n\tvalues = function values(o: any): any[] {\n\t\treturn keys(o).map((key) => o[key]);\n\t};\n}\n","import Promise from '../shim/Promise';\n\n/**\n * Used through the toolkit as a consistent API to manage how callers can \"cleanup\"\n * when doing a function.\n */\nexport interface Handle {\n\t/**\n\t * Perform the destruction/cleanup logic associated with this Handle\n\t */\n\tdestroy(): void;\n}\n\n/**\n * No op function used to replace a Destroyable instance's `destroy` method, once the instance has been destroyed\n */\nfunction noop(): Promise<boolean> {\n\treturn Promise.resolve(false);\n}\n\n/**\n * No op function used to replace a Destroyable instance's `own` method, once the instance has been destroyed\n */\nfunction destroyed(): never {\n\tthrow new Error('Call made to destroyed method');\n}\n\nexport class Destroyable {\n\t/**\n\t * The instance's handles\n\t */\n\tprivate handles: Handle[];\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor() {\n\t\tthis.handles = [];\n\t}\n\n\t/**\n\t * Register handles for the instance that will be destroyed when `this.destroy` is called\n\t *\n\t * @param {Handle} handle The handle to add for the instance\n\t * @returns {Handle} A wrapper Handle. When the wrapper Handle's `destroy` method is invoked, the original handle is\n\t *                   removed from the instance, and its `destroy` method is invoked.\n\t */\n\town(handle: Handle): Handle {\n\t\tconst { handles: _handles } = this;\n\t\t_handles.push(handle);\n\t\treturn {\n\t\t\tdestroy() {\n\t\t\t\t_handles.splice(_handles.indexOf(handle));\n\t\t\t\thandle.destroy();\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Destroys all handlers registered for the instance\n\t *\n\t * @returns {Promise<any} A Promise that resolves once all handles have been destroyed\n\t */\n\tdestroy(): Promise<any> {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.handles.forEach((handle) => {\n\t\t\t\thandle && handle.destroy && handle.destroy();\n\t\t\t});\n\t\t\tthis.destroy = noop;\n\t\t\tthis.own = destroyed;\n\t\t\tresolve(true);\n\t\t});\n\t}\n}\n\nexport default Destroyable;\n","import { Map } from '../shim/Map';\nimport { Evented, EventObject } from '../core/Evented';\nimport { Constructor, InjectorFactory, InjectorItem, RegistryLabel, WidgetBaseInterface } from './interfaces';\nimport { Registry, RegistryEventObject, RegistryItem } from './Registry';\n\nexport type RegistryHandlerEventMap = {\n\tinvalidate: EventObject<'invalidate'>;\n};\n\nexport class RegistryHandler extends Evented<RegistryHandlerEventMap> {\n\tprivate _registry = new Registry();\n\tprivate _registryWidgetLabelMap: Map<Registry, RegistryLabel[]> = new Map();\n\tprivate _registryInjectorLabelMap: Map<Registry, RegistryLabel[]> = new Map();\n\tprotected baseRegistry?: Registry;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.own(this._registry);\n\t\tconst destroy = () => {\n\t\t\tif (this.baseRegistry) {\n\t\t\t\tthis._registryWidgetLabelMap.delete(this.baseRegistry);\n\t\t\t\tthis._registryInjectorLabelMap.delete(this.baseRegistry);\n\t\t\t\tthis.baseRegistry = undefined;\n\t\t\t}\n\t\t};\n\t\tthis.own({ destroy });\n\t}\n\n\tpublic set base(baseRegistry: Registry) {\n\t\tif (this.baseRegistry) {\n\t\t\tthis._registryWidgetLabelMap.delete(this.baseRegistry);\n\t\t\tthis._registryInjectorLabelMap.delete(this.baseRegistry);\n\t\t}\n\t\tthis.baseRegistry = baseRegistry;\n\t}\n\n\tpublic define(label: RegistryLabel, widget: RegistryItem): void {\n\t\tthis._registry.define(label, widget);\n\t}\n\n\tpublic defineInjector(label: RegistryLabel, injector: InjectorFactory): void {\n\t\tthis._registry.defineInjector(label, injector);\n\t}\n\n\tpublic has(label: RegistryLabel): boolean {\n\t\treturn this._registry.has(label) || Boolean(this.baseRegistry && this.baseRegistry.has(label));\n\t}\n\n\tpublic hasInjector(label: RegistryLabel): boolean {\n\t\treturn this._registry.hasInjector(label) || Boolean(this.baseRegistry && this.baseRegistry.hasInjector(label));\n\t}\n\n\tpublic get<T extends WidgetBaseInterface = WidgetBaseInterface>(\n\t\tlabel: RegistryLabel,\n\t\tglobalPrecedence: boolean = false\n\t): Constructor<T> | null {\n\t\treturn this._get(label, globalPrecedence, 'get', this._registryWidgetLabelMap);\n\t}\n\n\tpublic getInjector<T>(label: RegistryLabel, globalPrecedence: boolean = false): InjectorItem<T> | null {\n\t\treturn this._get(label, globalPrecedence, 'getInjector', this._registryInjectorLabelMap);\n\t}\n\n\tprivate _get(\n\t\tlabel: RegistryLabel,\n\t\tglobalPrecedence: boolean,\n\t\tgetFunctionName: 'getInjector' | 'get',\n\t\tlabelMap: Map<Registry, RegistryLabel[]>\n\t): any {\n\t\tconst registries = globalPrecedence ? [this.baseRegistry, this._registry] : [this._registry, this.baseRegistry];\n\t\tfor (let i = 0; i < registries.length; i++) {\n\t\t\tconst registry: any = registries[i];\n\t\t\tif (!registry) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst item = registry[getFunctionName](label);\n\t\t\tconst registeredLabels = labelMap.get(registry) || [];\n\t\t\tif (item) {\n\t\t\t\treturn item;\n\t\t\t} else if (registeredLabels.indexOf(label) === -1) {\n\t\t\t\tconst handle = registry.on(label, (event: RegistryEventObject) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tevent.action === 'loaded' &&\n\t\t\t\t\t\t(this as any)[getFunctionName](label, globalPrecedence) === event.item\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.emit({ type: 'invalidate' });\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.own(handle);\n\t\t\t\tlabelMap.set(registry, [...registeredLabels, label]);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport default RegistryHandler;\n","import { Evented, EventObject } from '../core/Evented';\nimport Map from '../shim/Map';\nimport { NodeHandlerInterface } from './interfaces';\n\n/**\n * Enum to identify the type of event.\n * Listening to 'Projector' will notify when projector is created or updated\n * Listening to 'Widget' will notify when widget root is created or updated\n */\nexport enum NodeEventType {\n\tProjector = 'Projector',\n\tWidget = 'Widget'\n}\n\nexport type NodeHandlerEventMap = {\n\tProjector: EventObject<NodeEventType.Projector>;\n\tWidget: EventObject<NodeEventType.Widget>;\n};\n\nexport class NodeHandler extends Evented<NodeHandlerEventMap> implements NodeHandlerInterface {\n\tprivate _nodeMap = new Map<string, Element>();\n\n\tpublic get(key: string): Element | undefined {\n\t\treturn this._nodeMap.get(key);\n\t}\n\n\tpublic has(key: string): boolean {\n\t\treturn this._nodeMap.has(key);\n\t}\n\n\tpublic add(element: Element, key: string): void {\n\t\tthis._nodeMap.set(key, element);\n\t\tthis.emit({ type: key });\n\t}\n\n\tpublic addRoot(): void {\n\t\tthis.emit({ type: NodeEventType.Widget });\n\t}\n\n\tpublic addProjector(): void {\n\t\tthis.emit({ type: NodeEventType.Projector });\n\t}\n\n\tpublic clear(): void {\n\t\tthis._nodeMap.clear();\n\t}\n}\n\nexport default NodeHandler;\n","import { Registry } from '../widget-core/Registry';\nimport { RegistryLabel } from '../widget-core/interfaces';\n\nimport { Router } from './Router';\nimport { RouteConfig, RouterOptions } from './interfaces';\n\n/**\n * Router Injector Options\n *\n */\nexport interface RouterInjectorOptions extends RouterOptions {\n\tkey?: RegistryLabel;\n}\n\n/**\n * Creates a router instance for a specific History manager (default is `HashHistory`) and registers\n * the route configuration.\n *\n * @param config The route config to register for the router\n * @param registry An optional registry that defaults to the global registry\n * @param options The router injector options\n */\nexport function registerRouterInjector(\n\tconfig: RouteConfig[],\n\tregistry: Registry,\n\toptions: RouterInjectorOptions = {}\n): Router {\n\tconst { key = 'router', ...routerOptions } = options;\n\n\tif (registry.hasInjector(key)) {\n\t\tthrow new Error('Router has already been defined');\n\t}\n\tconst router = new Router(config, routerOptions);\n\tregistry.defineInjector(key, (invalidator: () => void) => {\n\t\trouter.on('nav', () => invalidator());\n\t\treturn () => router;\n\t});\n\treturn router;\n}\n","import QueuingEvented from '../core/QueuingEvented';\nimport { RouteConfig, History, OutletContext, Params, RouterInterface, Route, RouterOptions } from './interfaces';\nimport { HashHistory } from './history/HashHistory';\nimport { EventObject } from '../core/Evented';\n\nconst PARAM = '__PARAM__';\n\nconst paramRegExp = new RegExp(/^{.+}$/);\n\ninterface RouteWrapper {\n\troute: Route;\n\tsegments: string[];\n\tparent?: RouteWrapper;\n\ttype?: string;\n\tparams: Params;\n}\n\nexport interface NavEvent extends EventObject<string> {\n\toutlet?: string;\n\tcontext?: OutletContext;\n}\n\nexport interface OutletEvent extends EventObject<string> {\n\toutlet: OutletContext;\n\taction: 'enter' | 'exit';\n}\n\nconst ROUTE_SEGMENT_SCORE = 7;\nconst DYNAMIC_SEGMENT_PENALTY = 2;\n\nfunction matchingParams({ params: previousParams }: OutletContext, { params }: OutletContext) {\n\tconst matching = Object.keys(previousParams).every((key) => previousParams[key] === params[key]);\n\tif (!matching) {\n\t\treturn false;\n\t}\n\treturn Object.keys(params).every((key) => previousParams[key] === params[key]);\n}\n\nexport class Router extends QueuingEvented<{ nav: NavEvent; outlet: OutletEvent }> implements RouterInterface {\n\tprivate _routes: Route[] = [];\n\tprivate _outletMap: { [index: string]: Route } = Object.create(null);\n\tprivate _matchedOutlets: { [index: string]: OutletContext } = Object.create(null);\n\tprivate _currentParams: Params = {};\n\tprivate _currentQueryParams: Params = {};\n\tprivate _defaultOutlet: string | undefined;\n\tprivate _history: History;\n\n\tconstructor(config: RouteConfig[], options: RouterOptions = {}) {\n\t\tsuper();\n\t\tconst { HistoryManager = HashHistory, base, window } = options;\n\t\tthis._register(config);\n\t\tthis._history = new HistoryManager({ onChange: this._onChange, base, window });\n\t\tif (this._matchedOutlets.errorOutlet && this._defaultOutlet) {\n\t\t\tconst path = this.link(this._defaultOutlet);\n\t\t\tif (path) {\n\t\t\t\tthis.setPath(path);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Sets the path against the registered history manager\n\t *\n\t * @param path The path to set on the history manager\n\t */\n\tpublic setPath(path: string): void {\n\t\tthis._history.set(path);\n\t}\n\n\t/**\n\t * Generate a link for a given outlet identifier and optional params.\n\t *\n\t * @param outlet The outlet to generate a link for\n\t * @param params Optional Params for the generated link\n\t */\n\tpublic link(outlet: string, params: Params = {}): string | undefined {\n\t\tconst { _outletMap, _currentParams, _currentQueryParams } = this;\n\t\tlet route = _outletMap[outlet];\n\t\tif (route === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet linkPath: string | undefined = route.fullPath;\n\t\tif (route.fullQueryParams.length > 0) {\n\t\t\tlet queryString = route.fullQueryParams.reduce((queryParamString, param, index) => {\n\t\t\t\tif (index > 0) {\n\t\t\t\t\treturn `${queryParamString}&${param}={${param}}`;\n\t\t\t\t}\n\t\t\t\treturn `?${param}={${param}}`;\n\t\t\t}, '');\n\t\t\tlinkPath = `${linkPath}${queryString}`;\n\t\t}\n\t\tparams = { ...route.defaultParams, ..._currentQueryParams, ..._currentParams, ...params };\n\n\t\tif (Object.keys(params).length === 0 && route.fullParams.length > 0) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst fullParams = [...route.fullParams, ...route.fullQueryParams];\n\t\tfor (let i = 0; i < fullParams.length; i++) {\n\t\t\tconst param = fullParams[i];\n\t\t\tif (params[param]) {\n\t\t\t\tlinkPath = linkPath.replace(`{${param}}`, params[param]);\n\t\t\t} else {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t\treturn this._history.prefix(linkPath);\n\t}\n\n\t/**\n\t * Returns the outlet context for the outlet identifier if one has been matched\n\t *\n\t * @param outletIdentifier The outlet identifer\n\t */\n\tpublic getOutlet(outletIdentifier: string): OutletContext | undefined {\n\t\treturn this._matchedOutlets[outletIdentifier];\n\t}\n\n\t/**\n\t * Returns all the params for the current matched outlets\n\t */\n\tpublic get currentParams() {\n\t\treturn this._currentParams;\n\t}\n\n\t/**\n\t * Strips the leading slash on a path if one exists\n\t *\n\t * @param path The path to strip a leading slash\n\t */\n\tprivate _stripLeadingSlash(path: string): string {\n\t\tif (path[0] === '/') {\n\t\t\treturn path.slice(1);\n\t\t}\n\t\treturn path;\n\t}\n\n\t/**\n\t * Registers the routing configuration\n\t *\n\t * @param config The configuration\n\t * @param routes The routes\n\t * @param parentRoute The parent route\n\t */\n\tprivate _register(config: RouteConfig[], routes?: Route[], parentRoute?: Route): void {\n\t\troutes = routes ? routes : this._routes;\n\t\tfor (let i = 0; i < config.length; i++) {\n\t\t\tlet { path, outlet, children, defaultRoute = false, defaultParams = {} } = config[i];\n\t\t\tlet [parsedPath, queryParamString] = path.split('?');\n\t\t\tlet queryParams: string[] = [];\n\t\t\tparsedPath = this._stripLeadingSlash(parsedPath);\n\n\t\t\tconst segments: string[] = parsedPath.split('/');\n\t\t\tconst route: Route = {\n\t\t\t\tparams: [],\n\t\t\t\toutlet,\n\t\t\t\tpath: parsedPath,\n\t\t\t\tsegments,\n\t\t\t\tdefaultParams: parentRoute ? { ...parentRoute.defaultParams, ...defaultParams } : defaultParams,\n\t\t\t\tchildren: [],\n\t\t\t\tfullPath: parentRoute ? `${parentRoute.fullPath}/${parsedPath}` : parsedPath,\n\t\t\t\tfullParams: [],\n\t\t\t\tfullQueryParams: [],\n\t\t\t\tscore: parentRoute ? parentRoute.score : 0\n\t\t\t};\n\t\t\tif (defaultRoute) {\n\t\t\t\tthis._defaultOutlet = outlet;\n\t\t\t}\n\t\t\tfor (let i = 0; i < segments.length; i++) {\n\t\t\t\tconst segment = segments[i];\n\t\t\t\troute.score += ROUTE_SEGMENT_SCORE;\n\t\t\t\tif (paramRegExp.test(segment)) {\n\t\t\t\t\troute.score -= DYNAMIC_SEGMENT_PENALTY;\n\t\t\t\t\troute.params.push(segment.replace('{', '').replace('}', ''));\n\t\t\t\t\tsegments[i] = PARAM;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (queryParamString) {\n\t\t\t\tqueryParams = queryParamString.split('&').map((queryParam) => {\n\t\t\t\t\treturn queryParam.replace('{', '').replace('}', '');\n\t\t\t\t});\n\t\t\t}\n\t\t\troute.fullQueryParams = parentRoute ? [...parentRoute.fullQueryParams, ...queryParams] : queryParams;\n\n\t\t\troute.fullParams = parentRoute ? [...parentRoute.fullParams, ...route.params] : route.params;\n\n\t\t\tif (children && children.length > 0) {\n\t\t\t\tthis._register(children, route.children, route);\n\t\t\t}\n\t\t\tthis._outletMap[outlet] = route;\n\t\t\troutes.push(route);\n\t\t}\n\t}\n\n\t/**\n\t * Returns an object of query params\n\t *\n\t * @param queryParamString The string of query params, e.g `paramOne=one&paramTwo=two`\n\t */\n\tprivate _getQueryParams(queryParamString?: string): { [index: string]: string } {\n\t\tconst queryParams: { [index: string]: string } = {};\n\t\tif (queryParamString) {\n\t\t\tconst queryParameters = queryParamString.split('&');\n\t\t\tfor (let i = 0; i < queryParameters.length; i++) {\n\t\t\t\tconst [key, value] = queryParameters[i].split('=');\n\t\t\t\tqueryParams[key] = value;\n\t\t\t}\n\t\t}\n\t\treturn queryParams;\n\t}\n\n\t/**\n\t * Called on change of the route by the the registered history manager. Matches the path against\n\t * the registered outlets.\n\t *\n\t * @param requestedPath The path of the requested route\n\t */\n\tprivate _onChange = (requestedPath: string): void => {\n\t\trequestedPath = this._stripLeadingSlash(requestedPath);\n\t\tconst previousMatchedOutlets = this._matchedOutlets;\n\t\tthis._matchedOutlets = Object.create(null);\n\t\tconst [path, queryParamString] = requestedPath.split('?');\n\t\tthis._currentQueryParams = this._getQueryParams(queryParamString);\n\t\tconst segments = path.split('/');\n\t\tlet routeConfigs: RouteWrapper[] = this._routes.map((route) => ({\n\t\t\troute,\n\t\t\tsegments: [...segments],\n\t\t\tparent: undefined,\n\t\t\tparams: {}\n\t\t}));\n\t\tlet routeConfig: RouteWrapper | undefined;\n\t\tlet matchedRoutes: RouteWrapper[] = [];\n\t\twhile ((routeConfig = routeConfigs.pop())) {\n\t\t\tconst { route, parent, segments, params } = routeConfig;\n\t\t\tlet segmentIndex = 0;\n\t\t\tlet type = 'index';\n\t\t\tlet paramIndex = 0;\n\t\t\tlet routeMatch = true;\n\t\t\tif (segments.length < route.segments.length) {\n\t\t\t\trouteMatch = false;\n\t\t\t} else {\n\t\t\t\twhile (segments.length > 0) {\n\t\t\t\t\tif (route.segments[segmentIndex] === undefined) {\n\t\t\t\t\t\ttype = 'partial';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst segment = segments.shift()!;\n\t\t\t\t\tif (route.segments[segmentIndex] === PARAM) {\n\t\t\t\t\t\tparams[route.params[paramIndex++]] = segment;\n\t\t\t\t\t\tthis._currentParams = { ...this._currentParams, ...params };\n\t\t\t\t\t} else if (route.segments[segmentIndex] !== segment) {\n\t\t\t\t\t\trouteMatch = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tsegmentIndex++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (routeMatch) {\n\t\t\t\trouteConfig.type = type;\n\t\t\t\tmatchedRoutes.push({ route, parent, type, params, segments: [] });\n\t\t\t\tif (segments.length) {\n\t\t\t\t\trouteConfigs = [\n\t\t\t\t\t\t...routeConfigs,\n\t\t\t\t\t\t...route.children.map((childRoute) => ({\n\t\t\t\t\t\t\troute: childRoute,\n\t\t\t\t\t\t\tsegments: [...segments],\n\t\t\t\t\t\t\tparent: routeConfig,\n\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\tparams: { ...params }\n\t\t\t\t\t\t}))\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet matchedOutletName: string | undefined = undefined;\n\t\tlet matchedRoute: any = matchedRoutes.reduce((match: any, matchedRoute: any) => {\n\t\t\tif (!match) {\n\t\t\t\treturn matchedRoute;\n\t\t\t}\n\t\t\tif (match.route.score > matchedRoute.route.score) {\n\t\t\t\treturn match;\n\t\t\t}\n\t\t\treturn matchedRoute;\n\t\t}, undefined);\n\n\t\tif (matchedRoute) {\n\t\t\tif (matchedRoute.type === 'partial') {\n\t\t\t\tmatchedRoute.type = 'error';\n\t\t\t}\n\t\t\tmatchedOutletName = matchedRoute.route.outlet;\n\t\t\twhile (matchedRoute) {\n\t\t\t\tlet { type, params, parent, route } = matchedRoute;\n\t\t\t\tconst matchedOutlet = {\n\t\t\t\t\tid: route.outlet,\n\t\t\t\t\tqueryParams: this._currentQueryParams,\n\t\t\t\t\tparams,\n\t\t\t\t\ttype,\n\t\t\t\t\tisError: () => type === 'error',\n\t\t\t\t\tisExact: () => type === 'index'\n\t\t\t\t};\n\t\t\t\tconst previousMatchedOutlet = previousMatchedOutlets[route.outlet];\n\t\t\t\tthis._matchedOutlets[route.outlet] = matchedOutlet;\n\t\t\t\tif (!previousMatchedOutlet || !matchingParams(previousMatchedOutlet, matchedOutlet)) {\n\t\t\t\t\tthis.emit({ type: 'outlet', outlet: matchedOutlet, action: 'enter' });\n\t\t\t\t}\n\t\t\t\tmatchedRoute = parent;\n\t\t\t}\n\t\t} else {\n\t\t\tthis._matchedOutlets.errorOutlet = {\n\t\t\t\tid: 'errorOutlet',\n\t\t\t\tqueryParams: {},\n\t\t\t\tparams: {},\n\t\t\t\tisError: () => true,\n\t\t\t\tisExact: () => false,\n\t\t\t\ttype: 'error'\n\t\t\t};\n\t\t}\n\n\t\tconst previousMatchedOutletKeys = Object.keys(previousMatchedOutlets);\n\t\tfor (let i = 0; i < previousMatchedOutletKeys.length; i++) {\n\t\t\tconst key = previousMatchedOutletKeys[i];\n\t\t\tconst matchedOutlet = this._matchedOutlets[key];\n\t\t\tif (!matchedOutlet || !matchingParams(previousMatchedOutlets[key], matchedOutlet)) {\n\t\t\t\tthis.emit({ type: 'outlet', outlet: previousMatchedOutlets[key], action: 'exit' });\n\t\t\t}\n\t\t}\n\t\tthis.emit({\n\t\t\ttype: 'nav',\n\t\t\toutlet: matchedOutletName,\n\t\t\tcontext: matchedOutletName ? this._matchedOutlets[matchedOutletName] : undefined\n\t\t});\n\t};\n}\n\nexport default Router;\n","import Map from '../shim/Map';\nimport Evented, { CustomEventTypes, isGlobMatch, EventedCallbackOrArray, EventType, EventObject } from './Evented';\nimport { Handle } from './Destroyable';\n\n/**\n * An implementation of the Evented class that queues up events when no listeners are\n * listening. When a listener is subscribed, the queue will be published to the listener.\n * When the queue is full, the oldest events will be discarded to make room for the newest ones.\n *\n * @property maxEvents  The number of events to queue before old events are discarded. If zero (default), an unlimited number of events is queued.\n */\nclass QueuingEvented<\n\tM extends CustomEventTypes = {},\n\tT = EventType,\n\tO extends EventObject<T> = EventObject<T>\n> extends Evented<M, T, O> {\n\tprivate _queue: Map<string | symbol, EventObject[]> = new Map();\n\n\tpublic maxEvents = 0;\n\n\temit<K extends keyof M>(event: M[K]): void;\n\temit(event: O): void;\n\temit(event: any): void {\n\t\tsuper.emit(event);\n\n\t\tlet hasMatch = false;\n\n\t\tthis.listenersMap.forEach((method, type) => {\n\t\t\t// Since `type` is generic, the compiler doesn't know what type it is and `isGlobMatch` requires `string | symbol`\n\t\t\tif (isGlobMatch(type as any, event.type)) {\n\t\t\t\thasMatch = true;\n\t\t\t}\n\t\t});\n\n\t\tif (!hasMatch) {\n\t\t\tlet queue = this._queue.get(event.type);\n\n\t\t\tif (!queue) {\n\t\t\t\tqueue = [];\n\t\t\t\tthis._queue.set(event.type, queue);\n\t\t\t}\n\n\t\t\tqueue.push(event);\n\n\t\t\tif (this.maxEvents > 0) {\n\t\t\t\twhile (queue.length > this.maxEvents) {\n\t\t\t\t\tqueue.shift();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\ton<K extends keyof M>(type: K, listener: EventedCallbackOrArray<K, M[K]>): Handle;\n\ton(type: T, listener: EventedCallbackOrArray<T, O>): Handle;\n\ton(type: any, listener: EventedCallbackOrArray<any, any>): Handle {\n\t\tlet handle = super.on(type, listener);\n\n\t\tthis.listenersMap.forEach((method, listenerType) => {\n\t\t\tthis._queue.forEach((events, queuedType) => {\n\t\t\t\tif (isGlobMatch(listenerType as any, queuedType)) {\n\t\t\t\t\tevents.forEach((event) => this.emit(event));\n\t\t\t\t\tthis._queue.delete(queuedType);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn handle;\n\t}\n}\n\nexport default QueuingEvented;\n","import global from '../../shim/global';\nimport { History, HistoryOptions, OnChangeFunction } from './../interfaces';\n\nexport class HashHistory implements History {\n\tprivate _onChangeFunction: OnChangeFunction;\n\tprivate _current: string;\n\tprivate _window: Window;\n\n\tconstructor({ window = global.window, onChange }: HistoryOptions) {\n\t\tthis._onChangeFunction = onChange;\n\t\tthis._window = window;\n\t\tthis._window.addEventListener('hashchange', this._onChange, false);\n\t\tthis._current = this.normalizePath(this._window.location.hash);\n\t\tthis._onChangeFunction(this._current);\n\t}\n\n\tpublic normalizePath(path: string): string {\n\t\treturn path.replace('#', '');\n\t}\n\n\tpublic prefix(path: string) {\n\t\tif (path[0] !== '#') {\n\t\t\treturn `#${path}`;\n\t\t}\n\t\treturn path;\n\t}\n\n\tpublic set(path: string) {\n\t\tthis._window.location.hash = this.prefix(path);\n\t\tthis._onChange();\n\t}\n\n\tpublic get current(): string {\n\t\treturn this._current;\n\t}\n\n\tpublic destroy() {\n\t\tthis._window.removeEventListener('hashchange', this._onChange);\n\t}\n\n\tprivate _onChange = () => {\n\t\tconst path = this.normalizePath(this._window.location.hash);\n\t\tif (path !== this._current) {\n\t\t\tthis._current = path;\n\t\t\tthis._onChangeFunction(this._current);\n\t\t}\n\t};\n}\n\nexport default HashHistory;\n","import { Store } from 'redux';\n\nexport interface ReduxInjectorPayload<S, O> {\n\tstore: Store<S>;\n\textraOptions?: O;\n}\n\n/**\n * Injector for redux store\n */\nexport function reduxInjectorFactory<S = any, O = any>(store: Store<S>, extraOptions?: O) {\n\treturn (invalidator: () => void) => {\n\t\tstore.subscribe(() => invalidator());\n\t\treturn () => ({ store, extraOptions });\n\t};\n}\n\nexport default reduxInjectorFactory;\n","import { Container } from '@dojo/framework/widget-core/Container';\nimport { TodoApp } from './../widgets/TodoApp';\nimport { ReduxInjectorPayload } from '@dojo/interop/redux/ReduxInjector';\nimport {\n\taddTodo,\n\ttodoInput,\n\tremoveTodo,\n\ttoggleTodo,\n\ttoggleTodos,\n\tclearCompleted,\n\teditTodo,\n\tsaveTodo\n} from './../actions/todoActions';\n\nfunction getProperties({ store }: ReduxInjectorPayload<any, any>) {\n\tconst state = store.getState();\n\n\treturn {\n\t\taddTodo: () => store.dispatch(addTodo()),\n\t\ttodoInput: (todo: string) => store.dispatch(todoInput(todo)),\n\t\tremoveTodo: (id: string) => store.dispatch(removeTodo(id)),\n\t\ttoggleTodo: (id: string) => store.dispatch(toggleTodo(id)),\n\t\ttoggleTodos: () => store.dispatch(toggleTodos()),\n\t\tclearCompleted: () => store.dispatch(clearCompleted()),\n\t\teditTodo: (id: string) => store.dispatch(editTodo(id)),\n\t\tsaveTodo: (id: string, label?: string) => store.dispatch(saveTodo(id, label)),\n\t\tcurrentTodo: state.currentTodo,\n\t\tcompletedCount: state.completedCount,\n\t\tactiveCount: state.activeCount,\n\t\ttodos: state.todos\n\t};\n}\n\nexport const TodoAppContainer = Container(TodoApp, 'application-state', { getProperties });\n","import { WidgetBase } from './WidgetBase';\nimport { inject, GetProperties } from './decorators/inject';\nimport { Constructor, DNode, RegistryLabel } from './interfaces';\nimport { w } from './d';\nimport { alwaysRender } from './decorators/alwaysRender';\n\nexport type Container<T extends WidgetBase> = Constructor<WidgetBase<Partial<T['properties']>>>;\n\nexport function Container<W extends WidgetBase>(\n\tcomponent: Constructor<W> | RegistryLabel,\n\tname: RegistryLabel,\n\t{ getProperties }: { getProperties: GetProperties }\n): Container<W> {\n\t@alwaysRender()\n\t@inject({ name, getProperties })\n\tclass WidgetContainer extends WidgetBase<Partial<W['properties']>> {\n\t\tprotected render(): DNode {\n\t\t\treturn w(component, this.properties, this.children);\n\t\t}\n\t}\n\treturn WidgetContainer;\n}\n\nexport default Container;\n","import { WidgetBase } from '@dojo/framework/widget-core/WidgetBase';\nimport { DNode, WidgetProperties } from '@dojo/framework/widget-core/interfaces';\nimport { ThemedMixin, theme } from '@dojo/framework/widget-core/mixins/Themed';\nimport { tsx } from '@dojo/framework/widget-core/tsx';\n\nimport TodoHeader from './TodoHeader';\n// import TodoList from './../outlets/TodoListOutlet';\n// import TodoFooter from './../outlets/TodoFooterOutlet';\nimport TodoFooter from './TodoFooter';\nimport TodoList from './TodoList';\nimport Outlet from '@dojo/framework/routing/Outlet';\n\nimport * as css from './styles/todoApp.m.css';\n\nexport interface Todo {\n\tid: string;\n\tlabel: string;\n\tcompleted: boolean;\n\tediting?: boolean;\n}\n\nexport interface TodoAppProperties extends WidgetProperties {\n\ttodos: Todo[];\n\tcurrentTodo: string;\n\tactiveCount: number;\n\tcompletedCount: number;\n\taddTodo: () => void;\n\teditTodo: (id: string) => void;\n\tsaveTodo: (id: string, label?: string) => void;\n\ttodoInput: (id: string) => void;\n\tremoveTodo: (id: string) => void;\n\ttoggleTodo: (id: string) => void;\n\ttoggleTodos: () => void;\n\tclearCompleted: () => void;\n}\n\nexport const TodoAppBase = ThemedMixin(WidgetBase);\n\n@theme(css)\nexport class TodoApp extends TodoAppBase<TodoAppProperties> {\n\n\tprotected render(): DNode {\n\t\tconst {\n\t\t\tactiveCount,\n\t\t\ttodos,\n\t\t\tcurrentTodo,\n\t\t\tcompletedCount,\n\t\t\taddTodo,\n\t\t\teditTodo,\n\t\t\ttodoInput,\n\t\t\tremoveTodo,\n\t\t\ttoggleTodo,\n\t\t\ttoggleTodos,\n\t\t\tclearCompleted,\n\t\t\tsaveTodo\n\t\t} = this.properties;\n\t\tconst todoCount = todos.length;\n\n\t\treturn (\n\t\t\t<section classes={this.theme(css.todoapp)}>\n\t\t\t\t<TodoHeader\n\t\t\t\t\ttodo={currentTodo}\n\t\t\t\t\ttodoInput={todoInput}\n\t\t\t\t\tallCompleted={todoCount > 0 && completedCount === todoCount}\n\t\t\t\t\taddTodo={addTodo}\n\t\t\t\t\ttoggleTodos={toggleTodos}\n\t\t\t\t\ttodoCount={todoCount}\n\t\t\t\t/>\n\t\t\t\t<section>\n\t\t\t\t\t<Outlet id='filter' renderer={(details) => {\n\t\t\t\t\t\treturn <TodoList\n\t\t\t\t\t\t\tfilter={details.params.filter}\n\t\t\t\t\t\t\ttodos={todos}\n\t\t\t\t\t\t\teditTodo={editTodo}\n\t\t\t\t\t\t\tremoveTodo={removeTodo}\n\t\t\t\t\t\t\ttoggleTodo={toggleTodo}\n\t\t\t\t\t\t\tsaveTodo={saveTodo}\n\t\t\t\t\t\t/>;\n\t\t\t\t\t}} />\n\t\t\t\t</section>\n\t\t\t\t{todoCount ?\n\t\t\t\t\t<Outlet id='filter' renderer={(details) => {\n\t\t\t\t\t\treturn <TodoFooter\n\t\t\t\t\t\t\tfilter={details.params.filter}\n\t\t\t\t\t\t\tclearCompleted={clearCompleted}\n\t\t\t\t\t\t\tactiveCount={activeCount}\n\t\t\t\t\t\t\ttodoCount={todoCount}\n\t\t\t\t\t\t/>;\n\t\t\t\t\t}} /> : null}\n\t\t\t</section>\n\t\t);\n\t}\n}\n\nexport default TodoApp;\n","import { Evented, EventObject } from '../core/Evented';\n\nexport type InjectorEventMap = {\n\tinvalidate: EventObject<'invalidate'>;\n};\n\nexport class Injector<T = any> extends Evented<InjectorEventMap> {\n\tprivate _payload: T;\n\tprivate _invalidator: undefined | (() => void);\n\n\tconstructor(payload: T) {\n\t\tsuper();\n\t\tthis._payload = payload;\n\t}\n\n\tpublic setInvalidator(invalidator: () => void) {\n\t\tthis._invalidator = invalidator;\n\t}\n\n\tpublic get(): T {\n\t\treturn this._payload;\n\t}\n\n\tpublic set(payload: T): void {\n\t\tthis._payload = payload;\n\t\tif (this._invalidator) {\n\t\t\tthis._invalidator();\n\t\t}\n\t}\n}\n\nexport default Injector;\n","import { WidgetBase } from '@dojo/framework/widget-core/WidgetBase';\nimport { ThemedMixin, theme } from '@dojo/framework/widget-core/mixins/Themed';\nimport { DNode, WidgetProperties } from '@dojo/framework/widget-core/interfaces';\nimport { tsx } from '@dojo/framework/widget-core/tsx';\n\nimport * as css from './styles/todoHeader.m.css';\n\nexport interface TodoHeaderProperties extends WidgetProperties {\n\tallCompleted: boolean;\n\ttodo: string;\n\ttodoCount: number;\n\ttoggleTodos: () => void;\n\taddTodo: () => void;\n\ttodoInput: (todo: string) => void;\n}\n\nexport const TodoHeaderBase = ThemedMixin(WidgetBase);\n\n@theme(css)\nexport class TodoHeader extends TodoHeaderBase<TodoHeaderProperties> {\n\n\tprivate _toggleAllTodos(): void {\n\t\tthis.properties.toggleTodos();\n\t}\n\n\tprivate _addTodo(event: KeyboardEvent): void {\n\t\tif (event.which === 13) {\n\t\t\tthis.properties.addTodo();\n\t\t}\n\t}\n\n\tprivate _todoInput({ target: { value } }: any): void {\n\t\tthis.properties.todoInput(value);\n\t}\n\n\tprotected render(): DNode {\n\t\tconst { properties: { todo, allCompleted } } = this;\n\n\t\treturn (\n\t\t\t<header>\n\t\t\t\t<h1 classes={this.theme(css.title)}>\n\t\t\t\t\ttodos\n\t\t\t\t</h1>\n\t\t\t\t<input\n\t\t\t\t\tkey='todo-input'\n\t\t\t\t\tfocus={true}\n\t\t\t\t\tclasses={this.theme(css.newTodo)}\n\t\t\t\t\tonkeyup={this._addTodo}\n\t\t\t\t\toninput={this._todoInput}\n\t\t\t\t\tvalue={todo}\n\t\t\t\t\tplaceholder='What needs to be done?'\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\tonchange={this._toggleAllTodos}\n\t\t\t\t\tchecked={allCompleted}\n\t\t\t\t\ttype='checkbox'\n\t\t\t\t\tclasses={this.theme(css.toggleAll)}\n\t\t\t\t/>\n\t\t\t</header>\n\t\t);\n\t}\n}\n\nexport default TodoHeader;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"dojo2-todo-mvc-tsx/todoHeader\",\"title\":\"todoHeader-m__title__3tjiT\",\"newTodo\":\"todoHeader-m__newTodo__3Rwh3\",\"toggleAll\":\"todoHeader-m__toggleAll__15rbk\"};","import { WidgetBase } from '@dojo/framework/widget-core/WidgetBase';\nimport { DNode, WidgetProperties } from '@dojo/framework/widget-core/interfaces';\nimport { ThemedMixin, theme } from '@dojo/framework/widget-core/mixins/Themed';\nimport { tsx } from '@dojo/framework/widget-core/tsx';\n\nimport { TodoFilter } from './TodoFilter';\nimport * as css from './styles/todoFooter.m.css';\n\nexport interface TodoFooterProperties extends WidgetProperties {\n\tactiveCount: number;\n\tfilter: string;\n\ttodoCount: number;\n\tclearCompleted: () => void;\n}\n\nexport const TodoHeaderBase = ThemedMixin(WidgetBase);\n\n@theme(css)\nexport class TodoFooter extends TodoHeaderBase<TodoFooterProperties> {\n\n\tclearCompleted() {\n\t\tthis.properties.clearCompleted();\n\t}\n\n\tprotected render(): DNode {\n\t\tconst { filter, activeCount, todoCount } = this.properties;\n\t\tconst completedItems = (todoCount - activeCount) > 0;\n\t\tconst countLabel = activeCount === 1 ? 'item' : 'items';\n\n\t\treturn (\n\t\t\t<footer classes={this.theme(css.footer)}>\n\t\t\t\t<span classes={this.theme(css.todoCount)}>\n\t\t\t\t\t<strong>{`${activeCount} `}</strong>\n\t\t\t\t\t<span>{`${countLabel} left`}</span>\n\t\t\t\t</span>\n\t\t\t\t<TodoFilter filter={filter} />\n\t\t\t\t{ completedItems ? (\n\t\t\t\t\t<button onclick={this.clearCompleted} classes={this.theme(css.clearCompleted)}>\n\t\t\t\t\t\tClear completed\n\t\t\t\t\t</button>\n\t\t\t\t) : (null) }\n\t\t\t</footer>\n\t\t);\n\t}\n}\n\nexport default TodoFooter;\n","import { WidgetBase } from '@dojo/framework/widget-core/WidgetBase';\nimport { DNode, WidgetProperties } from '@dojo/framework/widget-core/interfaces';\nimport { ThemedMixin, theme } from '@dojo/framework/widget-core/mixins/Themed';\nimport { Link } from '@dojo/framework/routing/Link';\nimport { tsx } from '@dojo/framework/widget-core/tsx';\n\nimport * as css from './styles/todoFilter.m.css';\n\nexport interface TodoFilterProperties extends WidgetProperties {\n\tfilter?: string;\n}\n\nexport const TodoFilterBase = ThemedMixin(WidgetBase);\n\n@theme(css)\nexport class TodoFilter extends TodoFilterBase<TodoFilterProperties> {\n\n\tprotected render(): DNode {\n\t\tconst links = ['all', 'active', 'completed'].map(this._createLink.bind(this));\n\n\t\treturn (\n\t\t\t<ul classes={this.theme(css.filters)}>\n\t\t\t\t<li>\n\t\t\t\t\t{links}\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t);\n\t}\n\n\tprivate _createLink(filter: string) {\n\t\tconst { filter: currentFilter } = this.properties;\n\t\tconst classes = this.theme(filter === currentFilter ? css.selected : null);\n\n\t\treturn (\n\t\t\t<Link key={filter} to='filter' params={{ filter }} classes={classes}>\n\t\t\t\t{filter}\n\t\t\t</Link>\n\t\t);\n\t}\n}\n\nexport default TodoFilter;\n","import { WidgetBase } from '../widget-core/WidgetBase';\nimport { v } from '../widget-core/d';\nimport { VNode } from '../widget-core/interfaces';\nimport { LinkProperties } from './interfaces';\nimport { Router } from './Router';\n\nexport class Link extends WidgetBase<LinkProperties> {\n\tprivate _getProperties() {\n\t\tlet { routerKey = 'router', to, isOutlet = true, target, params = {}, onClick, ...props } = this.properties;\n\t\tconst item = this.registry.getInjector<Router>(routerKey);\n\t\tlet href: string | undefined = to;\n\n\t\tif (item) {\n\t\t\tconst router = item.injector();\n\t\t\tif (isOutlet) {\n\t\t\t\thref = router.link(href, params);\n\t\t\t}\n\t\t\tconst onclick = (event: MouseEvent) => {\n\t\t\t\tonClick && onClick(event);\n\n\t\t\t\tif (!event.defaultPrevented && event.button === 0 && !event.metaKey && !event.ctrlKey && !target) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\thref !== undefined && router.setPath(href);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn { ...props, onclick, href };\n\t\t}\n\t\treturn { ...props, href };\n\t}\n\n\tprotected render(): VNode {\n\t\treturn v('a', this._getProperties(), this.children);\n\t}\n}\n\nexport default Link;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"dojo2-todo-mvc-tsx/todoFilter\",\"filters\":\"todoFilter-m__filters__VIB1h\",\"selected\":\"todoFilter-m__selected__wtlXP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"dojo2-todo-mvc-tsx/todoFooter\",\"footer\":\"todoFooter-m__footer__1ENEE\",\"todoCount\":\"todoFooter-m__todoCount__3b7Tp\",\"clearCompleted\":\"todoFooter-m__clearCompleted__15N1L\"};","import { WidgetBase } from '@dojo/framework/widget-core/WidgetBase';\nimport { ThemedMixin, theme } from '@dojo/framework/widget-core/mixins/Themed';\nimport { DNode, WidgetProperties } from '@dojo/framework/widget-core/interfaces';\nimport { Todo } from './TodoApp';\nimport { tsx } from '@dojo/framework/widget-core/tsx';\nimport TodoItem from './TodoItem';\n\nimport * as css from './styles/todoList.m.css';\n\nexport interface TodoListProperties extends WidgetProperties {\n\tfilter: string;\n\ttodos: Todo[];\n\ttoggleTodo: (id: string) => void;\n\tremoveTodo: (id: string) => void;\n\teditTodo: (id: string) => void;\n\tsaveTodo: (id: string, label?: string) => void;\n}\n\nexport const TodoListBase = ThemedMixin(WidgetBase);\n\nfunction filterTodos(todos: Todo[], filter: string): Todo[] {\n\treturn todos.filter((todo) => {\n\t\treturn filter === 'completed' && todo.completed || filter === 'active' && !todo.completed || filter === 'all';\n\t});\n}\n\n@theme(css)\nexport class TodoList extends TodoListBase<TodoListProperties> {\n\tprotected render(): DNode {\n\t\tconst { filter, todos, toggleTodo, removeTodo, saveTodo, editTodo } = this.properties;\n\t\tconst items = filterTodos(todos, filter).map((todo) => (\n\t\t\t<TodoItem\n\t\t\t\tkey={todo.id}\n\t\t\t\ttodo={todo}\n\t\t\t\ttoggleTodo={toggleTodo}\n\t\t\t\teditTodo={editTodo}\n\t\t\t\tsaveTodo={saveTodo}\n\t\t\t\tremoveTodo={removeTodo}\n\t\t\t/>\n\t\t));\n\n\t\treturn (\n\t\t\t<ul classes={this.theme(css.todoList)}>\n\t\t\t\t{items}\n\t\t\t</ul>\n\t\t);\n\t}\n}\n\nexport default TodoList;\n","import { WidgetBase } from '@dojo/framework/widget-core/WidgetBase';\nimport { DNode, WidgetProperties } from '@dojo/framework/widget-core/interfaces';\nimport { ThemedMixin, theme } from '@dojo/framework/widget-core/mixins/Themed';\nimport { Todo } from './TodoApp';\nimport { tsx } from '@dojo/framework/widget-core/tsx';\n\nimport * as css from './styles/todoItem.m.css';\n\nexport interface TodoItemProperties extends WidgetProperties {\n\ttodo: Todo;\n\ttoggleTodo: (id: string) => void;\n\tremoveTodo: (id: string) => void;\n\teditTodo: (id: string) => void;\n\tsaveTodo: (id: string, label?: string) => void;\n}\n\nexport const TodoItemBase = ThemedMixin(WidgetBase);\n\n@theme(css)\nexport class TodoItem extends TodoItemBase<TodoItemProperties> {\n\n\tprivate _toggleTodo() {\n\t\tthis.properties.toggleTodo(this.properties.todo.id);\n\t}\n\n\tprivate _editTodo() {\n\t\tthis.properties.editTodo(this.properties.todo.id);\n\t}\n\n\tprivate _removeTodo() {\n\t\tthis.properties.removeTodo(this.properties.todo.id);\n\t}\n\n\tprivate _updateTodo({ which, target: { value: label } }: any) {\n\t\tconst { todo } = this.properties;\n\n\t\tif (which === 13 || (!which && todo.editing)) {\n\t\t\tlabel ? this.properties.saveTodo(todo.id, label) : this._removeTodo();\n\t\t}\n\t\telse if (which === 27) {\n\t\t\tthis.properties.saveTodo(todo.id);\n\t\t}\n\t}\n\n\tprotected onElementCreated(element: HTMLElement, key: string): void {\n\t\tif (key === 'edit-input') {\n\t\t\tsetTimeout(() => element.focus(), 0);\n\t\t}\n\t}\n\n\tprotected render(): DNode {\n\t\tconst { properties: { todo } } = this;\n\t\tconst todoItemClasses = this.theme([\n\t\t\tcss.todoItem,\n\t\t\tBoolean(todo.editing) ? css.editing : null,\n\t\t\tBoolean(todo.completed && !todo.editing) ? css.completed : null\n\t\t]);\n\n\t\treturn (\n\t\t\t<li classes={todoItemClasses}>\n\t\t\t\t<div classes={this.theme(css.view)}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclasses={this.theme(css.toggle)}\n\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\tchecked={todo.completed}\n\t\t\t\t\t\tonchange={this._toggleTodo}\n\t\t\t\t\t/>\n\t\t\t\t\t<label\n\t\t\t\t\t\tclasses={this.theme(css.todoLabel)}\n\t\t\t\t\t\tinnerHTML={todo.label}\n\t\t\t\t\t\tondblclick={this._editTodo}\n\t\t\t\t\t/>\n\t\t\t\t\t<button onclick={this._removeTodo} classes={this.theme(css.destroy)}/>\n\t\t\t\t</div>\n\t\t\t\t{ todo.editing ?\n\t\t\t\t\t<input\n\t\t\t\t\t\tfocus={true}\n\t\t\t\t\t\tkey='edit-input'\n\t\t\t\t\t\tvalue={todo.label}\n\t\t\t\t\t\tclasses={this.theme(css.edit)}\n\t\t\t\t\t\tonblur={this._updateTodo}\n\t\t\t\t\t\tonkeyup={this._updateTodo}\n\t\t\t\t\t/>\n\t\t\t\t: null }\n\t\t\t</li>\n\t\t);\n\t}\n}\n\nexport default TodoItem;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"dojo2-todo-mvc-tsx/todoItem\",\"todoItem\":\"todoItem-m__todoItem__3mcsN\",\"edit\":\"todoItem-m__edit__21XY3\",\"editing\":\"todoItem-m__editing__2dKbq\",\"view\":\"todoItem-m__view__gnT-S\",\"toggle\":\"todoItem-m__toggle__3m9j4\",\"todoLabel\":\"todoItem-m__todoLabel__1dmyz\",\"completed\":\"todoItem-m__completed__23_7M\",\"destroy\":\"todoItem-m__destroy__2_vRS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"dojo2-todo-mvc-tsx/todoList\",\"todoList\":\"todoList-m__todoList___yRMt\"};","import { DNode } from '../widget-core/interfaces';\nimport { WidgetBase } from '../widget-core/WidgetBase';\nimport { alwaysRender } from '../widget-core/decorators/alwaysRender';\nimport { MatchDetails } from './interfaces';\nimport { Router } from './Router';\nimport { diffProperty } from '../widget-core/decorators/diffProperty';\nimport { Handle } from '../core/Destroyable';\n\nexport interface OutletProperties {\n\trenderer: (matchDetails: MatchDetails) => DNode | DNode[];\n\tid: string;\n\trouterKey?: string;\n}\n\n@alwaysRender()\nexport class Outlet extends WidgetBase<OutletProperties> {\n\tprivate _handle: Handle | undefined;\n\n\t@diffProperty('routerKey')\n\tprotected onRouterKeyChange(current: OutletProperties, next: OutletProperties) {\n\t\tconst { routerKey = 'router' } = next;\n\t\tconst item = this.registry.getInjector<Router>(routerKey);\n\t\tif (this._handle) {\n\t\t\tthis._handle.destroy();\n\t\t\tthis._handle = undefined;\n\t\t}\n\t\tif (item) {\n\t\t\tthis._handle = item.invalidator.on('invalidate', () => {\n\t\t\t\tthis.invalidate();\n\t\t\t});\n\t\t\tthis.own(this._handle);\n\t\t}\n\t}\n\n\tprotected onAttach() {\n\t\tif (!this._handle) {\n\t\t\tthis.onRouterKeyChange(this.properties, this.properties);\n\t\t}\n\t}\n\n\tprotected render(): DNode | DNode[] {\n\t\tconst { renderer, id, routerKey = 'router' } = this.properties;\n\t\tconst item = this.registry.getInjector<Router>(routerKey);\n\n\t\tif (item) {\n\t\t\tconst router = item.injector();\n\t\t\tconst outletContext = router.getOutlet(id);\n\t\t\tif (outletContext) {\n\t\t\t\tconst { queryParams, params, type, isError, isExact } = outletContext;\n\t\t\t\tconst result = renderer({ queryParams, params, type, isError, isExact, router });\n\t\t\t\tif (result) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport default Outlet;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"dojo2-todo-mvc-tsx/todoApp\",\"todoapp\":\"todoApp-m__todoapp__2CgWv\",\"main\":\"todoApp-m__main__1O82E\"};","import { uuid } from '@dojo/framework/core/util';\n\nexport function addTodo() {\n\treturn { type: 'ADD_TODO', payload: { id: uuid() }};\n}\n\nexport function todoInput(currentTodo: string) {\n\treturn { type: 'TODO_INPUT', payload: { currentTodo }};\n}\n\nexport function removeTodo(id: string) {\n\treturn { type: 'DELETE_TODO', payload: { id }};\n}\n\nexport function toggleTodo(id: string) {\n\treturn { type: 'TOGGLE_TODO', payload: { id }};\n}\n\nexport function clearCompleted() {\n\treturn { type: 'CLEAR_COMPLETED' };\n}\n\nexport function toggleTodos() {\n\treturn { type: 'TOGGLE_TODOS' };\n}\n\nexport function editTodo(id: string) {\n\treturn { type: 'EDIT_TODO', payload: { id }};\n}\n\nexport function saveTodo(id: string, label?: string) {\n\treturn { type: 'SAVE_TODO', payload: { id, label }};\n}\n","import { Handle } from './Destroyable';\n\nconst slice = Array.prototype.slice;\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Type guard that ensures that the value can be coerced to Object\n * to weed out host objects that do not derive from Object.\n * This function is used to check if we want to deep copy an object or not.\n * Note: In ES6 it is possible to modify an object's Symbol.toStringTag property, which will\n * change the value returned by `toString`. This is a rare edge case that is difficult to handle,\n * so it is not handled here.\n * @param  value The value to check\n * @return       If the value is coercible into an Object\n */\nfunction shouldDeepCopyObject(value: any): value is Object {\n\treturn Object.prototype.toString.call(value) === '[object Object]';\n}\n\nfunction copyArray<T>(array: T[], inherited: boolean): T[] {\n\treturn array.map(function(item: T): T {\n\t\tif (Array.isArray(item)) {\n\t\t\treturn copyArray(item, inherited) as any;\n\t\t}\n\n\t\treturn !shouldDeepCopyObject(item)\n\t\t\t? item\n\t\t\t: _mixin({\n\t\t\t\t\tdeep: true,\n\t\t\t\t\tinherited: inherited,\n\t\t\t\t\tsources: <Array<T>>[item],\n\t\t\t\t\ttarget: <T>{}\n\t\t\t  });\n\t});\n}\n\ninterface MixinArgs<T extends {}, U extends {}> {\n\tdeep: boolean;\n\tinherited: boolean;\n\tsources: (U | null | undefined)[];\n\ttarget: T;\n\tcopied?: any[];\n}\n\nfunction _mixin<T extends {}, U extends {}>(kwArgs: MixinArgs<T, U>): T & U {\n\tconst deep = kwArgs.deep;\n\tconst inherited = kwArgs.inherited;\n\tconst target: any = kwArgs.target;\n\tconst copied = kwArgs.copied || [];\n\tconst copiedClone = [...copied];\n\n\tfor (let i = 0; i < kwArgs.sources.length; i++) {\n\t\tconst source = kwArgs.sources[i];\n\n\t\tif (source === null || source === undefined) {\n\t\t\tcontinue;\n\t\t}\n\t\tfor (let key in source) {\n\t\t\tif (inherited || hasOwnProperty.call(source, key)) {\n\t\t\t\tlet value: any = source[key];\n\n\t\t\t\tif (copiedClone.indexOf(value) !== -1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (deep) {\n\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\tvalue = copyArray(value, inherited);\n\t\t\t\t\t} else if (shouldDeepCopyObject(value)) {\n\t\t\t\t\t\tconst targetValue: any = target[key] || {};\n\t\t\t\t\t\tcopied.push(source);\n\t\t\t\t\t\tvalue = _mixin({\n\t\t\t\t\t\t\tdeep: true,\n\t\t\t\t\t\t\tinherited: inherited,\n\t\t\t\t\t\t\tsources: [value],\n\t\t\t\t\t\t\ttarget: targetValue,\n\t\t\t\t\t\t\tcopied\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttarget[key] = value;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn <T & U>target;\n}\n\n/**\n * Copies the values of all enumerable own properties of one or more source objects to the target object,\n * recursively copying all nested objects and arrays as well.\n *\n * @param target The target object to receive values from source objects\n * @param sources Any number of objects whose enumerable own properties will be copied to the target object\n * @return The modified target object\n */\nexport function deepAssign<\n\tT extends {},\n\tU extends {},\n\tV extends {},\n\tW extends {},\n\tX extends {},\n\tY extends {},\n\tZ extends {}\n>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y, source6: Z): T & U & V & W & X & Y & Z;\nexport function deepAssign<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}>(\n\ttarget: T,\n\tsource1: U,\n\tsource2: V,\n\tsource3: W,\n\tsource4: X,\n\tsource5: Y\n): T & U & V & W & X & Y;\nexport function deepAssign<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}>(\n\ttarget: T,\n\tsource1: U,\n\tsource2: V,\n\tsource3: W,\n\tsource4: X\n): T & U & V & W & X;\nexport function deepAssign<T extends {}, U extends {}, V extends {}, W extends {}>(\n\ttarget: T,\n\tsource1: U,\n\tsource2: V,\n\tsource3: W\n): T & U & V & W;\nexport function deepAssign<T extends {}, U extends {}, V extends {}>(target: T, source1: U, source2: V): T & U & V;\nexport function deepAssign<T extends {}, U extends {}>(target: T, source: U): T & U;\nexport function deepAssign(target: any, ...sources: any[]): any {\n\treturn _mixin({\n\t\tdeep: true,\n\t\tinherited: false,\n\t\tsources: sources,\n\t\ttarget: target\n\t});\n}\n\n/**\n * Copies the values of all enumerable (own or inherited) properties of one or more source objects to the\n * target object, recursively copying all nested objects and arrays as well.\n *\n * @param target The target object to receive values from source objects\n * @param sources Any number of objects whose enumerable properties will be copied to the target object\n * @return The modified target object\n */\nexport function deepMixin<\n\tT extends {},\n\tU extends {},\n\tV extends {},\n\tW extends {},\n\tX extends {},\n\tY extends {},\n\tZ extends {}\n>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y, source6: Z): T & U & V & W & X & Y & Z;\nexport function deepMixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}>(\n\ttarget: T,\n\tsource1: U,\n\tsource2: V,\n\tsource3: W,\n\tsource4: X,\n\tsource5: Y\n): T & U & V & W & X & Y;\nexport function deepMixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}>(\n\ttarget: T,\n\tsource1: U,\n\tsource2: V,\n\tsource3: W,\n\tsource4: X\n): T & U & V & W & X;\nexport function deepMixin<T extends {}, U extends {}, V extends {}, W extends {}>(\n\ttarget: T,\n\tsource1: U,\n\tsource2: V,\n\tsource3: W\n): T & U & V & W;\nexport function deepMixin<T extends {}, U extends {}, V extends {}>(target: T, source1: U, source2: V): T & U & V;\nexport function deepMixin<T extends {}, U extends {}>(target: T, source: U): T & U;\nexport function deepMixin(target: any, ...sources: any[]): any {\n\treturn _mixin({\n\t\tdeep: true,\n\t\tinherited: true,\n\t\tsources: sources,\n\t\ttarget: target\n\t});\n}\n\n/**\n * Copies the values of all enumerable (own or inherited) properties of one or more source objects to the\n * target object.\n *\n * @return The modified target object\n */\nexport function mixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}, Z extends {}>(\n\ttarget: T,\n\tsource1: U,\n\tsource2: V,\n\tsource3: W,\n\tsource4: X,\n\tsource5: Y,\n\tsource6: Z\n): T & U & V & W & X & Y & Z;\nexport function mixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}>(\n\ttarget: T,\n\tsource1: U,\n\tsource2: V,\n\tsource3: W,\n\tsource4: X,\n\tsource5: Y\n): T & U & V & W & X & Y;\nexport function mixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}>(\n\ttarget: T,\n\tsource1: U,\n\tsource2: V,\n\tsource3: W,\n\tsource4: X\n): T & U & V & W & X;\nexport function mixin<T extends {}, U extends {}, V extends {}, W extends {}>(\n\ttarget: T,\n\tsource1: U,\n\tsource2: V,\n\tsource3: W\n): T & U & V & W;\nexport function mixin<T extends {}, U extends {}, V extends {}>(target: T, source1: U, source2: V): T & U & V;\nexport function mixin<T extends {}, U extends {}>(target: T, source: U): T & U;\nexport function mixin(target: any, ...sources: any[]): any {\n\treturn _mixin({\n\t\tdeep: false,\n\t\tinherited: true,\n\t\tsources: sources,\n\t\ttarget: target\n\t});\n}\n\n/**\n * Returns a function which invokes the given function with the given arguments prepended to its argument list.\n * Like `Function.prototype.bind`, but does not alter execution context.\n *\n * @param targetFunction The function that needs to be bound\n * @param suppliedArgs An optional array of arguments to prepend to the `targetFunction` arguments list\n * @return The bound function\n */\nexport function partial(targetFunction: (...args: any[]) => any, ...suppliedArgs: any[]): (...args: any[]) => any {\n\treturn function(this: any) {\n\t\tconst args: any[] = arguments.length ? suppliedArgs.concat(slice.call(arguments)) : suppliedArgs;\n\n\t\treturn targetFunction.apply(this, args);\n\t};\n}\n\nexport function guaranteeMinimumTimeout(callback: (...args: any[]) => void, delay?: number): Handle {\n\tconst startTime = Date.now();\n\tlet timerId: any;\n\n\tfunction timeoutHandler() {\n\t\tconst delta = Date.now() - startTime;\n\t\tif (delay == null || delta >= delay) {\n\t\t\tcallback();\n\t\t} else {\n\t\t\ttimerId = setTimeout(timeoutHandler, delay - delta);\n\t\t}\n\t}\n\ttimerId = setTimeout(timeoutHandler, delay);\n\treturn {\n\t\tdestroy: () => {\n\t\t\tif (timerId != null) {\n\t\t\t\tclearTimeout(timerId);\n\t\t\t\ttimerId = null;\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport function debounce<T extends (this: any, ...args: any[]) => void>(callback: T, delay: number): T {\n\tlet timer: Handle | null;\n\n\treturn <T>function() {\n\t\ttimer && timer.destroy();\n\n\t\tlet context = this;\n\t\tlet args: IArguments | null = arguments;\n\n\t\ttimer = guaranteeMinimumTimeout(function() {\n\t\t\tcallback.apply(context, args);\n\t\t\targs = context = timer = null;\n\t\t}, delay);\n\t};\n}\n\nexport function throttle<T extends (this: any, ...args: any[]) => void>(callback: T, delay: number): T {\n\tlet ran: boolean | null;\n\n\treturn <T>function() {\n\t\tif (ran) {\n\t\t\treturn;\n\t\t}\n\n\t\tran = true;\n\n\t\tcallback.apply(this, arguments);\n\t\tguaranteeMinimumTimeout(function() {\n\t\t\tran = null;\n\t\t}, delay);\n\t};\n}\n\nexport function uuid(): string {\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n\t\tconst r = (Math.random() * 16) | 0,\n\t\t\tv = c === 'x' ? r : (r & 0x3) | 0x8;\n\t\treturn v.toString(16);\n\t});\n}\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import { AnyAction } from 'redux';\n\nexport function todoReducer(state: any = {}, { type, payload }: AnyAction): any {\n\tlet { currentTodo, activeCount, completedCount } = state;\n\tlet todos;\n\tswitch (type) {\n\t\tcase 'TODO_INPUT':\n\t\t\treturn { ...state, currentTodo: payload.currentTodo };\n\t\tcase 'ADD_TODO':\n\t\t\tif (currentTodo.trim()) {\n\t\t\t\tactiveCount++;\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tcurrentTodo: '',\n\t\t\t\t\ttodos: [\n\t\t\t\t\t\t...state.todos,\n\t\t\t\t\t\t{ id: payload.id, label: currentTodo.trim(), completed: false }],\n\t\t\t\t\tactiveCount\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn state;\n\t\tcase 'TOGGLE_TODO':\n\t\t\ttodos = state.todos.map((todo: any) => {\n\t\t\t\tif (todo.id === payload.id) {\n\t\t\t\t\ttodo.completed ? completedCount-- && activeCount++ : activeCount-- && completedCount++;\n\t\t\t\t\treturn { ...todo, completed: !todo.completed};\n\t\t\t\t}\n\t\t\t\treturn todo;\n\t\t\t});\n\t\t\treturn { ...state, todos, completedCount: Math.max(completedCount, 0), activeCount: Math.max(activeCount, 0) };\n\t\tcase 'DELETE_TODO':\n\t\t\ttodos = state.todos.filter((todo: any) => {\n\t\t\t\tif (todo.id === payload.id) {\n\t\t\t\t\tif (todo.completed) {\n\t\t\t\t\t\tcompletedCount--;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tactiveCount--;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn { ...state, todos, completedCount, activeCount };\n\t\tcase 'TOGGLE_TODOS':\n\t\t\tconst todosCompleted = activeCount !== 0;\n\t\t\ttodos = state.todos.map((todo: any) => {\n\t\t\t\treturn { ...todo, completed: todosCompleted };\n\t\t\t});\n\t\t\tif (todosCompleted) {\n\t\t\t\tcompletedCount = todos.length;\n\t\t\t\tactiveCount = 0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcompletedCount = 0;\n\t\t\t\tactiveCount = todos.length;\n\t\t\t}\n\t\t\treturn { ...state, todos, completedCount, activeCount };\n\t\tcase 'CLEAR_COMPLETED':\n\t\t\ttodos = state.todos.filter((todo: any) => {\n\t\t\t\treturn !todo.completed;\n\t\t\t});\n\t\t\tcompletedCount = 0;\n\t\t\tactiveCount = todos.length;\n\t\t\treturn { ...state, todos, completedCount, activeCount };\n\t\tcase 'EDIT_TODO':\n\t\t\ttodos = state.todos.map((todo: any) => {\n\t\t\t\tif (todo.id === payload.id) {\n\t\t\t\t\treturn { ...todo, editing: true};\n\t\t\t\t}\n\t\t\t\treturn todo;\n\t\t\t});\n\t\t\treturn { ...state, todos };\n\t\tcase 'SAVE_TODO':\n\t\t\ttodos = state.todos.map((todo: any) => {\n\t\t\t\tif (todo.id === payload.id) {\n\t\t\t\t\treturn { ...todo, editing: false, label: payload.label || todo.label };\n\t\t\t\t}\n\t\t\t\treturn todo;\n\t\t\t});\n\t\t\treturn { ...state, todos };\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import isPlainObject from 'lodash-es/isPlainObject';\nimport $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nexport var ActionTypes = {\n  INIT: '@@redux/INIT'\n\n  /**\n   * Creates a Redux store that holds the state tree.\n   * The only way to change the data in the store is to call `dispatch()` on it.\n   *\n   * There should only be a single store in your app. To specify how different\n   * parts of the state tree respond to actions, you may combine several reducers\n   * into a single reducer function by using `combineReducers`.\n   *\n   * @param {Function} reducer A function that returns the next state tree, given\n   * the current state tree and the action to handle.\n   *\n   * @param {any} [preloadedState] The initial state. You may optionally specify it\n   * to hydrate the state from the server in universal apps, or to restore a\n   * previously serialized user session.\n   * If you use `combineReducers` to produce the root reducer function, this must be\n   * an object with the same shape as `combineReducers` keys.\n   *\n   * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n   * to enhance the store with third-party capabilities such as middleware,\n   * time travel, persistence, etc. The only store enhancer that ships with Redux\n   * is `applyMiddleware()`.\n   *\n   * @returns {Store} A Redux store that lets you read the state, dispatch actions\n   * and subscribe to changes.\n   */\n};export default function createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    return currentState;\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected listener to be a function.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({ type: ActionTypes.INIT });\n  }\n\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object') {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return { unsubscribe: unsubscribe };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT });\n\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}","import { ActionTypes } from './createStore';\nimport isPlainObject from 'lodash-es/isPlainObject';\nimport warning from './utils/warning';\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionName = actionType && '\"' + actionType.toString() + '\"' || 'an action';\n\n  return 'Given action ' + actionName + ', reducer \"' + key + '\" returned undefined. ' + 'To ignore an action, you must explicitly return the previous state. ' + 'If you want this reducer to hold no value, you can return null instead of undefined.';\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return 'The ' + argumentName + ' has unexpected type of \"' + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + '\". Expected argument to be an object with the following ' + ('keys: \"' + reducerKeys.join('\", \"') + '\"');\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n\n  if (unexpectedKeys.length > 0) {\n    return 'Unexpected ' + (unexpectedKeys.length > 1 ? 'keys' : 'key') + ' ' + ('\"' + unexpectedKeys.join('\", \"') + '\" found in ' + argumentName + '. ') + 'Expected to find one of the known reducer keys instead: ' + ('\"' + reducerKeys.join('\", \"') + '\". Unexpected keys will be ignored.');\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, { type: ActionTypes.INIT });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined during initialization. ' + 'If the state passed to the reducer is undefined, you must ' + 'explicitly return the initial state. The initial state may ' + 'not be undefined. If you don\\'t want to set a value for this reducer, ' + 'you can use null instead of undefined.');\n    }\n\n    var type = '@@redux/PROBE_UNKNOWN_ACTION_' + Math.random().toString(36).substring(7).split('').join('.');\n    if (typeof reducer(undefined, { type: type }) === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined when probed with a random type. ' + ('Don\\'t try to handle ' + ActionTypes.INIT + ' or other actions in \"redux/*\" ') + 'namespace. They are considered private. Instead, you must return the ' + 'current state for any unknown actions, unless it is undefined, ' + 'in which case you must return the initial state, regardless of the ' + 'action type. The initial state may not be undefined, but can be null.');\n    }\n  });\n}\n\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\nexport default function combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning('No reducer provided for key \"' + key + '\"');\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  var finalReducerKeys = Object.keys(finalReducers);\n\n  var unexpectedKeyCache = void 0;\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError = void 0;\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments[1];\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    return hasChanged ? nextState : state;\n  };\n}","function bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(undefined, arguments));\n  };\n}\n\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\nexport default function bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error('bindActionCreators expected an object or a function, instead received ' + (actionCreators === null ? 'null' : typeof actionCreators) + '. ' + 'Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?');\n  }\n\n  var keys = Object.keys(actionCreators);\n  var boundActionCreators = {};\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var actionCreator = actionCreators[key];\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}","/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\nexport default function compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(undefined, arguments));\n    };\n  });\n}","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nimport compose from './compose';\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\nexport default function applyMiddleware() {\n  for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function (reducer, preloadedState, enhancer) {\n      var store = createStore(reducer, preloadedState, enhancer);\n      var _dispatch = store.dispatch;\n      var chain = [];\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch(action) {\n          return _dispatch(action);\n        }\n      };\n      chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(undefined, chain)(store.dispatch);\n\n      return _extends({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}","import createStore from './createStore';\nimport combineReducers from './combineReducers';\nimport bindActionCreators from './bindActionCreators';\nimport applyMiddleware from './applyMiddleware';\nimport compose from './compose';\nimport warning from './utils/warning';\n\n/*\n* This is a dummy function to check if the function name has been altered by minification.\n* If the function has been minified and NODE_ENV !== 'production', warn the user.\n*/\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \\'production\\'. ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { createStore, combineReducers, bindActionCreators, applyMiddleware, compose };"],"sourceRoot":""}