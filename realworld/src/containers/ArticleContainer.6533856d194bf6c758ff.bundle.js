/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
(window.dojoWebpackJsonprealworld_app=window.dojoWebpackJsonprealworld_app||[]).push([[8],{63:function(e,t,s){"use strict";s.r(t);var r={"":["<em>","</em>"],_:["<strong>","</strong>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function a(e){return e.replace(RegExp("^"+(e.match(/^(\t| )+/)||"")[0],"gm"),"")}function o(e){return(e+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}t.default=function e(t){var s,n,c,l,i,m=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^```(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:\!\[([^\]]*?)\]\(([^\)]+?)\))|(\[)|(\](?:\(([^\)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(\-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,3})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*])/gm,u=[],d="",f=0,b={};function p(e){var t=r[e.replace(/\*/g,"_")[1]||""],s=u[u.length-1]==e;return t?t[1]?(u[s?"pop":"push"](e),t[0|s]):t[0]:e}function g(){for(var e="";u.length;)e+=p(u[u.length-1]);return e}for(t=t.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(e,t,s){return b[t.toLowerCase()]=s,""}).replace(/^\n+|\n+$/g,"");c=m.exec(t);)n=t.substring(f,c.index),f=m.lastIndex,s=c[0],n.match(/[^\\](\\\\)*\\$/)||(c[3]||c[4]?s='<pre class="code '+(c[4]?"poetry":c[2].toLowerCase())+'">'+a(o(c[3]||c[4]).replace(/^\n+|\n+$/g,""))+"</pre>":c[6]?((i=c[6]).match(/\./)&&(c[5]=c[5].replace(/^\d+/gm,"")),l=e(a(c[5].replace(/^\s*[>*+.-]/gm,""))),">"===i?i="blockquote":(i=i.match(/\./)?"ol":"ul",l=l.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),s="<"+i+">"+l+"</"+i+">"):c[8]?s='<img src="'+o(c[8])+'" alt="'+o(c[7])+'">':c[10]?(d=d.replace("<a>",'<a href="'+o(c[11]||b[n.toLowerCase()])+'">'),s=g()+"</a>"):c[9]?s="<a>":c[12]||c[14]?s="<"+(i="h"+(c[14]?c[14].length:"="===c[13][0]?1:2))+">"+e(c[12]||c[15])+"</"+i+">":c[16]?s="<code>"+o(c[16])+"</code>":(c[17]||c[1])&&(s=p(c[17]||"--"))),d+=n,d+=s;return(d+t.substring(f)+g()).trim()}},65:function(e,t,s){"use strict";s.r(t);var r=s(22),a=s(21),o=s(23);class n extends r.a{_deleteComment(){const{slug:e,comment:{id:t}}=this.properties;this.properties.deleteComment({slug:e,id:t})}render(){const{comment:e,loggedInUser:t}=this.properties;return Object(a.f)("div",{classes:"card"},[Object(a.f)("div",{classes:"card-block"},[Object(a.f)("p",{classes:"card-text"},[e.body])]),Object(a.f)("div",{classes:"card-footer"},[Object(a.g)(o.a,{to:"user",classes:"comment-author",params:{username:e.author.username}},[Object(a.f)("img",{src:e.author.image,classes:"comment-author-img"})]),Object(a.g)(o.a,{to:"user",classes:"comment-author",params:{username:e.author.username}},[` ${e.author.username}`]),Object(a.f)("div",{classes:"date-posted"},[new Date(e.createdAt).toDateString()]),t?Object(a.f)("div",{classes:"mod-options"},[Object(a.f)("i",{classes:"ion-trash-a",onclick:this._deleteComment})]):null])])}}class c extends r.a{_favoriteArticle(){const{slug:e,favorited:t}=this.properties;this.properties.favoriteArticle({slug:e,favorited:t})}_followUser(){const{authorUsername:e,following:t}=this.properties;this.properties.followUser({username:e,following:t})}render(){const{favoritesCount:e,favorited:t,following:s,authorUsername:r}=this.properties;return Object(a.f)("span",[Object(a.f)("button",{onclick:this._followUser,classes:["btn","btn-sm",s?"btn-secondary":"btn-outline-secondary"]},[Object(a.f)("i",{classes:"ion-plus-round"}),`${s?" Unfollow":" Follow"} ${r}`]),Object(a.f)("button",{onclick:this._favoriteArticle,classes:["btn","btn-sm",t?"btn-primary":"btn-outline-primary"]},[Object(a.f)("i",{classes:"ion-heart"}),`${t?" Unfavorite":" Favorite"}`,Object(a.f)("span",{classes:"counter"},[`(${e})`])])])}}class l extends r.a{_deleteArticle(){const{slug:e}=this.properties;this.properties.deleteArticle({slug:e})}render(){const{slug:e}=this.properties;return Object(a.f)("span",[Object(a.g)(o.a,{to:"edit-post",params:{slug:e},classes:["btn","btn-sm","btn-outline-secondary"]},[Object(a.f)("i",{classes:"ion-edit"})," Edit Article"]),Object(a.f)("button",{onclick:this._deleteArticle,classes:["btn","btn-sm","btn-outline-danger"]},[Object(a.f)("i",{classes:"ion-trash-a"})," Delete Article"])])}}class i extends r.a{render(){const{favoriteArticle:e,followUser:t,deleteArticle:s,username:r,favorited:n,favoritesCount:i,isAuthenticated:m,createdAt:u,slug:d,authorProfile:f}=this.properties;return Object(a.f)("div",{classes:"article-meta"},[Object(a.g)(o.a,{to:"user",params:{username:f.username}},[Object(a.f)("img",{src:f.image})]),Object(a.f)("div",{classes:"info"},[Object(a.g)(o.a,{to:"user",classes:"author",params:{username:f.username}},[f.username]),Object(a.f)("span",{classes:"date"},[new Date(u).toDateString()])]),m?r===f.username?Object(a.g)(l,{slug:d,deleteArticle:s}):Object(a.g)(c,{favorited:n,followUser:t,favoriteArticle:e,favoritesCount:i,slug:d,following:f.following,authorUsername:f.username}):null])}}const m=s(63);var u=s(49),d=s(24);t.default=Object(d.a)(class extends r.a{_addComment(e){if(e.preventDefault(),this.properties.article){const{article:{slug:e},newComment:t}=this.properties;this.properties.addComment({slug:e,newComment:t})}}_onNewCommentInput(e){this.properties.onNewCommentInput({newComment:e.target.value})}render(){const{username:e,deleteArticle:t,followUser:s,favoriteArticle:r,isAuthenticated:c,newComment:l,deleteComment:u,comments:d,loaded:f,loggedInUser:b,article:p}=this.properties;if(!f)return Object(a.f)("div",{classes:"article-page"},[Object(a.f)("div",{key:"banner",classes:"banner"})]);const{createdAt:g,slug:h,favorited:j,favoritesCount:O,author:v}=p;return Object(a.f)("div",{classes:"article-page"},[Object(a.f)("div",{key:"banner",classes:"banner"},[Object(a.f)("div",{classes:"container"},[Object(a.f)("h1",[p.title]),Object(a.g)(i,{authorProfile:v,isAuthenticated:c,slug:h,createdAt:g,favoriteArticle:r,followUser:s,deleteArticle:t,username:e,favorited:j,favoritesCount:O})])]),Object(a.f)("div",{key:"page",classes:["container","page"]},[Object(a.f)("div",{classes:["row","article-content"]},[Object(a.f)("div",{classes:"col-xs-12"},[Object(a.f)("div",{innerHTML:m.default(p.body)}),Object(a.f)("ul",{classes:"tag-list"},p.tagList.map(e=>Object(a.f)("li",{classes:["tag-default","tag-pill","tag-outline"]},[e])))])]),Object(a.f)("hr"),Object(a.f)("div",{classes:"article-actions"},[Object(a.g)(i,{authorProfile:v,isAuthenticated:c,slug:h,createdAt:g,favoriteArticle:r,followUser:s,deleteArticle:t,username:e,favorited:j,favoritesCount:O})]),Object(a.f)("div",{classes:"row"},[Object(a.f)("div",{classes:["col-xs-12","col-md-8","offset-md-2"]},[c?Object(a.f)("form",{classes:["card","comment-form"]},[Object(a.f)("div",{classes:"card-block"},[Object(a.f)("textarea",{value:l,oninput:this._onNewCommentInput,classes:"form-control",placeholder:"Write a comment...",rows:3})]),Object(a.f)("div",{classes:"card-footer"},[Object(a.f)("img",{classes:"comment-author-img",src:""}),Object(a.f)("button",{onclick:this._addComment,classes:["btn","btn-sm","btn-primary"]},["Post Comment"])])]):Object(a.f)("p",[Object(a.g)(o.a,{to:"login"},["Sign In"])," or ",Object(a.g)(o.a,{to:"register"},["Sign Up"])," to add comments on this article."]),Object(a.f)("div",d.map((e,t)=>Object(a.g)(n,{key:t,comment:e,loggedInUser:b,deleteComment:u,slug:p.slug})))])])])])}},"state",{paths:[["user"],["article"]],getProperties:function(e,t){const{get:s,path:r}=e;return{article:s(r("article","item")),authorProfile:s(r("article","item","author")),comments:s(r("article","comments"))||[],newComment:s(r("article","newComment")),loaded:s(r("article","loaded")),isAuthenticated:!!s(r("user","token")),loggedInUser:s(r("user","username")),username:s(r("user","username")),slug:t.slug,deleteComment:Object(u.c)(e),addComment:Object(u.a)(e),onNewCommentInput:Object(u.g)(e),favoriteArticle:Object(u.d)(e),followUser:Object(u.e)(e),deleteArticle:Object(u.b)(e)}}})}}]);
//# sourceMappingURL=ArticleContainer.6533856d194bf6c758ff.bundle.js.map